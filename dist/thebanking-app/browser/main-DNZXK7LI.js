var UO=Object.defineProperty,jO=Object.defineProperties;var BO=Object.getOwnPropertyDescriptors;var hT=Object.getOwnPropertySymbols,$O=Object.getPrototypeOf,HO=Object.prototype.hasOwnProperty,qO=Object.prototype.propertyIsEnumerable,zO=Reflect.get;var fT=(t,e,n)=>e in t?UO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V=(t,e)=>{for(var n in e||={})HO.call(e,n)&&fT(t,n,e[n]);if(hT)for(var n of hT(e))qO.call(e,n)&&fT(t,n,e[n]);return t},ke=(t,e)=>jO(t,BO(e));var si=(t,e,n)=>zO($O(t),n,e);var v=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var pT=null;var bm=1,Tm=Symbol("SIGNAL");function Ee(t){let e=pT;return pT=t,e}var mT={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function GO(t){if(!(Am(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===bm)){if(!t.producerMustRecompute(t)&&!Dm(t)){t.dirty=!1,t.lastCleanEpoch=bm;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=bm}}function gT(t){return t&&(t.nextProducerIndex=0),Ee(t)}function yT(t,e){if(Ee(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Am(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Sm(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Dm(t){Bl(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(GO(n),r!==n.version))return!0}return!1}function _T(t){if(Bl(t),Am(t))for(let e=0;e<t.producerNode.length;e++)Sm(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Sm(t,e){if(WO(t),Bl(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Sm(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Bl(i),i.producerIndexOfThis[r]=e}}function Am(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Bl(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function WO(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function KO(){throw new Error}var QO=KO;function vT(t){QO=t}function ie(t){return typeof t=="function"}function lo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var $l=lo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ki(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var nt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ie(r))try{r()}catch(s){e=s instanceof $l?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{wT(s)}catch(o){e=e??[],o instanceof $l?e=[...e,...o.errors]:e.push(o)}}if(e)throw new $l(e)}}add(e){var n;if(e&&e!==this)if(this.closed)wT(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ki(n,e)}remove(e){let{_finalizers:n}=this;n&&Ki(n,e),e instanceof t&&e._removeParent(this)}};nt.EMPTY=(()=>{let t=new nt;return t.closed=!0,t})();var Rm=nt.EMPTY;function Hl(t){return t instanceof nt||t&&"closed"in t&&ie(t.remove)&&ie(t.add)&&ie(t.unsubscribe)}function wT(t){ie(t)?t():t.unsubscribe()}var xn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ho={setTimeout(t,e,...n){let{delegate:r}=ho;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ho;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ql(t){ho.setTimeout(()=>{let{onUnhandledError:e}=xn;if(e)e(t);else throw t})}function Qi(){}var IT=xm("C",void 0,void 0);function ET(t){return xm("E",void 0,t)}function CT(t){return xm("N",t,void 0)}function xm(t,e,n){return{kind:t,value:e,error:n}}var Yi=null;function fo(t){if(xn.useDeprecatedSynchronousErrorHandling){let e=!Yi;if(e&&(Yi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Yi;if(Yi=null,n)throw r}}else t()}function bT(t){xn.useDeprecatedSynchronousErrorHandling&&Yi&&(Yi.errorThrown=!0,Yi.error=t)}var Ji=class extends nt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Hl(e)&&e.add(this)):this.destination=XO}static create(e,n,r){return new po(e,n,r)}next(e){this.isStopped?Mm(CT(e),this):this._next(e)}error(e){this.isStopped?Mm(ET(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Mm(IT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},YO=Function.prototype.bind;function Nm(t,e){return YO.call(t,e)}var Pm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){zl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){zl(r)}else zl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){zl(n)}}},po=class extends Ji{constructor(e,n,r){super();let i;if(ie(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&xn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Nm(e.next,s),error:e.error&&Nm(e.error,s),complete:e.complete&&Nm(e.complete,s)}):i=e}this.destination=new Pm(i)}};function zl(t){xn.useDeprecatedSynchronousErrorHandling?bT(t):ql(t)}function JO(t){throw t}function Mm(t,e){let{onStoppedNotification:n}=xn;n&&ho.setTimeout(()=>n(t,e))}var XO={closed:!0,next:Qi,error:JO,complete:Qi};var mo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function nn(t){return t}function km(...t){return Om(t)}function Om(t){return t.length===0?nn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var J=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=e1(n)?n:new po(n,r,i);return fo(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=TT(r),new r((i,s)=>{let o=new po({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[mo](){return this}pipe(...n){return Om(n)(this)}toPromise(n){return n=TT(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function TT(t){var e;return(e=t??xn.Promise)!==null&&e!==void 0?e:Promise}function ZO(t){return t&&ie(t.next)&&ie(t.error)&&ie(t.complete)}function e1(t){return t&&t instanceof Ji||ZO(t)&&Hl(t)}function Fm(t){return ie(t?.lift)}function ye(t){return e=>{if(Fm(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function le(t,e,n,r,i){return new Lm(t,e,n,r,i)}var Lm=class extends Ji{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function go(){return ye((t,e)=>{let n=null;t._refCount++;let r=le(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var yo=class extends J{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Fm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new nt;let n=this.getSubject();e.add(this.source.subscribe(le(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=nt.EMPTY)}return e}refCount(){return go()(this)}};var DT=lo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var St=(()=>{class t extends J{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Gl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new DT}next(n){fo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){fo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){fo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Rm:(this.currentObservers=null,s.push(n),new nt(()=>{this.currentObservers=null,Ki(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new J;return n.source=this,n}}return t.create=(e,n)=>new Gl(e,n),t})(),Gl=class extends St{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Rm}};var ut=class extends St{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Vm={now(){return(Vm.delegate||Date).now()},delegate:void 0};var Wl=class extends nt{constructor(e,n){super()}schedule(e,n=0){return this}};var vc={setInterval(t,e,...n){let{delegate:r}=vc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=vc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var _o=class extends Wl{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return vc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&vc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ki(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var vo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};vo.now=Vm.now;var wo=class extends vo{constructor(e,n=vo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Io=new wo(_o),Um=Io;var Kl=class extends _o{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Ql=class extends wo{};var jm=new Ql(Kl);var rn=new J(t=>t.complete());function Yl(t){return t&&ie(t.schedule)}function ST(t){return t[t.length-1]}function Jl(t){return ie(ST(t))?t.pop():void 0}function oi(t){return Yl(ST(t))?t.pop():void 0}function Bm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function RT(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(f){o(f)}}function c(d){try{l(r.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function AT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xi(t){return this instanceof Xi?(this.v=t,this):new Xi(t)}function xT(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(m){r[m]&&(i[m]=function(y){return new Promise(function(E,x){s.push([m,y,E,x])>1||a(m,y)})})}function a(m,y){try{c(r[m](y))}catch(E){f(s[0][3],E)}}function c(m){m.value instanceof Xi?Promise.resolve(m.value.v).then(l,d):f(s[0][2],m)}function l(m){a("next",m)}function d(m){a("throw",m)}function f(m,y){m(y),s.shift(),s.length&&a(s[0][0],s[0][1])}}function NT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof AT=="function"?AT(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Xl=t=>t&&typeof t.length=="number"&&typeof t!="function";function Zl(t){return ie(t?.then)}function ed(t){return ie(t[mo])}function td(t){return Symbol.asyncIterator&&ie(t?.[Symbol.asyncIterator])}function nd(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function t1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var rd=t1();function id(t){return ie(t?.[rd])}function sd(t){return xT(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Xi(n.read());if(i)return yield Xi(void 0);yield yield Xi(r)}}finally{n.releaseLock()}})}function od(t){return ie(t?.getReader)}function Ye(t){if(t instanceof J)return t;if(t!=null){if(ed(t))return n1(t);if(Xl(t))return r1(t);if(Zl(t))return i1(t);if(td(t))return MT(t);if(id(t))return s1(t);if(od(t))return o1(t)}throw nd(t)}function n1(t){return new J(e=>{let n=t[mo]();if(ie(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function r1(t){return new J(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function i1(t){return new J(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ql)})}function s1(t){return new J(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function MT(t){return new J(e=>{a1(t,e).catch(n=>e.error(n))})}function o1(t){return MT(sd(t))}function a1(t,e){var n,r,i,s;return RT(this,void 0,void 0,function*(){try{for(n=NT(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function qt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function ai(t,e=0){return ye((n,r)=>{n.subscribe(le(r,i=>qt(r,t,()=>r.next(i),e),()=>qt(r,t,()=>r.complete(),e),i=>qt(r,t,()=>r.error(i),e)))})}function ci(t,e=0){return ye((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function PT(t,e){return Ye(t).pipe(ci(e),ai(e))}function kT(t,e){return Ye(t).pipe(ci(e),ai(e))}function OT(t,e){return new J(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function FT(t,e){return new J(n=>{let r;return qt(n,e,()=>{r=t[rd](),qt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>ie(r?.return)&&r.return()})}function ad(t,e){if(!t)throw new Error("Iterable cannot be null");return new J(n=>{qt(n,e,()=>{let r=t[Symbol.asyncIterator]();qt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function LT(t,e){return ad(sd(t),e)}function VT(t,e){if(t!=null){if(ed(t))return PT(t,e);if(Xl(t))return OT(t,e);if(Zl(t))return kT(t,e);if(td(t))return ad(t,e);if(id(t))return FT(t,e);if(od(t))return LT(t,e)}throw nd(t)}function Je(t,e){return e?VT(t,e):Ye(t)}function Z(...t){let e=oi(t);return Je(t,e)}function Eo(t,e){let n=ie(t)?t:()=>t,r=i=>i.error(n());return new J(e?i=>e.schedule(r,0,i):r)}function $m(t){return!!t&&(t instanceof J||ie(t.lift)&&ie(t.subscribe))}var Dr=lo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function UT(t){return t instanceof Date&&!isNaN(t)}function se(t,e){return ye((n,r)=>{let i=0;n.subscribe(le(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:c1}=Array;function u1(t,e){return c1(e)?t(...e):t(e)}function cd(t){return se(e=>u1(t,e))}var{isArray:l1}=Array,{getPrototypeOf:d1,prototype:h1,keys:f1}=Object;function ud(t){if(t.length===1){let e=t[0];if(l1(e))return{args:e,keys:null};if(p1(e)){let n=f1(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function p1(t){return t&&typeof t=="object"&&d1(t)===h1}function ld(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function dd(...t){let e=oi(t),n=Jl(t),{args:r,keys:i}=ud(t);if(r.length===0)return Je([],e);let s=new J(m1(r,e,i?o=>ld(i,o):nn));return n?s.pipe(cd(n)):s}function m1(t,e,n=nn){return r=>{jT(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)jT(e,()=>{let l=Je(t[c],e),d=!1;l.subscribe(le(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function jT(t,e,n){t?qt(n,t,e):e()}function BT(t,e,n,r,i,s,o,a){let c=[],l=0,d=0,f=!1,m=()=>{f&&!c.length&&!l&&e.complete()},y=x=>l<r?E(x):c.push(x),E=x=>{s&&e.next(x),l++;let R=!1;Ye(n(x,d++)).subscribe(le(e,O=>{i?.(O),s?y(O):e.next(O)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;c.length&&l<r;){let O=c.shift();o?qt(e,o,()=>E(O)):E(O)}m()}catch(O){e.error(O)}}))};return t.subscribe(le(e,y,()=>{f=!0,m()})),()=>{a?.()}}function rt(t,e,n=1/0){return ie(e)?rt((r,i)=>se((s,o)=>e(r,s,i,o))(Ye(t(r,i))),n):(typeof e=="number"&&(n=e),ye((r,i)=>BT(r,i,t,n)))}function Hm(t=1/0){return rt(nn,t)}function $T(){return Hm(1)}function ui(...t){return $T()(Je(t,oi(t)))}function hd(t){return new J(e=>{Ye(t()).subscribe(e)})}function qm(...t){let e=Jl(t),{args:n,keys:r}=ud(t),i=new J(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let f=!1;Ye(n[d]).subscribe(le(s,m=>{f||(f=!0,l--),a[d]=m},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(r?ld(r,a):a),s.complete())}))}});return e?i.pipe(cd(e)):i}function HT(t=0,e,n=Um){let r=-1;return e!=null&&(Yl(e)?n=e:r=e),new J(i=>{let s=UT(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function sn(t,e){return ye((n,r)=>{let i=0;n.subscribe(le(r,s=>t.call(e,s,i++)&&r.next(s)))})}function on(t){return ye((e,n)=>{let r=null,i=!1,s;r=e.subscribe(le(n,void 0,void 0,o=>{s=Ye(t(o,on(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function qT(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(le(o,d=>{let f=l++;c=a?t(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Co(t,e){return ie(e)?rt(t,e,1):rt(t,1)}function li(t){return ye((e,n)=>{let r=!1;e.subscribe(le(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function lt(t){return t<=0?()=>rn:ye((e,n)=>{let r=0;e.subscribe(le(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function zT(){return ye((t,e)=>{t.subscribe(le(e,Qi))})}function wc(t){return se(()=>t)}function zm(t,e){return e?n=>ui(e.pipe(lt(1),zT()),n.pipe(zm(t))):rt((n,r)=>Ye(t(n,r)).pipe(lt(1),wc(n)))}function Gm(t,e=Io){let n=HT(t,e);return zm(()=>n)}function fd(t=g1){return ye((e,n)=>{let r=!1;e.subscribe(le(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function g1(){return new Dr}function Ic(t){return ye((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Kn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?sn((i,s)=>t(i,s,r)):nn,lt(1),n?li(e):fd(()=>new Dr))}function bo(t){return t<=0?()=>rn:ye((e,n)=>{let r=[];e.subscribe(le(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Wm(t,e){let n=arguments.length>=2;return r=>r.pipe(t?sn((i,s)=>t(i,s,r)):nn,bo(1),n?li(e):fd(()=>new Dr))}function pd(t,e){return ye(qT(t,e,arguments.length>=2,!0))}function Km(...t){let e=oi(t);return ye((n,r)=>{(e?ui(t,n,e):ui(t,n)).subscribe(r)})}function gn(t,e){return ye((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(le(r,c=>{i?.unsubscribe();let l=0,d=s++;Ye(t(c,d)).subscribe(i=le(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Qm(t){return ye((e,n)=>{Ye(t).subscribe(le(n,()=>n.complete(),Qi)),!n.closed&&e.subscribe(n)})}function dt(t,e,n){let r=ie(t)||e||n?{next:t,error:e,complete:n}:t;return r?ye((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(le(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):nn}var x0="https://g.co/ng/security#xss",Q=class extends Error{constructor(e,n){super(Xg(e,n)),this.code=e}};function Xg(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function kc(t){return{toString:t}.toString()}var md="__parameters__";function y1(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function N0(t,e,n){return kc(()=>{let r=y1(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let f=c.hasOwnProperty(md)?c[md]:Object.defineProperty(c,md,{value:[]})[md];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Mn=globalThis;function Le(t){for(let e in t)if(t[e]===Le)return e;throw Error("Could not find renamed property on target object.")}function _1(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Vt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Vt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function GT(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var v1=Le({__forward_ref__:Le});function Lo(t){return t.__forward_ref__=Lo,t.toString=function(){return Vt(this())},t}function Ft(t){return M0(t)?t():t}function M0(t){return typeof t=="function"&&t.hasOwnProperty(v1)&&t.__forward_ref__===Lo}function W(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ds(t){return{providers:t.providers||[],imports:t.imports||[]}}function zd(t){return WT(t,k0)||WT(t,O0)}function P0(t){return zd(t)!==null}function WT(t,e){return t.hasOwnProperty(e)?t[e]:null}function w1(t){let e=t&&(t[k0]||t[O0]);return e||null}function KT(t){return t&&(t.hasOwnProperty(QT)||t.hasOwnProperty(I1))?t[QT]:null}var k0=Le({\u0275prov:Le}),QT=Le({\u0275inj:Le}),O0=Le({ngInjectableDef:Le}),I1=Le({ngInjectorDef:Le}),G=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=W({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function F0(t){return t&&!!t.\u0275providers}var E1=Le({\u0275cmp:Le}),C1=Le({\u0275dir:Le}),b1=Le({\u0275pipe:Le}),T1=Le({\u0275mod:Le}),bd=Le({\u0275fac:Le}),Ec=Le({__NG_ELEMENT_ID__:Le}),YT=Le({__NG_ENV_ID__:Le});function Gd(t){return typeof t=="string"?t:t==null?"":String(t)}function D1(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Gd(t)}function S1(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Q(-200,t)}function Zg(t,e){throw new Q(-201,!1)}var de=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(de||{}),hg;function L0(){return hg}function zt(t){let e=hg;return hg=t,e}function V0(t,e,n){let r=zd(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&de.Optional)return null;if(e!==void 0)return e;Zg(t,"Injector")}var A1={},Cc=A1,fg="__NG_DI_FLAG__",Td="ngTempTokenPath",R1="ngTokenPath",x1=/\n/gm,N1="\u0275",JT="__source",Ao;function M1(){return Ao}function di(t){let e=Ao;return Ao=t,e}function P1(t,e=de.Default){if(Ao===void 0)throw new Q(-203,!1);return Ao===null?V0(t,void 0,e):Ao.get(t,e&de.Optional?null:void 0,e)}function X(t,e=de.Default){return(L0()||P1)(Ft(t),e)}function U(t,e=de.Default){return X(t,Wd(e))}function Wd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function pg(t){let e=[];for(let n=0;n<t.length;n++){let r=Ft(t[n]);if(Array.isArray(r)){if(r.length===0)throw new Q(900,!1);let i,s=de.Default;for(let o=0;o<r.length;o++){let a=r[o],c=k1(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(X(i,s))}else e.push(X(r))}return e}function U0(t,e){return t[fg]=e,t.prototype[fg]=e,t}function k1(t){return t[fg]}function O1(t,e,n,r){let i=t[Td];throw e[JT]&&i.unshift(e[JT]),t.message=F1(`
`+t.message,i,n,r),t[R1]=i,t[Td]=null,t}function F1(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==N1?t.slice(2):t;let i=Vt(e);if(Array.isArray(e))i=e.map(Vt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Vt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(x1,`
  `)}`}var He=U0(N0("Optional"),8);var j0=U0(N0("SkipSelf"),4);function ns(t,e){let n=t.hasOwnProperty(bd);return n?t[bd]:null}function ey(t,e){t.forEach(n=>Array.isArray(n)?ey(n,e):e(n))}function B0(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Dd(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function L1(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function V1(t,e,n){let r=Oc(t,e);return r>=0?t[r|1]=n:(r=~r,L1(t,r,e,n)),r}function Ym(t,e){let n=Oc(t,e);if(n>=0)return t[n|1]}function Oc(t,e){return U1(t,e,1)}function U1(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var xo={},yn=[],No=new G(""),$0=new G("",-1),H0=new G(""),Sd=class{get(e,n=Cc){if(n===Cc){let r=new Error(`NullInjectorError: No provider for ${Vt(e)}!`);throw r.name="NullInjectorError",r}return n}},q0=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(q0||{}),Jn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Jn||{}),Ut=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Ut||{});function j1(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function mg(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];B1(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function z0(t){return t===3||t===4||t===6}function B1(t){return t.charCodeAt(0)===64}function bc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?XT(t,n,i,null,e[++r]):XT(t,n,i,null,null))}}return t}function XT(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var G0="ng-template";function $1(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&j1(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(ty(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function ty(t){return t.type===4&&t.value!==G0}function H1(t,e,n){let r=t.type===4&&!n?G0:t.value;return e===r}function q1(t,e,n){let r=4,i=t.attrs,s=i!==null?W1(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Nn(r)&&!Nn(c))return!1;if(o&&Nn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!H1(t,c,n)||c===""&&e.length===1){if(Nn(r))return!1;o=!0}}else if(r&8){if(i===null||!$1(t,i,c,n)){if(Nn(r))return!1;o=!0}}else{let l=e[++a],d=z1(c,i,ty(t),n);if(d===-1){if(Nn(r))return!1;o=!0;continue}if(l!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(Nn(r))return!1;o=!0}}}}return Nn(r)||o}function Nn(t){return(t&1)===0}function z1(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return K1(e,t)}function G1(t,e,n=!1){for(let r=0;r<e.length;r++)if(q1(t,e[r],n))return!0;return!1}function W1(t){for(let e=0;e<t.length;e++){let n=t[e];if(z0(n))return e}return t.length}function K1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function ZT(t,e){return t?":not("+e.trim()+")":e}function Q1(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Nn(o)&&(e+=ZT(s,i),i=""),r=o,s=s||!Nn(r);n++}return i!==""&&(e+=ZT(s,i)),e}function Y1(t){return t.map(Q1).join(",")}function J1(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Nn(i))break;i=s}r++}return{attrs:e,classes:n}}function ze(t){return kc(()=>{let e=J0(t),n=ke(V({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===q0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Jn.Emulated,styles:t.styles||yn,_:null,schemas:t.schemas||null,tView:null,id:""});X0(n);let r=t.dependencies;return n.directiveDefs=t0(r,!1),n.pipeDefs=t0(r,!0),n.id=eF(n),n})}function X1(t){return rs(t)||W0(t)}function Z1(t){return t!==null}function hs(t){return kc(()=>({type:t.type,bootstrap:t.bootstrap||yn,declarations:t.declarations||yn,imports:t.imports||yn,exports:t.exports||yn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function e0(t,e){if(t==null)return xo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Ut.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Ut.None?[r,a]:r,e[s]=o):n[s]=r}return n}function an(t){return kc(()=>{let e=J0(t);return X0(e),e})}function Kd(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function rs(t){return t[E1]||null}function W0(t){return t[C1]||null}function K0(t){return t[b1]||null}function Q0(t){let e=rs(t)||W0(t)||K0(t);return e!==null?e.standalone:!1}function Y0(t,e){let n=t[T1]||null;if(!n&&e===!0)throw new Error(`Type ${Vt(t)} does not have '\u0275mod' property.`);return n}function J0(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||xo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||yn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:e0(t.inputs,e),outputs:e0(t.outputs),debugInfo:null}}function X0(t){t.features?.forEach(e=>e(t))}function t0(t,e){if(!t)return null;let n=e?K0:X1;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(Z1)}function eF(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Gt(t){return{\u0275providers:t}}function tF(...t){return{\u0275providers:Z0(!0,t),\u0275fromNgModule:!0}}function Z0(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return ey(e,o=>{let a=o;gg(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&eD(i,s),n}function eD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];ny(i,s=>{e(s,r)})}}function gg(t,e,n,r){if(t=Ft(t),!t)return!1;let i=null,s=KT(t),o=!s&&rs(t);if(!s&&!o){let c=t.ngModule;if(s=KT(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)gg(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{ey(s.imports,d=>{gg(d,e,n,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&eD(l,e)}if(!a){let l=ns(i)||(()=>new i);e({provide:i,useFactory:l,deps:yn},i),e({provide:H0,useValue:i,multi:!0},i),e({provide:No,useValue:()=>X(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;ny(c,d=>{e(d,l)})}}else return!1;return i!==t&&t.providers!==void 0}function ny(t,e){for(let n of t)F0(n)&&(n=n.\u0275providers),Array.isArray(n)?ny(n,e):e(n)}var nF=Le({provide:String,useValue:Le});function tD(t){return t!==null&&typeof t=="object"&&nF in t}function rF(t){return!!(t&&t.useExisting)}function iF(t){return!!(t&&t.useFactory)}function Mo(t){return typeof t=="function"}function sF(t){return!!t.useClass}var Qd=new G(""),vd={},oF={},Jm;function ry(){return Jm===void 0&&(Jm=new Sd),Jm}var vn=class{},Tc=class extends vn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_g(e,o=>this.processProvider(o)),this.records.set($0,To(void 0,this)),i.has("environment")&&this.records.set(vn,To(void 0,this));let s=this.records.get(Qd);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(H0,yn,de.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ee(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ee(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=di(this),r=zt(void 0),i;try{return e()}finally{di(n),zt(r)}}get(e,n=Cc,r=de.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(YT))return e[YT](this);r=Wd(r);let i,s=di(this),o=zt(void 0);try{if(!(r&de.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=dF(e)&&zd(e);l&&this.injectableDefInScope(l)?c=To(yg(e),vd):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&de.Self?ry():this.parent;return n=r&de.Optional&&n===Cc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Td]=a[Td]||[]).unshift(Vt(e)),s)throw a;return O1(a,e,"R3InjectorError",this.source)}else throw a}finally{zt(o),di(s)}}resolveInjectorInitializers(){let e=Ee(null),n=di(this),r=zt(void 0),i;try{let s=this.get(No,yn,de.Self);for(let o of s)o()}finally{di(n),zt(r),Ee(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Vt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Q(205,!1)}processProvider(e){e=Ft(e);let n=Mo(e)?e:Ft(e&&e.provide),r=cF(e);if(!Mo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=To(void 0,vd,!0),i.factory=()=>pg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=Ee(null);try{return n.value===vd&&(n.value=oF,n.value=n.factory()),typeof n.value=="object"&&n.value&&lF(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ee(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ft(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function yg(t){let e=zd(t),n=e!==null?e.factory:ns(t);if(n!==null)return n;if(t instanceof G)throw new Q(204,!1);if(t instanceof Function)return aF(t);throw new Q(204,!1)}function aF(t){if(t.length>0)throw new Q(204,!1);let n=w1(t);return n!==null?()=>n.factory(t):()=>new t}function cF(t){if(tD(t))return To(void 0,t.useValue);{let e=nD(t);return To(e,vd)}}function nD(t,e,n){let r;if(Mo(t)){let i=Ft(t);return ns(i)||yg(i)}else if(tD(t))r=()=>Ft(t.useValue);else if(iF(t))r=()=>t.useFactory(...pg(t.deps||[]));else if(rF(t))r=()=>X(Ft(t.useExisting));else{let i=Ft(t&&(t.useClass||t.provide));if(uF(t))r=()=>new i(...pg(t.deps));else return ns(i)||yg(i)}return r}function To(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function uF(t){return!!t.deps}function lF(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function dF(t){return typeof t=="function"||typeof t=="object"&&t instanceof G}function _g(t,e){for(let n of t)Array.isArray(n)?_g(n,e):n&&F0(n)?_g(n.\u0275providers,e):e(n)}function fs(t,e){t instanceof Tc&&t.assertNotDestroyed();let n,r=di(t),i=zt(void 0);try{return e()}finally{di(r),zt(i)}}function hF(){return L0()!==void 0||M1()!=null}function fF(t){return typeof t=="function"}var xr=0,_e=1,te=2,At=3,Pn=4,Fn=5,Ad=6,Dc=7,kn=8,Po=9,On=10,ht=11,Sc=12,n0=13,Vo=14,Xn=15,Yd=16,Do=17,ko=18,Jd=19,rD=20,hi=21,Xm=22,is=23,wn=25,iD=1;var ss=7,Rd=8,xd=9,_n=10,iy=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(iy||{});function es(t){return Array.isArray(t)&&typeof t[iD]=="object"}function Nr(t){return Array.isArray(t)&&t[iD]===!0}function sD(t){return(t.flags&4)!==0}function Xd(t){return t.componentOffset>-1}function sy(t){return(t.flags&1)===1}function fi(t){return!!t.template}function pF(t){return(t[te]&512)!==0}var vg=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function oD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function ps(){return aD}function aD(t){return t.type.prototype.ngOnChanges&&(t.setInput=gF),mF}ps.ngInherit=!0;function mF(){let t=uD(this),e=t?.current;if(e){let n=t.previous;if(n===xo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function gF(t,e,n,r,i){let s=this.declaredInputs[r],o=uD(t)||yF(t,{previous:xo,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new vg(l&&l.currentValue,n,c===xo),oD(t,e,i,n)}var cD="__ngSimpleChanges__";function uD(t){return t[cD]||null}function yF(t,e){return t[cD]=e}var r0=null;var Qn=function(t,e,n){r0?.(t,e,n)},_F="svg",vF="math",wF=!1;function IF(){return wF}function Zn(t){for(;Array.isArray(t);)t=t[xr];return t}function lD(t,e){return Zn(e[t])}function In(t,e){return Zn(e[t.index])}function dD(t,e){return t.data[e]}function oy(t,e){return t[e]}function gi(t,e){let n=e[t];return es(n)?n:n[xr]}function ay(t){return(t[te]&128)===128}function EF(t){return Nr(t[At])}function Nd(t,e){return e==null?null:t[e]}function hD(t){t[Do]=0}function CF(t){t[te]&1024||(t[te]|=1024,ay(t)&&Ac(t))}function bF(t,e){for(;t>0;)e=e[Vo],t--;return e}function cy(t){return!!(t[te]&9216||t[is]?.dirty)}function wg(t){t[On].changeDetectionScheduler?.notify(1),cy(t)?Ac(t):t[te]&64&&(IF()?(t[te]|=1024,Ac(t)):t[On].changeDetectionScheduler?.notify())}function Ac(t){t[On].changeDetectionScheduler?.notify();let e=Rc(t);for(;e!==null&&!(e[te]&8192||(e[te]|=8192,!ay(e)));)e=Rc(e)}function fD(t,e){if((t[te]&256)===256)throw new Q(911,!1);t[hi]===null&&(t[hi]=[]),t[hi].push(e)}function TF(t,e){if(t[hi]===null)return;let n=t[hi].indexOf(e);n!==-1&&t[hi].splice(n,1)}function Rc(t){let e=t[At];return Nr(e)?e[At]:e}var he={lFrame:wD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function DF(){return he.lFrame.elementDepthCount}function SF(){he.lFrame.elementDepthCount++}function AF(){he.lFrame.elementDepthCount--}function pD(){return he.bindingsEnabled}function RF(){return he.skipHydrationRootTNode!==null}function xF(t){return he.skipHydrationRootTNode===t}function NF(){he.skipHydrationRootTNode=null}function Ne(){return he.lFrame.lView}function Wt(){return he.lFrame.tView}function ms(t){return he.lFrame.contextLView=t,t[kn]}function gs(t){return he.lFrame.contextLView=null,t}function Kt(){let t=mD();for(;t!==null&&t.type===64;)t=t.parent;return t}function mD(){return he.lFrame.currentTNode}function MF(){let t=he.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Fc(t,e){let n=he.lFrame;n.currentTNode=t,n.isParent=e}function gD(){return he.lFrame.isParent}function PF(){he.lFrame.isParent=!1}function kF(){return he.lFrame.contextLView}function uy(){let t=he.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function OF(t){return he.lFrame.bindingIndex=t}function Zd(){return he.lFrame.bindingIndex++}function FF(t){let e=he.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function LF(){return he.lFrame.inI18n}function VF(t,e){let n=he.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ig(e)}function UF(){return he.lFrame.currentDirectiveIndex}function Ig(t){he.lFrame.currentDirectiveIndex=t}function jF(t){let e=he.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function yD(t){he.lFrame.currentQueryIndex=t}function BF(t){let e=t[_e];return e.type===2?e.declTNode:e.type===1?t[Fn]:null}function _D(t,e,n){if(n&de.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&de.Host);)if(i=BF(s),i===null||(s=s[Vo],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=he.lFrame=vD();return r.currentTNode=e,r.lView=t,!0}function ly(t){let e=vD(),n=t[_e];he.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function vD(){let t=he.lFrame,e=t===null?null:t.child;return e===null?wD(t):e}function wD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function ID(){let t=he.lFrame;return he.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ED=ID;function dy(){let t=ID();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function $F(t){return(he.lFrame.contextLView=bF(t,he.lFrame.contextLView))[kn]}function Uo(){return he.lFrame.selectedIndex}function os(t){he.lFrame.selectedIndex=t}function hy(){let t=he.lFrame;return dD(t.tView,t.selectedIndex)}function HF(){return he.lFrame.currentNamespace}var CD=!0;function fy(){return CD}function py(t){CD=t}function qF(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=aD(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function my(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function wd(t,e,n){bD(t,e,3,n)}function Id(t,e,n,r){(t[te]&3)===n&&bD(t,e,n,r)}function Zm(t,e){let n=t[te];(n&3)===e&&(n&=16383,n+=1,t[te]=n)}function bD(t,e,n,r){let i=r!==void 0?t[Do]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Do]+=65536),(a<s||s==-1)&&(zF(t,n,e,c),t[Do]=(t[Do]&4294901760)+c+2),c++}function i0(t,e){Qn(4,t,e);let n=Ee(null);try{e.call(t)}finally{Ee(n),Qn(5,t,e)}}function zF(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[te]>>14<t[Do]>>16&&(t[te]&3)===e&&(t[te]+=16384,i0(a,s)):i0(a,s)}var Ro=-1,as=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function GF(t){return t instanceof as}function WF(t){return(t.flags&8)!==0}function KF(t){return(t.flags&16)!==0}function TD(t){return t!==Ro}function Md(t){return t&32767}function QF(t){return t>>16}function Pd(t,e){let n=QF(t),r=e;for(;n>0;)r=r[Vo],n--;return r}var Eg=!0;function kd(t){let e=Eg;return Eg=t,e}var YF=256,DD=YF-1,SD=5,JF=0,Yn={};function XF(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ec)&&(r=n[Ec]),r==null&&(r=n[Ec]=JF++);let i=r&DD,s=1<<i;e.data[t+(i>>SD)]|=s}function Od(t,e){let n=AD(t,e);if(n!==-1)return n;let r=e[_e];r.firstCreatePass&&(t.injectorIndex=e.length,eg(r.data,t),eg(e,null),eg(r.blueprint,null));let i=gy(t,e),s=t.injectorIndex;if(TD(i)){let o=Md(i),a=Pd(i,e),c=a[_e].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function eg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function AD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function gy(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=PD(i),r===null)return Ro;if(n++,i=i[Vo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ro}function Cg(t,e,n){XF(t,e,n)}function ZF(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(z0(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function RD(t,e,n){if(n&de.Optional||t!==void 0)return t;Zg(e,"NodeInjector")}function xD(t,e,n,r){if(n&de.Optional&&r===void 0&&(r=null),!(n&(de.Self|de.Host))){let i=t[Po],s=zt(void 0);try{return i?i.get(e,r,n&de.Optional):V0(e,r,n&de.Optional)}finally{zt(s)}}return RD(r,e,n)}function ND(t,e,n,r=de.Default,i){if(t!==null){if(e[te]&2048&&!(r&de.Self)){let o=iL(t,e,n,r,Yn);if(o!==Yn)return o}let s=MD(t,e,n,r,Yn);if(s!==Yn)return s}return xD(e,n,r,i)}function MD(t,e,n,r,i){let s=nL(n);if(typeof s=="function"){if(!_D(e,t,r))return r&de.Host?RD(i,n,r):xD(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&de.Optional))Zg(n);else return o}finally{ED()}}else if(typeof s=="number"){let o=null,a=AD(t,e),c=Ro,l=r&de.Host?e[Xn][Fn]:null;for((a===-1||r&de.SkipSelf)&&(c=a===-1?gy(t,e):e[a+8],c===Ro||!o0(r,!1)?a=-1:(o=e[_e],a=Md(c),e=Pd(c,e)));a!==-1;){let d=e[_e];if(s0(s,a,d.data)){let f=eL(a,e,n,o,r,l);if(f!==Yn)return f}c=e[a+8],c!==Ro&&o0(r,e[_e].data[a+8]===l)&&s0(s,a,e)?(o=d,a=Md(c),e=Pd(c,e)):a=-1}}return i}function eL(t,e,n,r,i,s){let o=e[_e],a=o.data[t+8],c=r==null?Xd(a)&&Eg:r!=o&&(a.type&3)!==0,l=i&de.Host&&s===a,d=tL(a,o,n,c,l);return d!==null?Oo(e,o,d,a):Yn}function tL(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,d=s>>20,f=r?a:a+d,m=i?a+d:l;for(let y=f;y<m;y++){let E=o[y];if(y<c&&n===E||y>=c&&E.type===n)return y}if(i){let y=o[c];if(y&&fi(y)&&y.type===n)return c}return null}function Oo(t,e,n,r){let i=t[n],s=e.data;if(GF(i)){let o=i;o.resolving&&S1(D1(s[n]));let a=kd(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?zt(o.injectImpl):null,d=_D(t,r,de.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&qF(n,s[n],e)}finally{l!==null&&zt(l),kd(a),o.resolving=!1,ED()}}return i}function nL(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ec)?t[Ec]:void 0;return typeof e=="number"?e>=0?e&DD:rL:e}function s0(t,e,n){let r=1<<t;return!!(n[e+(t>>SD)]&r)}function o0(t,e){return!(t&de.Self)&&!(t&de.Host&&e)}var ts=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ND(this._tNode,this._lView,e,Wd(r),n)}};function rL(){return new ts(Kt(),Ne())}function jo(t){return kc(()=>{let e=t.prototype.constructor,n=e[bd]||bg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[bd]||bg(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function bg(t){return M0(t)?()=>{let e=bg(Ft(t));return e&&e()}:ns(t)}function iL(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[te]&2048&&!(o[te]&512);){let a=MD(s,o,n,r|de.Self,Yn);if(a!==Yn)return a;let c=s.parent;if(!c){let l=o[rD];if(l){let d=l.get(n,Yn,r);if(d!==Yn)return d}c=PD(o),o=o[Vo]}s=c}return i}function PD(t){let e=t[_e],n=e.type;return n===2?e.declTNode:n===1?t[Fn]:null}function yy(t){return ZF(Kt(),t)}function a0(t,e=null,n=null,r){let i=kD(t,e,n,r);return i.resolveInjectorInitializers(),i}function kD(t,e=null,n=null,r,i=new Set){let s=[n||yn,tF(t)];return r=r||(typeof t=="object"?void 0:Vt(t)),new Tc(s,e||ry(),r||null,i)}var Rt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return a0({name:""},i,r,"");{let s=r.name??"";return a0({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=Cc,e.NULL=new Sd,e.\u0275prov=W({token:e,providedIn:"any",factory:()=>X($0)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var sL="ngOriginalError";function tg(t){return t[sL]}var Sr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&tg(e);for(;n&&tg(n);)n=tg(n);return n||null}},OD=new G("",{providedIn:"root",factory:()=>U(Sr).handleError.bind(void 0)}),FD=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=oL,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Tg=class extends FD{constructor(e){super(),this._lView=e}onDestroy(e){return fD(this._lView,e),()=>TF(this._lView,e)}};function oL(){return new Tg(Ne())}function aL(){return eh(Kt(),Ne())}function eh(t,e){return new yi(In(t,e))}var yi=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=aL;let t=e;return t})();var Dg=class extends St{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,hF()&&(this.destroyRef=U(FD,{optional:!0})??void 0)}emit(e){let n=Ee(null);try{super.next(e)}finally{Ee(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=ng(s),i&&(i=ng(i)),o&&(o=ng(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof nt&&e.add(a),a}};function ng(t){return e=>{setTimeout(t,void 0,e)}}var Lt=Dg;function LD(t){return(t.flags&128)===128}var VD=new Map,cL=0;function uL(){return cL++}function lL(t){VD.set(t[Jd],t)}function dL(t){VD.delete(t[Jd])}var c0="__ngContext__";function cs(t,e){es(e)?(t[c0]=e[Jd],lL(e)):t[c0]=e}function UD(t){return BD(t[Sc])}function jD(t){return BD(t[Pn])}function BD(t){for(;t!==null&&!Nr(t);)t=t[Pn];return t}var Sg;function $D(t){Sg=t}function hL(){if(Sg!==void 0)return Sg;if(typeof document<"u")return document;throw new Q(210,!1)}var _y=new G("",{providedIn:"root",factory:()=>fL}),fL="ng",vy=new G(""),_i=new G("",{providedIn:"platform",factory:()=>"unknown"});var wy=new G("",{providedIn:"root",factory:()=>hL().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var pL="h",mL="b";var gL=()=>null;function Iy(t,e,n=!1){return gL(t,e,n)}var HD=!1,yL=new G("",{providedIn:"root",factory:()=>HD});var gd;function _L(){if(gd===void 0&&(gd=null,Mn.trustedTypes))try{gd=Mn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return gd}function u0(t){return _L()?.createScriptURL(t)||t}var Fd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${x0})`}};function Lc(t){return t instanceof Fd?t.changingThisBreaksApplicationSecurity:t}function Ey(t,e){let n=vL(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${x0})`)}return n===e}function vL(t){return t instanceof Fd&&t.getTypeName()||null}var wL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function qD(t){return t=String(t),t.match(wL)?t:"unsafe:"+t}var th=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(th||{});function IL(t){let e=GD();return e?e.sanitize(th.URL,t)||"":Ey(t,"URL")?Lc(t):qD(Gd(t))}function EL(t){let e=GD();if(e)return u0(e.sanitize(th.RESOURCE_URL,t)||"");if(Ey(t,"ResourceURL"))return u0(Lc(t));throw new Q(904,!1)}function CL(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?EL:IL}function zD(t,e,n){return CL(e,n)(t)}function GD(){let t=Ne();return t&&t[On].sanitizer}function WD(t){return t instanceof Function?t():t}var Ar=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ar||{}),bL;function Cy(t,e){return bL(t,e)}function So(t,e,n,r,i){if(r!=null){let s,o=!1;Nr(r)?s=r:es(r)&&(o=!0,r=r[xr]);let a=Zn(r);t===0&&n!==null?i==null?XD(e,n,a):Ld(e,n,a,i||null,!0):t===1&&n!==null?Ld(e,n,a,i||null,!0):t===2?BL(e,a,o):t===3&&e.destroyNode(a),s!=null&&HL(e,t,s,n,i)}}function TL(t,e){return t.createText(e)}function DL(t,e,n){t.setValue(e,n)}function KD(t,e,n){return t.createElement(e,n)}function SL(t,e){QD(t,e),e[xr]=null,e[Fn]=null}function AL(t,e,n,r,i,s){r[xr]=i,r[Fn]=e,nh(t,r,n,1,i,s)}function QD(t,e){e[On].changeDetectionScheduler?.notify(1),nh(t,e,e[ht],2,null,null)}function RL(t){let e=t[Sc];if(!e)return rg(t[_e],t);for(;e;){let n=null;if(es(e))n=e[Sc];else{let r=e[_n];r&&(n=r)}if(!n){for(;e&&!e[Pn]&&e!==t;)es(e)&&rg(e[_e],e),e=e[At];e===null&&(e=t),es(e)&&rg(e[_e],e),n=e&&e[Pn]}e=n}}function xL(t,e,n,r){let i=_n+r,s=n.length;r>0&&(n[i-1][Pn]=e),r<s-_n?(e[Pn]=n[i],B0(n,_n+r,e)):(n.push(e),e[Pn]=null),e[At]=n;let o=e[Yd];o!==null&&n!==o&&NL(o,e);let a=e[ko];a!==null&&a.insertView(t),wg(e),e[te]|=128}function NL(t,e){let n=t[xd],i=e[At][At][Xn];e[Xn]!==i&&(t[te]|=iy.HasTransplantedViews),n===null?t[xd]=[e]:n.push(e)}function YD(t,e){let n=t[xd],r=n.indexOf(e);n.splice(r,1)}function Ag(t,e){if(t.length<=_n)return;let n=_n+e,r=t[n];if(r){let i=r[Yd];i!==null&&i!==t&&YD(i,r),e>0&&(t[n-1][Pn]=r[Pn]);let s=Dd(t,_n+e);SL(r[_e],r);let o=s[ko];o!==null&&o.detachView(s[_e]),r[At]=null,r[Pn]=null,r[te]&=-129}return r}function JD(t,e){if(!(e[te]&256)){let n=e[ht];n.destroyNode&&nh(t,e,n,3,null,null),RL(e)}}function rg(t,e){if(e[te]&256)return;let n=Ee(null);try{e[te]&=-129,e[te]|=256,e[is]&&_T(e[is]),PL(t,e),ML(t,e),e[_e].type===1&&e[ht].destroy();let r=e[Yd];if(r!==null&&Nr(e[At])){r!==e[At]&&YD(r,e);let i=e[ko];i!==null&&i.detachView(t)}dL(e)}finally{Ee(n)}}function ML(t,e){let n=t.cleanup,r=e[Dc];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Dc]=null);let i=e[hi];if(i!==null){e[hi]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function PL(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof as)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Qn(4,a,c);try{c.call(a)}finally{Qn(5,a,c)}}else{Qn(4,i,s);try{s.call(i)}finally{Qn(5,i,s)}}}}}function kL(t,e,n){return OL(t,e.parent,n)}function OL(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[xr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Jn.None||s===Jn.Emulated)return null}return In(r,n)}}function Ld(t,e,n,r,i){t.insertBefore(e,n,r,i)}function XD(t,e,n){t.appendChild(e,n)}function l0(t,e,n,r,i){r!==null?Ld(t,e,n,r,i):XD(t,e,n)}function FL(t,e,n,r){t.removeChild(e,n,r)}function by(t,e){return t.parentNode(e)}function LL(t,e){return t.nextSibling(e)}function VL(t,e,n){return jL(t,e,n)}function UL(t,e,n){return t.type&40?In(t,n):null}var jL=UL,d0;function Ty(t,e,n,r){let i=kL(t,r,e),s=e[ht],o=r.parent||e[Fn],a=VL(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)l0(s,i,n[c],a,!1);else l0(s,i,n,a,!1);d0!==void 0&&d0(s,r,e,n,i)}function Ed(t,e){if(e!==null){let n=e.type;if(n&3)return In(e,t);if(n&4)return Rg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ed(t,r);{let i=t[e.index];return Nr(i)?Rg(-1,i):Zn(i)}}else{if(n&32)return Cy(e,t)()||Zn(t[e.index]);{let r=ZD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Rc(t[Xn]);return Ed(i,r)}else return Ed(t,e.next)}}}return null}function ZD(t,e){if(e!==null){let r=t[Xn][Fn],i=e.projection;return r.projection[i]}return null}function Rg(t,e){let n=_n+t+1;if(n<e.length){let r=e[n],i=r[_e].firstChild;if(i!==null)return Ed(r,i)}return e[ss]}function BL(t,e,n){let r=by(t,e);r&&FL(t,r,e,n)}function Dy(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&cs(Zn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Dy(t,e,n.child,r,i,s,!1),So(e,t,i,a,s);else if(c&32){let l=Cy(n,r),d;for(;d=l();)So(e,t,i,d,s);So(e,t,i,a,s)}else c&16?$L(t,e,r,n,i,s):So(e,t,i,a,s);n=o?n.projectionNext:n.next}}function nh(t,e,n,r,i,s){Dy(n,r,t.firstChild,e,i,s,!1)}function $L(t,e,n,r,i,s){let o=n[Xn],c=o[Fn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];So(e,t,i,d,s)}else{let l=c,d=o[At];LD(r)&&(l.flags|=128),Dy(t,e,l,d,i,s,!0)}}function HL(t,e,n,r,i){let s=n[ss],o=Zn(n);s!==o&&So(e,t,r,s,i);for(let a=_n;a<n.length;a++){let c=n[a];nh(c[_e],c,t,e,r,s)}}function qL(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Ar.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ar.Important),t.setStyle(n,r,i,s))}}function zL(t,e,n){t.setAttribute(e,"style",n)}function eS(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function tS(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&mg(t,e,r),i!==null&&eS(t,e,i),s!==null&&zL(t,e,s)}var vi={};function qe(t=1){nS(Wt(),Ne(),Uo()+t,!1)}function nS(t,e,n,r){if(!r)if((e[te]&3)===3){let s=t.preOrderCheckHooks;s!==null&&wd(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Id(e,s,0,n)}os(n)}function q(t,e=de.Default){let n=Ne();if(n===null)return X(t,e);let r=Kt();return ND(r,n,Ft(t),e)}function rS(t,e,n,r,i,s){let o=Ee(null);try{let a=null;i&Ut.SignalBased&&(a=e[r][Tm]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Ut.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):oD(e,a,r,s)}finally{Ee(o)}}function GL(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)os(~i);else{let s=i,o=n[++r],a=n[++r];VF(o,s);let c=e[s];a(2,c)}}}finally{os(-1)}}function rh(t,e,n,r,i,s,o,a,c,l,d){let f=e.blueprint.slice();return f[xr]=i,f[te]=r|4|128|8|64,(l!==null||t&&t[te]&2048)&&(f[te]|=2048),hD(f),f[At]=f[Vo]=t,f[kn]=n,f[On]=o||t&&t[On],f[ht]=a||t&&t[ht],f[Po]=c||t&&t[Po]||null,f[Fn]=s,f[Jd]=uL(),f[Ad]=d,f[rD]=l,f[Xn]=e.type==2?t[Xn]:f,f}function ih(t,e,n,r,i){let s=t.data[e];if(s===null)s=WL(t,e,n,r,i),LF()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=MF();s.injectorIndex=o===null?-1:o.injectorIndex}return Fc(s,!0),s}function WL(t,e,n,r,i){let s=mD(),o=gD(),a=o?s:s&&s.parent,c=t.data[e]=XL(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function iS(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function sS(t,e,n,r,i){let s=Uo(),o=r&2;try{os(-1),o&&e.length>wn&&nS(t,e,wn,!1),Qn(o?2:0,i),n(r,i)}finally{os(s),Qn(o?3:1,i)}}function oS(t,e,n){if(sD(e)){let r=Ee(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{Ee(r)}}}function aS(t,e,n){pD()&&(iV(t,e,n,In(n,e)),(n.flags&64)===64&&fS(t,e,n))}function cS(t,e,n=In){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function uS(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Sy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Sy(t,e,n,r,i,s,o,a,c,l,d){let f=wn+r,m=f+i,y=KL(f,m),E=typeof l=="function"?l():l;return y[_e]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:d}}function KL(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:vi);return n}function QL(t,e,n,r){let s=r.get(yL,HD)||n===Jn.ShadowDom,o=t.selectRootElement(e,s);return YL(o),o}function YL(t){JL(t)}var JL=()=>null;function XL(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return RF()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function h0(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Ut.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?f0(r,n,l,a,c):f0(r,n,l,a)}return r}function f0(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function ZL(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=s[d],m=n?n.get(f):null,y=m?m.inputs:null,E=m?m.outputs:null;c=h0(0,f.inputs,d,c,y),l=h0(1,f.outputs,d,l,E);let x=c!==null&&o!==null&&!ty(e)?mV(c,d,o):null;a.push(x)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function eV(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function lS(t,e,n,r,i,s,o,a){let c=In(e,n),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(Ay(t,n,d,r,i),Xd(e)&&tV(n,e.index)):e.type&3?(r=eV(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function tV(t,e){let n=gi(e,t);n[te]&16||(n[te]|=64)}function dS(t,e,n,r){if(pD()){let i=r===null?null:{"":-1},s=oV(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&hS(t,e,n,o,i,a),i&&aV(n,r,i)}n.mergedAttrs=bc(n.mergedAttrs,n.attrs)}function hS(t,e,n,r,i,s){for(let l=0;l<r.length;l++)Cg(Od(n,e),t,r[l].type);uV(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=iS(t,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];n.mergedAttrs=bc(n.mergedAttrs,d.hostAttrs),lV(t,n,e,c,d),cV(c,d,i),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}ZL(t,n,s)}function nV(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;rV(o)!=a&&o.push(a),o.push(n,r,s)}}function rV(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function iV(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Xd(n)&&dV(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Od(n,e),cs(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=Oo(e,t,a,n);if(cs(l,e),o!==null&&pV(e,a-i,l,c,n,o),fi(c)){let d=gi(n.index,e);d[kn]=Oo(e,t,a,n)}}}function fS(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=UF();try{os(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Ig(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&sV(c,l)}}finally{os(-1),Ig(o)}}function sV(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function oV(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(G1(e,o.selectors,!1))if(r||(r=[]),fi(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;xg(t,e,c)}else r.unshift(o),xg(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function xg(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function aV(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new Q(-301,!1);r.push(e[i],s)}}}function cV(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;fi(e)&&(n[""]=t)}}function uV(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function lV(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=ns(i.type,!0)),o=new as(s,fi(i),q);t.blueprint[r]=o,n[r]=o,nV(t,e,r,iS(t,n,i.hostVars,vi),i)}function dV(t,e,n){let r=In(e,t),i=uS(n),s=t[On].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=sh(t,rh(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function hV(t,e,n,r,i,s){let o=In(t,e);fV(e[ht],o,s,t.value,n,r,i)}function fV(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Gd(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function pV(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],f=o[a++];rS(r,n,c,l,d,f)}}function mV(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function pS(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function mS(t,e){let n=t.contentQueries;if(n!==null){let r=Ee(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];yD(s),a.contentQueries(2,e[o],o)}}}finally{Ee(r)}}}function sh(t,e){return t[Sc]?t[n0][Pn]=e:t[Sc]=e,t[n0]=e,e}function Ng(t,e,n){yD(0);let r=Ee(null);try{e(t,n)}finally{Ee(r)}}function gV(t){return t[Dc]||(t[Dc]=[])}function yV(t){return t.cleanup||(t.cleanup=[])}function gS(t,e){let n=t[Po],r=n?n.get(Sr,null):null;r&&r.handleError(e)}function Ay(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],d=t.data[o];rS(d,l,r,a,c,i)}}function _V(t,e,n){let r=lD(e,t);DL(t[ht],r,n)}function vV(t,e){let n=gi(e,t),r=n[_e];wV(r,n);let i=n[xr];i!==null&&n[Ad]===null&&(n[Ad]=Iy(i,n[Po])),Ry(r,n,n[kn])}function wV(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Ry(t,e,n){ly(e);try{let r=t.viewQuery;r!==null&&Ng(1,r,n);let i=t.template;i!==null&&sS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ko]?.finishViewCreation(t),t.staticContentQueries&&mS(t,e),t.staticViewQueries&&Ng(2,t.viewQuery,n);let s=t.components;s!==null&&IV(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[te]&=-5,dy()}}function IV(t,e){for(let n=0;n<e.length;n++)vV(t,e[n])}function EV(t,e,n,r){let i=Ee(null);try{let s=e.tView,a=t[te]&4096?4096:16,c=rh(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Yd]=l;let d=t[ko];return d!==null&&(c[ko]=d.createEmbeddedView(s)),Ry(s,c,n),c}finally{Ee(i)}}function p0(t,e){return!e||e.firstChild===null||LD(t)}function CV(t,e,n,r=!0){let i=e[_e];if(xL(i,e,t,n),r){let o=Rg(n,t),a=e[ht],c=by(a,t[ss]);c!==null&&AL(i,t[Fn],a,e,c,o)}let s=e[Ad];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Vd(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(Zn(s)),Nr(s)&&bV(s,r);let o=n.type;if(o&8)Vd(t,e,n.child,r);else if(o&32){let a=Cy(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=ZD(e,n);if(Array.isArray(a))r.push(...a);else{let c=Rc(e[Xn]);Vd(c[_e],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function bV(t,e){for(let n=_n;n<t.length;n++){let r=t[n],i=r[_e].firstChild;i!==null&&Vd(r[_e],r,i,e)}t[ss]!==t[xr]&&e.push(t[ss])}var yS=[];function TV(t){return t[is]??DV(t)}function DV(t){let e=yS.pop()??Object.create(AV);return e.lView=t,e}function SV(t){t.lView[is]!==t&&(t.lView=null,yS.push(t))}var AV=ke(V({},mT),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ac(t.lView)},consumerOnSignalRead(){this.lView[is]=this}}),_S=100;function vS(t,e=!0,n=0){let r=t[On],i=r.rendererFactory,s=!1;s||i.begin?.();try{RV(t,n)}catch(o){throw e&&gS(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function RV(t,e){Mg(t,e);let n=0;for(;cy(t);){if(n===_S)throw new Q(103,!1);n++,Mg(t,1)}}function xV(t,e,n,r){let i=e[te];if((i&256)===256)return;let s=!1;!s&&e[On].inlineEffectRunner?.flush(),ly(e);let o=null,a=null;!s&&NV(t)&&(a=TV(e),o=gT(a));try{hD(e),OF(t.bindingStartIndex),n!==null&&sS(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let f=t.preOrderCheckHooks;f!==null&&wd(e,f,null)}else{let f=t.preOrderHooks;f!==null&&Id(e,f,0,null),Zm(e,0)}if(MV(e),wS(e,0),t.contentQueries!==null&&mS(t,e),!s)if(c){let f=t.contentCheckHooks;f!==null&&wd(e,f)}else{let f=t.contentHooks;f!==null&&Id(e,f,1),Zm(e,1)}GL(t,e);let l=t.components;l!==null&&ES(e,l,0);let d=t.viewQuery;if(d!==null&&Ng(2,d,r),!s)if(c){let f=t.viewCheckHooks;f!==null&&wd(e,f)}else{let f=t.viewHooks;f!==null&&Id(e,f,2),Zm(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Xm]){for(let f of e[Xm])f();e[Xm]=null}s||(e[te]&=-73)}catch(c){throw Ac(e),c}finally{a!==null&&(yT(a,o),SV(a)),dy()}}function NV(t){return t.type!==2}function wS(t,e){for(let n=UD(t);n!==null;n=jD(n))for(let r=_n;r<n.length;r++){let i=n[r];IS(i,e)}}function MV(t){for(let e=UD(t);e!==null;e=jD(e)){if(!(e[te]&iy.HasTransplantedViews))continue;let n=e[xd];for(let r=0;r<n.length;r++){let i=n[r],s=i[At];CF(i)}}}function PV(t,e,n){let r=gi(e,t);IS(r,n)}function IS(t,e){ay(t)&&Mg(t,e)}function Mg(t,e){let r=t[_e],i=t[te],s=t[is],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Dm(s)),s&&(s.dirty=!1),t[te]&=-9217,o)xV(r,t,r.template,t[kn]);else if(i&8192){wS(t,1);let a=r.components;a!==null&&ES(t,a,1)}}function ES(t,e,n){for(let r=0;r<e.length;r++)PV(t,e[r],n)}function xy(t){for(t[On].changeDetectionScheduler?.notify();t;){t[te]|=64;let e=Rc(t);if(pF(t)&&!e)return t;t=e}return null}var us=class{get rootNodes(){let e=this._lView,n=e[_e];return Vd(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[kn]}set context(e){this._lView[kn]=e}get destroyed(){return(this._lView[te]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[At];if(Nr(e)){let n=e[Rd],r=n?n.indexOf(this):-1;r>-1&&(Ag(e,r),Dd(n,r))}this._attachedToViewContainer=!1}JD(this._lView[_e],this._lView)}onDestroy(e){fD(this._lView,e)}markForCheck(){xy(this._cdRefInjectingView||this._lView)}detach(){this._lView[te]&=-129}reattach(){wg(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,vS(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,QD(this._lView[_e],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e,wg(this._lView)}},oh=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=FV;let t=e;return t})(),kV=oh,OV=class extends kV{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=EV(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new us(i)}};function FV(){return LV(Kt(),Ne())}function LV(t,e){return t.type&4?new OV(e,t,eh(t,e)):null}var hX=new RegExp(`^(\\d+)*(${mL}|${pL})*(.*)`);var VV=()=>null;function m0(t,e){return VV(t,e)}var Pg=class{},kg=class{},Ud=class{};function UV(t){let e=Error(`No component factory found for ${Vt(t)}.`);return e[jV]=t,e}var jV="ngComponent";var Og=class{resolveComponentFactory(e){throw UV(e)}},ah=(()=>{let e=class e{};e.NULL=new Og;let t=e;return t})(),xc=class{},ys=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>BV();let t=e;return t})();function BV(){let t=Ne(),e=Kt(),n=gi(e.index,t);return(es(n)?n:t)[ht]}var $V=(()=>{let e=class e{};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),ig={};var g0=new Set;function CS(t){g0.has(t)||(g0.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function y0(...t){}function HV(){let t=typeof Mn.requestAnimationFrame=="function",e=Mn[t?"requestAnimationFrame":"setTimeout"],n=Mn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var be=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Lt(!1),this.onMicrotaskEmpty=new Lt(!1),this.onStable=new Lt(!1),this.onError=new Lt(!1),typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=HV().nativeRequestAnimationFrame,GV(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Q(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,qV,y0,y0);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},qV={};function Ny(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function zV(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Mn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Fg(t),t.isCheckStableRunning=!0,Ny(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Fg(t))}function GV(t){let e=()=>{zV(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(WV(a))return n.invokeTask(i,s,o,a);try{return _0(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),v0(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return _0(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),v0(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Fg(t),Ny(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Fg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function _0(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function v0(t){t._nesting--,Ny(t)}function WV(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var bS=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Lg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=GT(i,a);else if(s==2){let c=a,l=e[++o];r=GT(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var jd=class extends ah{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=rs(e);return new Nc(n,this.ngModule)}};function w0(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function KV(t){let e=t.toLowerCase();return e==="svg"?_F:e==="math"?vF:null}var Vg=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Wd(r);let i=this.injector.get(e,ig,r);return i!==ig||n===ig?i:this.parentInjector.get(e,n,r)}},Nc=class extends Ud{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=w0(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return w0(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Y1(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=Ee(null);try{i=i||this.ngModule;let o=i instanceof vn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Vg(e,o):e,c=a.get(xc,null);if(c===null)throw new Q(407,!1);let l=a.get($V,null),d=a.get(bS,null),f=a.get(Pg,null),m={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},y=c.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",x=r?QL(y,r,this.componentDef.encapsulation,a):KD(y,E,KV(E)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let O=null;x!==null&&(O=Iy(x,a,!0));let H=Sy(0,null,null,1,0,null,null,null,null,null,null),B=rh(null,H,null,R,null,null,m,y,a,null,O);ly(B);let z,Re;try{let re=this.componentDef,b,_=null;re.findHostDirectiveDefs?(b=[],_=new Map,re.findHostDirectiveDefs(re,b,_),b.push(re)):b=[re];let w=QV(B,x),C=YV(w,x,re,b,B,m,y);Re=dD(H,wn),x&&ZV(y,re,x,r),n!==void 0&&eU(Re,this.ngContentSelectors,n),z=XV(C,re,b,_,B,[tU]),Ry(H,B,null)}finally{dy()}return new Ug(this.componentType,z,eh(Re,B),B,Re)}finally{Ee(s)}}},Ug=class extends kg{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new us(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Ay(s[_e],s,i,e,n),this.previousInputValues.set(e,n);let o=gi(this._tNode.index,s);xy(o)}}get injector(){return new ts(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function QV(t,e){let n=t[_e],r=wn;return t[r]=e,ih(n,r,2,"#host",null)}function YV(t,e,n,r,i,s,o){let a=i[_e];JV(r,t,e,o);let c=null;e!==null&&(c=Iy(e,i[Po]));let l=s.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=rh(i,uS(n),null,d,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&xg(a,t,r.length-1),sh(i,f),i[t.index]=f}function JV(t,e,n,r){for(let i of t)e.mergedAttrs=bc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Lg(e,e.mergedAttrs,!0),n!==null&&tS(r,n,e))}function XV(t,e,n,r,i,s){let o=Kt(),a=i[_e],c=In(o,i);hS(a,i,o,n,null,r);for(let d=0;d<n.length;d++){let f=o.directiveStart+d,m=Oo(i,a,f,o);cs(m,i)}fS(a,i,o),c&&cs(c,i);let l=Oo(i,a,o.directiveStart+o.componentOffset,o);if(t[kn]=i[kn]=l,s!==null)for(let d of s)d(l,e);return oS(a,o,i),l}function ZV(t,e,n,r){if(r)mg(t,n,["ng-version","17.3.9"]);else{let{attrs:i,classes:s}=J1(e.selectors[0]);i&&mg(t,n,i),s&&s.length>0&&eS(t,n,s.join(" "))}}function eU(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function tU(){let t=Kt();my(Ne()[_e],t)}var Bo=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=nU;let t=e;return t})();function nU(){let t=Kt();return iU(t,Ne())}var rU=Bo,TS=class extends rU{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return eh(this._hostTNode,this._hostLView)}get injector(){return new ts(this._hostTNode,this._hostLView)}get parentInjector(){let e=gy(this._hostTNode,this._hostLView);if(TD(e)){let n=Pd(e,this._hostLView),r=Md(e),i=n[_e].data[r+8];return new ts(i,n)}else return new ts(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=I0(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-_n}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=m0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,p0(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!fF(e),a;if(o)a=n;else{let E=n||{};a=E.index,r=E.injector,i=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef}let c=o?e:new Nc(rs(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let x=(o?l:this.parentInjector).get(vn,null);x&&(s=x)}let d=rs(c.componentType??{}),f=m0(this._lContainer,d?.id??null),m=f?.firstChild??null,y=c.create(l,i,m,s);return this.insertImpl(y.hostView,a,p0(this._hostTNode,f)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(EF(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[At],l=new TS(c,c[Fn],c[At]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return CV(o,i,s,r),e.attachToViewContainerRef(),B0(sg(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=I0(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ag(this._lContainer,n);r&&(Dd(sg(this._lContainer),n),JD(r[_e],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ag(this._lContainer,n);return r&&Dd(sg(this._lContainer),n)!=null?new us(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function I0(t){return t[Rd]}function sg(t){return t[Rd]||(t[Rd]=[])}function iU(t,e){let n,r=e[t.index];return Nr(r)?n=r:(n=pS(r,e,null,t),e[t.index]=n,sh(e,n)),oU(n,e,t,r),new TS(n,t,e)}function sU(t,e){let n=t[ht],r=n.createComment(""),i=In(e,t),s=by(n,i);return Ld(n,s,r,LL(n,i),!1),r}var oU=uU,aU=()=>!1;function cU(t,e,n){return aU(t,e,n)}function uU(t,e,n,r){if(t[ss])return;let i;n.type&8?i=Zn(r):i=sU(e,n),t[ss]=i}function lU(t){return typeof t=="function"&&t[Tm]!==void 0}function DS(t){return lU(t)&&typeof t.set=="function"}function dU(t){return Object.getPrototypeOf(t.prototype).constructor}function _s(t){let e=dU(t.type),n=!0,r=[t];for(;e;){let i;if(fi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Q(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=yd(t.inputs),o.inputTransforms=yd(t.inputTransforms),o.declaredInputs=yd(t.declaredInputs),o.outputs=yd(t.outputs);let a=i.hostBindings;a&&gU(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&pU(t,c),l&&mU(t,l),hU(t,i),_1(t.outputs,i.outputs),fi(i)&&i.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===_s&&(n=!1)}}e=Object.getPrototypeOf(e)}fU(r)}function hU(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function fU(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=bc(i.hostAttrs,n=bc(n,i.hostAttrs))}}function yd(t){return t===xo?{}:t===yn?[]:t}function pU(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function mU(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function gU(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function My(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var pi=class{},Mc=class{};var jg=class extends pi{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new jd(this);let i=Y0(e);this._bootstrapComponents=WD(i.bootstrap),this._r3Injector=kD(e,n,[{provide:pi,useValue:this},{provide:ah,useValue:this.componentFactoryResolver},...r],Vt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Bg=class extends Mc{constructor(e){super(),this.moduleType=e}create(e){return new jg(this.moduleType,e,[])}};var Bd=class extends pi{constructor(e){super(),this.componentFactoryResolver=new jd(this),this.instance=null;let n=new Tc([...e.providers,{provide:pi,useValue:this},{provide:ah,useValue:this.componentFactoryResolver}],e.parent||ry(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Py(t,e,n=null){return new Bd({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var ch=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ut(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function SS(t){return _U(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function yU(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function _U(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function ky(t,e,n){return t[e]=n}function vU(t,e){return t[e]}function mi(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function wU(t,e,n,r){let i=mi(t,e,n);return mi(t,e+1,r)||i}function IU(t){return(t.flags&32)===32}function EU(t,e,n,r,i,s,o,a,c){let l=e.consts,d=ih(e,t,4,o||null,Nd(l,a));dS(e,n,d,Nd(l,c)),my(e,d);let f=d.tView=Sy(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function $o(t,e,n,r,i,s,o,a){let c=Ne(),l=Wt(),d=t+wn,f=l.firstCreatePass?EU(d,l,c,e,n,r,i,s,o):l.data[d];Fc(f,!1);let m=CU(l,c,f,t);fy()&&Ty(l,c,m,f),cs(m,c);let y=pS(m,c,m,f);return c[d]=y,sh(c,y),cU(y,f,c),sy(f)&&aS(l,c,f),o!=null&&cS(c,f,a),$o}var CU=bU;function bU(t,e,n,r){return py(!0),e[ht].createComment("")}function uh(t,e,n,r){let i=Ne(),s=Zd();if(mi(i,s,e)){let o=Wt(),a=hy();hV(a,i,t,e,n,r)}return uh}function TU(t,e,n,r){return mi(t,Zd(),n)?e+Gd(n)+r:vi}function _d(t,e){return t<<17|e<<2}function ls(t){return t>>17&32767}function DU(t){return(t&2)==2}function SU(t,e){return t&131071|e<<17}function $g(t){return t|2}function Fo(t){return(t&131068)>>2}function og(t,e){return t&-131069|e<<2}function AU(t){return(t&1)===1}function Hg(t){return t|1}function RU(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ls(o),c=Fo(o);t[r]=n;let l=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||Oc(f,d)>0)&&(l=!0)}else d=n;if(i)if(c!==0){let m=ls(t[a+1]);t[r+1]=_d(m,a),m!==0&&(t[m+1]=og(t[m+1],r)),t[a+1]=SU(t[a+1],r)}else t[r+1]=_d(a,0),a!==0&&(t[a+1]=og(t[a+1],r)),a=r;else t[r+1]=_d(c,0),a===0?a=r:t[c+1]=og(t[c+1],r),c=r;l&&(t[r+1]=$g(t[r+1])),E0(t,d,r,!0),E0(t,d,r,!1),xU(e,d,t,r,s),o=_d(a,c),s?e.classBindings=o:e.styleBindings=o}function xU(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Oc(s,e)>=0&&(n[r+1]=Hg(n[r+1]))}function E0(t,e,n,r){let i=t[n+1],s=e===null,o=r?ls(i):Fo(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];NU(c,e)&&(a=!0,t[o+1]=r?Hg(l):$g(l)),o=r?ls(l):Fo(l)}a&&(t[n+1]=r?$g(i):Hg(i))}function NU(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Oc(t,e)>=0:!1}function cn(t,e,n){let r=Ne(),i=Zd();if(mi(r,i,e)){let s=Wt(),o=hy();lS(s,o,r,t,e,r[ht],n,!1)}return cn}function C0(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Ay(t,n,s[o],o,r)}function Oy(t,e){return MU(t,e,null,!0),Oy}function MU(t,e,n,r){let i=Ne(),s=Wt(),o=FF(2);if(s.firstUpdatePass&&kU(s,t,o,r),e!==vi&&mi(i,o,e)){let a=s.data[Uo()];UU(s,a,i,i[ht],t,i[o+1]=jU(e,n),r,o)}}function PU(t,e){return e>=t.expandoStartIndex}function kU(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Uo()],o=PU(t,n);BU(s,r)&&e===null&&!o&&(e=!1),e=OU(i,s,e,r),RU(i,s,e,n,o,r)}}function OU(t,e,n,r){let i=jF(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=ag(null,t,e,n,r),n=Pc(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=ag(i,t,e,n,r),s===null){let c=FU(t,e,r);c!==void 0&&Array.isArray(c)&&(c=ag(null,t,e,c[1],r),c=Pc(c,e.attrs,r),LU(t,e,r,c))}else s=VU(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function FU(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Fo(r)!==0)return t[ls(r)]}function LU(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[ls(i)]=r}function VU(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Pc(r,o,n)}return Pc(r,e.attrs,n)}function ag(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Pc(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Pc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),V1(t,o,n?!0:e[++s]))}return t===void 0?null:t}function UU(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],d=AU(l)?b0(c,e,n,i,Fo(l),o):void 0;if(!$d(d)){$d(s)||DU(l)&&(s=b0(c,null,n,i,a,o));let f=lD(Uo(),n);qL(r,o,f,i,s)}}function b0(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,m=n[i+1];m===vi&&(m=f?yn:void 0);let y=f?Ym(m,r):d===r?m:void 0;if(l&&!$d(y)&&(y=Ym(c,r)),$d(y)&&(a=y,o))return a;let E=t[i+1];i=o?ls(E):Fo(E)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Ym(c,r))}return a}function $d(t){return t!==void 0}function jU(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Vt(Lc(t)))),t}function BU(t,e){return(t.flags&(e?8:16))!==0}function $U(t,e,n,r,i,s){let o=e.consts,a=Nd(o,i),c=ih(e,t,2,r,a);return dS(e,n,c,Nd(o,s)),c.attrs!==null&&Lg(c,c.attrs,!1),c.mergedAttrs!==null&&Lg(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function L(t,e,n,r){let i=Ne(),s=Wt(),o=wn+t,a=i[ht],c=s.firstCreatePass?$U(o,s,i,e,n,r):s.data[o],l=HU(s,i,c,a,e,t);i[o]=l;let d=sy(c);return Fc(c,!0),tS(a,l,c),!IU(c)&&fy()&&Ty(s,i,l,c),DF()===0&&cs(l,i),SF(),d&&(aS(s,i,c),oS(s,c,i)),r!==null&&cS(i,c),L}function k(){let t=Kt();gD()?PF():(t=t.parent,Fc(t,!1));let e=t;xF(e)&&NF(),AF();let n=Wt();return n.firstCreatePass&&(my(n,t),sD(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&WF(e)&&C0(n,e,Ne(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&KF(e)&&C0(n,e,Ne(),e.stylesWithoutHost,!1),k}function we(t,e,n,r){return L(t,e,n,r),k(),we}var HU=(t,e,n,r,i,s)=>(py(!0),KD(r,i,HF()));function Ho(){return Ne()}var Zi=void 0;function qU(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var zU=["en",[["a","p"],["AM","PM"],Zi],[["AM","PM"],Zi,Zi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zi,"{1} 'at' {0}",Zi],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",qU],cg={};function Qt(t){let e=GU(t),n=T0(e);if(n)return n;let r=e.split("-")[0];if(n=T0(r),n)return n;if(r==="en")return zU;throw new Q(701,!1)}function T0(t){return t in cg||(cg[t]=Mn.ng&&Mn.ng.common&&Mn.ng.common.locales&&Mn.ng.common.locales[t]),cg[t]}var Ke=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Ke||{});function GU(t){return t.toLowerCase().replace(/_/g,"-")}var Hd="en-US",WU="USD";var KU=Hd;function QU(t){typeof t=="string"&&(KU=t.toLowerCase().replace(/_/g,"-"))}function Oe(t,e,n,r){let i=Ne(),s=Wt(),o=Kt();return AS(s,i,i[ht],o,t,e,r),Oe}function YU(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Dc],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function AS(t,e,n,r,i,s,o){let a=sy(r),l=t.firstCreatePass&&yV(t),d=e[kn],f=gV(e),m=!0;if(r.type&3||o){let x=In(r,e),R=o?o(x):x,O=f.length,H=o?z=>o(Zn(z[r.index])):r.index,B=null;if(!o&&a&&(B=YU(t,e,i,r.index)),B!==null){let z=B.__ngLastListenerFn__||B;z.__ngNextListenerFn__=s,B.__ngLastListenerFn__=s,m=!1}else{s=S0(r,e,d,s,!1);let z=n.listen(R,i,s);f.push(s,z),l&&l.push(i,H,O,O+1)}}else s=S0(r,e,d,s,!1);let y=r.outputs,E;if(m&&y!==null&&(E=y[i])){let x=E.length;if(x)for(let R=0;R<x;R+=2){let O=E[R],H=E[R+1],Re=e[O][H].subscribe(s),re=f.length;f.push(s,Re),l&&l.push(i,r.index,re,-(re+1))}}}function D0(t,e,n,r){let i=Ee(null);try{return Qn(6,e,n),n(r)!==!1}catch(s){return gS(t,s),!1}finally{Qn(7,e,n),Ee(i)}}function S0(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?gi(t.index,e):e;xy(a);let c=D0(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)c=D0(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function lh(t=1){return $F(t)}function JU(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Mr(t){let e=kF();return oy(e,wn+t)}function j(t,e=""){let n=Ne(),r=Wt(),i=t+wn,s=r.firstCreatePass?ih(r,i,1,e,null):r.data[i],o=XU(r,n,s,e,t);n[i]=o,fy()&&Ty(r,n,o,s),Fc(s,!1)}var XU=(t,e,n,r,i)=>(py(!0),TL(e[ht],r));function wi(t){return Ii("",t,""),wi}function Ii(t,e,n){let r=Ne(),i=TU(r,t,e,n);return i!==vi&&_V(r,Uo(),i),Ii}function vs(t,e,n){DS(e)&&(e=e());let r=Ne(),i=Zd();if(mi(r,i,e)){let s=Wt(),o=hy();lS(s,o,r,t,e,r[ht],n,!1)}return vs}function qo(t,e){let n=DS(t);return n&&t.set(e),n}function ws(t,e){let n=Ne(),r=Wt(),i=Kt();return AS(r,n,n[ht],i,t,e),ws}function ZU(t,e,n){let r=Wt();if(r.firstCreatePass){let i=fi(t);qg(n,r.data,r.blueprint,i,!0),qg(e,r.data,r.blueprint,i,!1)}}function qg(t,e,n,r,i){if(t=Ft(t),Array.isArray(t))for(let s=0;s<t.length;s++)qg(t[s],e,n,r,i);else{let s=Wt(),o=Ne(),a=Kt(),c=Mo(t)?t:Ft(t.provide),l=nD(t),d=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(Mo(t)||!t.multi){let y=new as(l,i,q),E=lg(c,e,i?d:d+m,f);E===-1?(Cg(Od(a,o),s,c),ug(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[E]=y,o[E]=y)}else{let y=lg(c,e,d+m,f),E=lg(c,e,d,d+m),x=y>=0&&n[y],R=E>=0&&n[E];if(i&&!R||!i&&!x){Cg(Od(a,o),s,c);let O=n2(i?t2:e2,n.length,i,r,l);!i&&R&&(n[E].providerFactory=O),ug(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(O),o.push(O)}else{let O=RS(n[i?E:y],l,!i&&r);ug(s,t,y>-1?y:E,O)}!i&&r&&R&&n[E].componentProviders++}}}function ug(t,e,n,r){let i=Mo(e),s=sF(e);if(i||s){let c=(s?Ft(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(n);d===-1?l.push(n,[r,c]):l[d+1].push(r,c)}else l.push(n,c)}}}function RS(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function lg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function e2(t,e,n,r){return zg(this.multi,[])}function t2(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Oo(n,n[_e],this.providerFactory.index,r);s=a.slice(0,o),zg(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],zg(i,s);return s}function zg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function n2(t,e,n,r,i){let s=new as(t,n,q);return s.multi=[],s.index=e,s.componentProviders=0,RS(s,i,r&&!n),s}function dh(t,e=[]){return n=>{n.providersResolver=(r,i)=>ZU(r,i?i(t):t,e)}}var r2=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Z0(!1,r.type),s=i.length>0?Py([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=W({token:e,providedIn:"environment",factory:()=>new e(X(vn))});let t=e;return t})();function Ge(t){CS("NgStandalone"),t.getStandaloneInjector=e=>e.get(r2).getOrCreateStandaloneInjector(t)}function Is(t,e,n){let r=uy()+t,i=Ne();return i[r]===vi?ky(i,r,n?e.call(n):e()):vU(i,r)}function xS(t,e){let n=t[e];return n===vi?void 0:n}function i2(t,e,n,r,i,s){let o=e+n;return mi(t,o,i)?ky(t,o+1,s?r.call(s,i):r(i)):xS(t,o+1)}function s2(t,e,n,r,i,s,o){let a=e+n;return wU(t,a,i,s)?ky(t,a+2,o?r.call(o,i,s):r(i,s)):xS(t,a+2)}function jt(t,e){let n=Wt(),r,i=t+wn;n.firstCreatePass?(r=o2(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=ns(r.type,!0)),o,a=zt(q);try{let c=kd(!1),l=s();return kd(c),JU(n,Ne(),i,l),l}finally{zt(a)}}function o2(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Yt(t,e,n){let r=t+wn,i=Ne(),s=oy(i,r);return MS(i,r)?i2(i,uy(),e,s.transform,n,s):s.transform(n)}function NS(t,e,n,r){let i=t+wn,s=Ne(),o=oy(s,i);return MS(s,i)?s2(s,uy(),e,o.transform,n,r,o):o.transform(n,r)}function MS(t,e){return t[_e].data[e].pure}var Rr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},PS=new Rr("17.3.9"),hh=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var kS=new G("");function Ei(t){return!!t&&typeof t.then=="function"}function Fy(t){return!!t&&typeof t.subscribe=="function"}var OS=new G(""),FS=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=U(OS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Ei(o))r.push(o);else if(Fy(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ly=new G("");function a2(){vT(()=>{throw new Q(600,!1)})}function c2(t){return t.isBoundToModule}function u2(t,e,n){try{let r=n();return Ei(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Vc=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=U(OD),this.afterRenderEffectManager=U(bS),this.externalTestViews=new Set,this.beforeRender=new St,this.afterTick=new St,this.componentTypes=[],this.components=[],this.isStable=U(ch).hasPendingTasks.pipe(se(r=>!r)),this._injector=U(vn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Ud;if(!this._injector.get(FS).done){let y=!s&&Q0(r),E=!1;throw new Q(405,E)}let a;s?a=r:a=this._injector.get(ah).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=c2(a)?void 0:this._injector.get(pi),l=i||a.selector,d=a.create(Rt.NULL,[],l,c),f=d.location.nativeElement,m=d.injector.get(kS,null);return m?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),dg(this.components,d),m?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new Q(101,!1);let i=Ee(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,Ee(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===_S)throw new Q(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)l2(a,o,c)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Gg(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Gg(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;dg(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Ly,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>dg(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Q(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function dg(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function l2(t,e,n){!e&&!Gg(t)||d2(t,n,e)}function Gg(t){return cy(t)}function d2(t,e,n){let r;n?(r=0,t[te]|=1024):t[te]&64?r=0:r=1,vS(t,e,r)}var Wg=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Vy=(()=>{let e=class e{compileModuleSync(r){return new Bg(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=Y0(r),o=WD(s.declarations).reduce((a,c)=>{let l=rs(c);return l&&a.push(new Nc(l)),a},[]);return new Wg(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var h2=(()=>{let e=class e{constructor(){this.zone=U(be),this.applicationRef=U(Vc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function f2(t){return[{provide:be,useFactory:t},{provide:No,multi:!0,useFactory:()=>{let e=U(h2,{optional:!0});return()=>e.initialize()}},{provide:No,multi:!0,useFactory:()=>{let e=U(y2);return()=>{e.initialize()}}},{provide:OD,useFactory:p2}]}function p2(){let t=U(be),e=U(Sr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function m2(t){let e=f2(()=>new be(g2(t)));return Gt([[],e])}function g2(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var y2=(()=>{let e=class e{constructor(){this.subscription=new nt,this.initialized=!1,this.zone=U(be),this.pendingTasks=U(ch)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{be.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{be.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _2(){return typeof $localize<"u"&&$localize.locale||Hd}var Uc=new G("",{providedIn:"root",factory:()=>U(Uc,de.Optional|de.SkipSelf)||_2()}),LS=new G("",{providedIn:"root",factory:()=>WU});var VS=new G("");var Cd=null;function v2(t=[],e){return Rt.create({name:e,providers:[{provide:Qd,useValue:"platform"},{provide:VS,useValue:new Set([()=>Cd=null])},...t]})}function w2(t=[]){if(Cd)return Cd;let e=v2(t);return Cd=e,a2(),I2(e),e}function I2(t){t.get(vy,null)?.forEach(n=>n())}var Ci=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=E2;let t=e;return t})();function E2(t){return C2(Kt(),Ne(),(t&16)===16)}function C2(t,e,n){if(Xd(t)&&!n){let r=gi(t.index,e);return new us(r,r)}else if(t.type&47){let r=e[Xn];return new us(r,e)}return null}var Kg=class{constructor(){}supports(e){return SS(e)}create(e){return new Qg(e)}},b2=(t,e)=>e,Qg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||b2}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<A0(r,i,s)?n:r,a=A0(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,d=c-i;if(l!=d){for(let m=0;m<l;m++){let y=m<s.length?s[m]:s[m]=0,E=y+m;d<=E&&E<l&&(s[m]=y+1)}let f=o.previousIndex;s[f]=d-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!SS(e))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,yU(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Yg(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new qd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new qd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Yg=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Jg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},qd=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Jg,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function A0(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function R0(){return new Uy([new Kg])}var Uy=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||R0()),deps:[[e,new j0,new He]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new Q(901,!1)}};e.\u0275prov=W({token:e,providedIn:"root",factory:R0});let t=e;return t})();function US(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=w2(r),s=[m2(),...n||[]],a=new Bd({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(be);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(Sr,null),d;c.runOutsideAngular(()=>{d=c.onError.subscribe({next:y=>{l.handleError(y)}})});let f=()=>a.destroy(),m=i.get(VS);return m.add(f),a.onDestroy(()=>{d.unsubscribe(),m.delete(f)}),u2(l,c,()=>{let y=a.get(FS);return y.runInitializers(),y.donePromise.then(()=>{let E=a.get(Uc,Hd);QU(E||Hd);let x=a.get(Vc);return e!==void 0&&x.bootstrap(e),x})})})}catch(e){return Promise.reject(e)}}function Es(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function jy(t){let e=Ee(null);try{return t()}finally{Ee(e)}}var WS=null;function Fr(){return WS}function KS(t){WS??=t}var Ih=class{};var Cn=new G(""),QS=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>U(T2),providedIn:"platform"});let t=e;return t})();var T2=(()=>{let e=class e extends QS{constructor(){super(),this._doc=U(Cn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fr().getBaseHref(this._doc)}onPopState(r){let i=Fr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Fr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function YS(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function jS(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Cs(t){return t&&t[0]!=="?"?"?"+t:t}var zo=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>U(JS),providedIn:"root"});let t=e;return t})(),D2=new G(""),JS=(()=>{let e=class e extends zo{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??U(Cn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return YS(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Cs(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Cs(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Cs(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(X(QS),X(D2,8))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Bc=(()=>{let e=class e{constructor(r){this._subject=new Lt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=R2(jS(BS(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Cs(i))}normalize(r){return e.stripTrailingSlash(A2(this._basePath,BS(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Cs(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Cs(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Cs,e.joinWithSlash=YS,e.stripTrailingSlash=jS,e.\u0275fac=function(i){return new(i||e)(X(zo))},e.\u0275prov=W({token:e,factory:()=>S2(),providedIn:"root"});let t=e;return t})();function S2(){return new Bc(X(zo))}function A2(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function BS(t){return t.replace(/\/index.html$/,"")}function R2(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var XS={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},ZS=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(ZS||{});var Bt=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Bt||{}),Ve=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Ve||{}),un=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(un||{}),ln={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function x2(t){return Qt(t)[Ke.LocaleId]}function N2(t,e,n){let r=Qt(t),i=[r[Ke.DayPeriodsFormat],r[Ke.DayPeriodsStandalone]],s=En(i,e);return En(s,n)}function M2(t,e,n){let r=Qt(t),i=[r[Ke.DaysFormat],r[Ke.DaysStandalone]],s=En(i,e);return En(s,n)}function P2(t,e,n){let r=Qt(t),i=[r[Ke.MonthsFormat],r[Ke.MonthsStandalone]],s=En(i,e);return En(s,n)}function k2(t,e){let r=Qt(t)[Ke.Eras];return En(r,e)}function fh(t,e){let n=Qt(t);return En(n[Ke.DateFormat],e)}function ph(t,e){let n=Qt(t);return En(n[Ke.TimeFormat],e)}function mh(t,e){let r=Qt(t)[Ke.DateTimeFormat];return En(r,e)}function kr(t,e){let n=Qt(t),r=n[Ke.NumberSymbols][e];if(typeof r>"u"){if(e===ln.CurrencyDecimal)return n[Ke.NumberSymbols][ln.Decimal];if(e===ln.CurrencyGroup)return n[Ke.NumberSymbols][ln.Group]}return r}function O2(t,e){return Qt(t)[Ke.NumberFormats][e]}function F2(t){return Qt(t)[Ke.Currencies]}function eA(t){if(!t[Ke.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Ke.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function L2(t){let e=Qt(t);return eA(e),(e[Ke.ExtraData][2]||[]).map(r=>typeof r=="string"?By(r):[By(r[0]),By(r[1])])}function V2(t,e,n){let r=Qt(t);eA(r);let i=[r[Ke.ExtraData][0],r[Ke.ExtraData][1]],s=En(i,e)||[];return En(s,n)||[]}function En(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function By(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}function U2(t,e,n="en"){let r=F2(n)[t]||XS[t]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||t}var j2=2;function B2(t){let e,n=XS[t];return n&&(e=n[2]),typeof e=="number"?e:j2}var $2=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,gh={},H2=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Or=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(Or||{}),De=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(De||{}),Te=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(Te||{});function q2(t,e,n,r){let i=Z2(t);e=Pr(n,e)||e;let o=[],a;for(;e;)if(a=H2.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=nA(r,c),i=X2(i,r,!0));let l="";return o.forEach(d=>{let f=Y2(d);l+=f?f(i,n,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Eh(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Pr(t,e){let n=x2(t);if(gh[n]??={},gh[n][e])return gh[n][e];let r="";switch(e){case"shortDate":r=fh(t,un.Short);break;case"mediumDate":r=fh(t,un.Medium);break;case"longDate":r=fh(t,un.Long);break;case"fullDate":r=fh(t,un.Full);break;case"shortTime":r=ph(t,un.Short);break;case"mediumTime":r=ph(t,un.Medium);break;case"longTime":r=ph(t,un.Long);break;case"fullTime":r=ph(t,un.Full);break;case"short":let i=Pr(t,"shortTime"),s=Pr(t,"shortDate");r=yh(mh(t,un.Short),[i,s]);break;case"medium":let o=Pr(t,"mediumTime"),a=Pr(t,"mediumDate");r=yh(mh(t,un.Medium),[o,a]);break;case"long":let c=Pr(t,"longTime"),l=Pr(t,"longDate");r=yh(mh(t,un.Long),[c,l]);break;case"full":let d=Pr(t,"fullTime"),f=Pr(t,"fullDate");r=yh(mh(t,un.Full),[d,f]);break}return r&&(gh[n][e]=r),r}function yh(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function Ln(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function z2(t,e){return Ln(t,3).substring(0,e)}function st(t,e,n=0,r=!1,i=!1){return function(s,o){let a=G2(t,s);if((n>0||a>-n)&&(a+=n),t===De.Hours)a===0&&n===-12&&(a=12);else if(t===De.FractionalSeconds)return z2(a,e);let c=kr(o,ln.MinusSign);return Ln(a,e,c,r,i)}}function G2(t,e){switch(t){case De.FullYear:return e.getFullYear();case De.Month:return e.getMonth();case De.Date:return e.getDate();case De.Hours:return e.getHours();case De.Minutes:return e.getMinutes();case De.Seconds:return e.getSeconds();case De.FractionalSeconds:return e.getMilliseconds();case De.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function Ue(t,e,n=Bt.Format,r=!1){return function(i,s){return W2(i,s,t,e,n,r)}}function W2(t,e,n,r,i,s){switch(n){case Te.Months:return P2(e,i,r)[t.getMonth()];case Te.Days:return M2(e,i,r)[t.getDay()];case Te.DayPeriods:let o=t.getHours(),a=t.getMinutes();if(s){let l=L2(e),d=V2(e,i,r),f=l.findIndex(m=>{if(Array.isArray(m)){let[y,E]=m,x=o>=y.hours&&a>=y.minutes,R=o<E.hours||o===E.hours&&a<E.minutes;if(y.hours<E.hours){if(x&&R)return!0}else if(x||R)return!0}else if(m.hours===o&&m.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return N2(e,i,r)[o<12?0:1];case Te.Eras:return k2(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function _h(t){return function(e,n,r){let i=-1*r,s=kr(n,ln.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case Or.Short:return(i>=0?"+":"")+Ln(o,2,s)+Ln(Math.abs(i%60),2,s);case Or.ShortGMT:return"GMT"+(i>=0?"+":"")+Ln(o,1,s);case Or.Long:return"GMT"+(i>=0?"+":"")+Ln(o,2,s)+":"+Ln(Math.abs(i%60),2,s);case Or.Extended:return r===0?"Z":(i>=0?"+":"")+Ln(o,2,s)+":"+Ln(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}var K2=0,wh=4;function Q2(t){let e=Eh(t,K2,1).getDay();return Eh(t,0,1+(e<=wh?wh:wh+7)-e)}function tA(t){let e=t.getDay(),n=e===0?-3:wh-e;return Eh(t.getFullYear(),t.getMonth(),t.getDate()+n)}function $y(t,e=!1){return function(n,r){let i;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{let s=tA(n),o=Q2(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Ln(i,t,kr(r,ln.MinusSign))}}function vh(t,e=!1){return function(n,r){let s=tA(n).getFullYear();return Ln(s,t,kr(r,ln.MinusSign),e)}}var Hy={};function Y2(t){if(Hy[t])return Hy[t];let e;switch(t){case"G":case"GG":case"GGG":e=Ue(Te.Eras,Ve.Abbreviated);break;case"GGGG":e=Ue(Te.Eras,Ve.Wide);break;case"GGGGG":e=Ue(Te.Eras,Ve.Narrow);break;case"y":e=st(De.FullYear,1,0,!1,!0);break;case"yy":e=st(De.FullYear,2,0,!0,!0);break;case"yyy":e=st(De.FullYear,3,0,!1,!0);break;case"yyyy":e=st(De.FullYear,4,0,!1,!0);break;case"Y":e=vh(1);break;case"YY":e=vh(2,!0);break;case"YYY":e=vh(3);break;case"YYYY":e=vh(4);break;case"M":case"L":e=st(De.Month,1,1);break;case"MM":case"LL":e=st(De.Month,2,1);break;case"MMM":e=Ue(Te.Months,Ve.Abbreviated);break;case"MMMM":e=Ue(Te.Months,Ve.Wide);break;case"MMMMM":e=Ue(Te.Months,Ve.Narrow);break;case"LLL":e=Ue(Te.Months,Ve.Abbreviated,Bt.Standalone);break;case"LLLL":e=Ue(Te.Months,Ve.Wide,Bt.Standalone);break;case"LLLLL":e=Ue(Te.Months,Ve.Narrow,Bt.Standalone);break;case"w":e=$y(1);break;case"ww":e=$y(2);break;case"W":e=$y(1,!0);break;case"d":e=st(De.Date,1);break;case"dd":e=st(De.Date,2);break;case"c":case"cc":e=st(De.Day,1);break;case"ccc":e=Ue(Te.Days,Ve.Abbreviated,Bt.Standalone);break;case"cccc":e=Ue(Te.Days,Ve.Wide,Bt.Standalone);break;case"ccccc":e=Ue(Te.Days,Ve.Narrow,Bt.Standalone);break;case"cccccc":e=Ue(Te.Days,Ve.Short,Bt.Standalone);break;case"E":case"EE":case"EEE":e=Ue(Te.Days,Ve.Abbreviated);break;case"EEEE":e=Ue(Te.Days,Ve.Wide);break;case"EEEEE":e=Ue(Te.Days,Ve.Narrow);break;case"EEEEEE":e=Ue(Te.Days,Ve.Short);break;case"a":case"aa":case"aaa":e=Ue(Te.DayPeriods,Ve.Abbreviated);break;case"aaaa":e=Ue(Te.DayPeriods,Ve.Wide);break;case"aaaaa":e=Ue(Te.DayPeriods,Ve.Narrow);break;case"b":case"bb":case"bbb":e=Ue(Te.DayPeriods,Ve.Abbreviated,Bt.Standalone,!0);break;case"bbbb":e=Ue(Te.DayPeriods,Ve.Wide,Bt.Standalone,!0);break;case"bbbbb":e=Ue(Te.DayPeriods,Ve.Narrow,Bt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ue(Te.DayPeriods,Ve.Abbreviated,Bt.Format,!0);break;case"BBBB":e=Ue(Te.DayPeriods,Ve.Wide,Bt.Format,!0);break;case"BBBBB":e=Ue(Te.DayPeriods,Ve.Narrow,Bt.Format,!0);break;case"h":e=st(De.Hours,1,-12);break;case"hh":e=st(De.Hours,2,-12);break;case"H":e=st(De.Hours,1);break;case"HH":e=st(De.Hours,2);break;case"m":e=st(De.Minutes,1);break;case"mm":e=st(De.Minutes,2);break;case"s":e=st(De.Seconds,1);break;case"ss":e=st(De.Seconds,2);break;case"S":e=st(De.FractionalSeconds,1);break;case"SS":e=st(De.FractionalSeconds,2);break;case"SSS":e=st(De.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=_h(Or.Short);break;case"ZZZZZ":e=_h(Or.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=_h(Or.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=_h(Or.Long);break;default:return null}return Hy[t]=e,e}function nA(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function J2(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function X2(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),s=nA(e,i);return J2(t,r*(s-i))}function Z2(t){if($S(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,s=1,o=1]=t.split("-").map(a=>+a);return Eh(i,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match($2))return ej(r)}let e=new Date(t);if(!$S(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function ej(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,a,c,l),e}function $S(t){return t instanceof Date&&!isNaN(t.valueOf())}var tj=/^(\d+)?\.((\d+)(-(\d+))?)?$/,HS=22,Ch=".",jc="0",nj=";",rj=",",qy="#",qS="\xA4";function ij(t,e,n,r,i,s,o=!1){let a="",c=!1;if(!isFinite(t))a=kr(n,ln.Infinity);else{let l=cj(t);o&&(l=aj(l));let d=e.minInt,f=e.minFrac,m=e.maxFrac;if(s){let H=s.match(tj);if(H===null)throw new Error(`${s} is not a valid digit info`);let B=H[1],z=H[3],Re=H[5];B!=null&&(d=zy(B)),z!=null&&(f=zy(z)),Re!=null?m=zy(Re):z!=null&&f>m&&(m=f)}uj(l,f,m);let y=l.digits,E=l.integerLen,x=l.exponent,R=[];for(c=y.every(H=>!H);E<d;E++)y.unshift(0);for(;E<0;E++)y.unshift(0);E>0?R=y.splice(E,y.length):(R=y,y=[0]);let O=[];for(y.length>=e.lgSize&&O.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)O.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&O.unshift(y.join("")),a=O.join(kr(n,r)),R.length&&(a+=kr(n,i)+R.join("")),x&&(a+=kr(n,ln.Exponential)+"+"+x)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function sj(t,e,n,r,i){let s=O2(e,ZS.Currency),o=oj(s,kr(e,ln.MinusSign));return o.minFrac=B2(r),o.maxFrac=o.minFrac,ij(t,o,e,ln.CurrencyGroup,ln.CurrencyDecimal,i).replace(qS,n).replace(qS,"").trim()}function oj(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(nj),i=r[0],s=r[1],o=i.indexOf(Ch)!==-1?i.split(Ch):[i.substring(0,i.lastIndexOf(jc)+1),i.substring(i.lastIndexOf(jc)+1)],a=o[0],c=o[1]||"";n.posPre=a.substring(0,a.indexOf(qy));for(let d=0;d<c.length;d++){let f=c.charAt(d);f===jc?n.minFrac=n.maxFrac=d+1:f===qy?n.maxFrac=d+1:n.posSuf+=f}let l=a.split(rj);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let d=i.length-n.posPre.length-n.posSuf.length,f=s.indexOf(qy);n.negPre=s.substring(0,f).replace(/'/g,""),n.negSuf=s.slice(f+d).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function aj(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function cj(t){let e=Math.abs(t)+"",n=0,r,i,s,o,a;for((i=e.indexOf(Ch))>-1&&(e=e.replace(Ch,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===jc;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===jc;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>HS&&(r=r.splice(0,HS-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function uj(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,s=Math.min(Math.max(e,i),n),o=s+t.integerLen,a=r[o];if(o>0){r.splice(Math.max(t.integerLen,o));for(let f=o;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let f=1;f<o;f++)r[f]=0}if(a>=5)if(o-1<0){for(let f=0;f>o;f--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,l=e+t.integerLen,d=r.reduceRight(function(f,m,y,E){return m=m+f,E[y]=m<10?m:m-10,c&&(E[y]===0&&y>=l?E.pop():c=!1),m>=10?1:0},0);d&&(r.unshift(d),t.integerLen++)}function zy(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function rA(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Gy=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},iA=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Gy(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),zS(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);zS(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(q(Bo),q(oh),q(Uy))},e.\u0275dir=an({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function zS(t,e){t.context.$implicit=e.item}var Th=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Wy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){GS("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){GS("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(q(Bo),q(oh))},e.\u0275dir=an({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Wy=class{constructor(){this.$implicit=null,this.ngIf=null}};function GS(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Vt(e)}'.`)}function Yy(t,e){return new Q(2100,!1)}var Ky=class{createSubscription(e,n){return jy(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){jy(()=>e.unsubscribe())}},Qy=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},lj=new Qy,dj=new Ky,bi=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(Ei(r))return lj;if(Fy(r))return dj;throw Yy(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(q(Ci,16))},e.\u0275pipe=Kd({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var hj="mediumDate",fj=new G(""),pj=new G(""),sA=(()=>{let e=class e{constructor(r,i,s){this.locale=r,this.defaultTimezone=i,this.defaultOptions=s}transform(r,i,s,o){if(r==null||r===""||r!==r)return null;try{let a=i??this.defaultOptions?.dateFormat??hj,c=s??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return q2(r,a,o||this.locale,c)}catch(a){throw Yy(e,a.message)}}};e.\u0275fac=function(i){return new(i||e)(q(Uc,16),q(fj,24),q(pj,24))},e.\u0275pipe=Kd({name:"date",type:e,pure:!0,standalone:!0});let t=e;return t})();var Ti=(()=>{let e=class e{constructor(r,i="USD"){this._locale=r,this._defaultCurrencyCode=i}transform(r,i=this._defaultCurrencyCode,s="symbol",o,a){if(!mj(r))return null;a||=this._locale,typeof s=="boolean"&&(s=s?"symbol":"code");let c=i||this._defaultCurrencyCode;s!=="code"&&(s==="symbol"||s==="symbol-narrow"?c=U2(c,s==="symbol"?"wide":"narrow",a):c=s);try{let l=gj(r);return sj(l,a,c,i,o)}catch(l){throw Yy(e,l.message)}}};e.\u0275fac=function(i){return new(i||e)(q(Uc,16),q(LS,16))},e.\u0275pipe=Kd({name:"currency",type:e,pure:!0,standalone:!0});let t=e;return t})();function mj(t){return!(t==null||t===""||t!==t)}function gj(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var Vn=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=hs({type:e}),e.\u0275inj=ds({});let t=e;return t})(),oA="browser",yj="server";function Jy(t){return t===yj}var bh=class{};var e_=class extends Ih{constructor(){super(...arguments),this.supportsDOMEvents=!0}},t_=class t extends e_{static makeCurrent(){KS(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=_j();return n==null?null:vj(n)}resetBaseElement(){$c=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return rA(document.cookie,e)}},$c=null;function _j(){return $c=$c||document.querySelector("base"),$c?$c.getAttribute("href"):null}function vj(t){return new URL(t,document.baseURI).pathname}var wj=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),n_=new G(""),lA=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new Q(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(X(n_),X(be))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),Dh=class{constructor(e){this._doc=e}},Xy="ng-app-id",dA=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Jy(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Xy}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Xy),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Xy,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(X(Cn),X(_y),X(wy,8),X(_i))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),Zy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},i_=/%COMP%/g,hA="%COMP%",Ij=`_nghost-${hA}`,Ej=`_ngcontent-${hA}`,Cj=!0,bj=new G("",{providedIn:"root",factory:()=>Cj});function Tj(t){return Ej.replace(i_,t)}function Dj(t){return Ij.replace(i_,t)}function fA(t,e){return e.map(n=>n.replace(i_,t))}var aA=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Jy(c),this.defaultRenderer=new Hc(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Jn.ShadowDom&&(i=ke(V({},i),{encapsulation:Jn.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Sh?s.applyToHost(r):s instanceof qc&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case Jn.Emulated:o=new Sh(l,d,i,this.appId,f,a,c,m);break;case Jn.ShadowDom:return new r_(l,d,r,i,a,c,this.nonce,m);default:o=new qc(l,d,i,f,a,c,m);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(X(lA),X(dA),X(_y),X(bj),X(Cn),X(_i),X(be),X(wy))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),Hc=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Zy[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(cA(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(cA(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Zy[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Zy[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ar.DashCase|Ar.Important)?e.style.setProperty(n,r,i&Ar.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ar.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Fr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function cA(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var r_=class extends Hc{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=fA(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},qc=class extends Hc{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?fA(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Sh=class extends qc{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=Tj(l),this.hostAttr=Dj(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},Sj=(()=>{let e=class e extends Dh{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(X(Cn))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),uA=["alt","control","meta","shift"],Aj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Rj={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},xj=(()=>{let e=class e extends Dh{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),uA.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),a+=d+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=Aj[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),uA.forEach(a=>{if(a!==s){let c=Rj[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(X(Cn))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})();function pA(t,e){return US(V({rootComponent:t},Nj(e)))}function Nj(t){return{appProviders:[...Fj,...t?.providers??[]],platformProviders:Oj}}function Mj(){t_.makeCurrent()}function Pj(){return new Sr}function kj(){return $D(document),document}var Oj=[{provide:_i,useValue:oA},{provide:vy,useValue:Mj,multi:!0},{provide:Cn,useFactory:kj,deps:[]}];var Fj=[{provide:Qd,useValue:"root"},{provide:Sr,useFactory:Pj,deps:[]},{provide:n_,useClass:Sj,multi:!0,deps:[Cn,be,_i]},{provide:n_,useClass:xj,multi:!0,deps:[Cn]},aA,dA,lA,{provide:xc,useExisting:aA},{provide:bh,useClass:wj,deps:[]},[]];var mA=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(X(Cn))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ce="primary",su=Symbol("RouteTitle"),u_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Jo(t){return new u_(t)}function Vj(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Uj(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!er(t[n],e[n]))return!1;return!0}function er(t,e){let n=t?l_(t):void 0,r=e?l_(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!IA(t[i],e[i]))return!1;return!0}function l_(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function IA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function EA(t){return t.length>0?t[t.length-1]:null}function Ai(t){return $m(t)?t:Ei(t)?Je(Promise.resolve(t)):Z(t)}var jj={exact:bA,subset:TA},CA={exact:Bj,subset:$j,ignored:()=>!0};function gA(t,e,n){return jj[n.paths](t.root,e.root,n.matrixParams)&&CA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Bj(t,e){return er(t,e)}function bA(t,e,n){if(!Ts(t.segments,e.segments)||!xh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!bA(t.children[r],e.children[r],n))return!1;return!0}function $j(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>IA(t[n],e[n]))}function TA(t,e,n){return DA(t,e,e.segments,n)}function DA(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ts(i,n)||e.hasChildren()||!xh(i,n,r))}else if(t.segments.length===n.length){if(!Ts(t.segments,n)||!xh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!TA(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Ts(t.segments,i)||!xh(t.segments,i,r)||!t.children[ce]?!1:DA(t.children[ce],e,s,r)}}function xh(t,e,n){return e.every((r,i)=>CA[n](t[i].parameters,r.parameters))}var Di=class{constructor(e=new xe([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Jo(this.queryParams),this._queryParamMap}toString(){return zj.serialize(this)}},xe=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nh(this)}},bs=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Jo(this.parameters),this._parameterMap}toString(){return AA(this)}};function Hj(t,e){return Ts(t,e)&&t.every((n,r)=>er(n.parameters,e[r].parameters))}function Ts(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function qj(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ce&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ce&&(n=n.concat(e(i,r)))}),n}var F_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>new Ph,providedIn:"root"});let t=e;return t})(),Ph=class{parse(e){let n=new h_(e);return new Di(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${zc(e.root,!0)}`,r=Kj(e.queryParams),i=typeof e.fragment=="string"?`#${Gj(e.fragment)}`:"";return`${n}${r}${i}`}},zj=new Ph;function Nh(t){return t.segments.map(e=>AA(e)).join("/")}function zc(t,e){if(!t.hasChildren())return Nh(t);if(e){let n=t.children[ce]?zc(t.children[ce],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==ce&&r.push(`${i}:${zc(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=qj(t,(r,i)=>i===ce?[zc(t.children[ce],!1)]:[`${i}:${zc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ce]!=null?`${Nh(t)}/${n[0]}`:`${Nh(t)}/(${n.join("//")})`}}function SA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ah(t){return SA(t).replace(/%3B/gi,";")}function Gj(t){return encodeURI(t)}function d_(t){return SA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Mh(t){return decodeURIComponent(t)}function yA(t){return Mh(t.replace(/\+/g,"%20"))}function AA(t){return`${d_(t.path)}${Wj(t.parameters)}`}function Wj(t){return Object.entries(t).map(([e,n])=>`;${d_(e)}=${d_(n)}`).join("")}function Kj(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ah(n)}=${Ah(i)}`).join("&"):`${Ah(n)}=${Ah(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Qj=/^[^\/()?;#]+/;function s_(t){let e=t.match(Qj);return e?e[0]:""}var Yj=/^[^\/()?;=#]+/;function Jj(t){let e=t.match(Yj);return e?e[0]:""}var Xj=/^[^=?&#]+/;function Zj(t){let e=t.match(Xj);return e?e[0]:""}var eB=/^[^&#]+/;function tB(t){let e=t.match(eB);return e?e[0]:""}var h_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ce]=new xe(e,n)),r}parseSegment(){let e=s_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new bs(Mh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Jj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=s_(this.remaining);i&&(r=i,this.capture(r))}e[Mh(n)]=Mh(r)}parseQueryParam(e){let n=Zj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=tB(this.remaining);o&&(r=o,this.capture(r))}let i=yA(n),s=yA(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=s_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Q(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ce);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ce]:new xe([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}};function RA(t){return t.segments.length>0?new xe([],{[ce]:t}):t}function xA(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=xA(i);if(r===ce&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new xe(t.segments,e);return nB(n)}function nB(t){if(t.numberOfChildren===1&&t.children[ce]){let e=t.children[ce];return new xe(t.segments.concat(e.segments),e.children)}return t}function Xo(t){return t instanceof Di}function rB(t,e,n=null,r=null){let i=NA(t);return MA(i,e,n,r)}function NA(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new xe(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=RA(r);return e??i}function MA(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return o_(i,i,i,n,r);let s=iB(e);if(s.toRoot())return o_(i,i,new xe([],{}),n,r);let o=sB(s,i,t),a=o.processChildren?Kc(o.segmentGroup,o.index,s.commands):kA(o.segmentGroup,o.index,s.commands);return o_(i,o.segmentGroup,a,n,r)}function kh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Jc(t){return typeof t=="object"&&t!=null&&t.outlets}function o_(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;t===e?o=n:o=PA(t,e,n);let a=RA(xA(o));return new Di(a,s,i)}function PA(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=PA(s,e,n)}),new xe(t.segments,r)}var Oh=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&kh(r[0]))throw new Q(4003,!1);let i=r.find(Jc);if(i&&i!==EA(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function iB(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Oh(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Oh(n,e,r)}var Qo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function sB(t,e,n){if(t.isAbsolute)return new Qo(e,!0,0);if(!n)return new Qo(e,!1,NaN);if(n.parent===null)return new Qo(n,!0,0);let r=kh(t.commands[0])?0:1,i=n.segments.length-1+r;return oB(n,i,t.numberOfDoubleDots)}function oB(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new Qo(r,!1,i-s)}function aB(t){return Jc(t[0])?t[0].outlets:{[ce]:t}}function kA(t,e,n){if(t??=new xe([],{}),t.segments.length===0&&t.hasChildren())return Kc(t,e,n);let r=cB(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new xe(t.segments.slice(0,r.pathIndex),{});return s.children[ce]=new xe(t.segments.slice(r.pathIndex),t.children),Kc(s,0,i)}else return r.match&&i.length===0?new xe(t.segments,{}):r.match&&!t.hasChildren()?f_(t,e,n):r.match?Kc(t,0,i):f_(t,e,n)}function Kc(t,e,n){if(n.length===0)return new xe(t.segments,{});{let r=aB(n),i={};if(Object.keys(r).some(s=>s!==ce)&&t.children[ce]&&t.numberOfChildren===1&&t.children[ce].segments.length===0){let s=Kc(t.children[ce],e,n);return new xe(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=kA(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new xe(t.segments,i)}}function cB(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Jc(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!vA(c,l,o))return s;r+=2}else{if(!vA(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function f_(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Jc(s)){let c=uB(s.outlets);return new xe(r,c)}if(i===0&&kh(n[0])){let c=t.segments[e];r.push(new bs(c.path,_A(n[0]))),i++;continue}let o=Jc(s)?s.outlets[ce]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&kh(a)?(r.push(new bs(o,_A(a))),i+=2):(r.push(new bs(o,{})),i++)}return new xe(r,{})}function uB(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=f_(new xe([],{}),0,r))}),e}function _A(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function vA(t,e,n){return t==n.path&&er(e,n.parameters)}var Qc="imperative",vt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(vt||{}),bn=class{constructor(e,n){this.id=e,this.url=n}},Xc=class extends bn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=vt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},tr=class extends bn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=vt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},hn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(hn||{}),p_=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(p_||{}),Si=class extends bn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=vt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ds=class extends bn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=vt.NavigationSkipped}},Zc=class extends bn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=vt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Fh=class extends bn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=vt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},m_=class extends bn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=vt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},g_=class extends bn{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=vt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},y_=class extends bn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=vt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},__=class extends bn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=vt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},v_=class{constructor(e){this.route=e,this.type=vt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},w_=class{constructor(e){this.route=e,this.type=vt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},I_=class{constructor(e){this.snapshot=e,this.type=vt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},E_=class{constructor(e){this.snapshot=e,this.type=vt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},C_=class{constructor(e){this.snapshot=e,this.type=vt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},b_=class{constructor(e){this.snapshot=e,this.type=vt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var eu=class{},tu=class{constructor(e){this.url=e}};var T_=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new $h,this.attachRef=null}},$h=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new T_,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Lh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=D_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=D_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=S_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return S_(e,this._root).map(n=>n.value)}};function D_(t,e){if(t===e.value)return e;for(let n of e.children){let r=D_(t,n);if(r)return r}return null}function S_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=S_(t,n);if(r.length)return r.unshift(e),r}return[]}var dn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ko(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Vh=class extends Lh{constructor(e,n){super(e),this.snapshot=n,V_(this,e)}toString(){return this.snapshot.toString()}};function OA(t){let e=lB(t),n=new ut([new bs("",{})]),r=new ut({}),i=new ut({}),s=new ut({}),o=new ut(""),a=new Ss(n,r,s,o,i,ce,t,e.root);return a.snapshot=e.root,new Vh(new dn(a,[]),e)}function lB(t){let e={},n={},r={},i="",s=new nu([],e,r,i,n,ce,t,null,{});return new Uh("",new dn(s,[]))}var Ss=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(se(l=>l[su]))??Z(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(e=>Jo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(e=>Jo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function L_(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),t.params),data:V(V({},e.data),t.data),resolve:V(V(V(V({},t.data),e.data),i?.data),t._resolvedData)}:r={params:V({},t.params),data:V({},t.data),resolve:V(V({},t.data),t._resolvedData??{})},i&&LA(i)&&(r.resolve[su]=i.title),r}var nu=class{get title(){return this.data?.[su]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Jo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Jo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Uh=class extends Lh{constructor(e,n){super(n),this.url=e,V_(this,n)}toString(){return FA(this._root)}};function V_(t,e){e.value._routerState=t,e.children.forEach(n=>V_(t,n))}function FA(t){let e=t.children.length>0?` { ${t.children.map(FA).join(", ")} } `:"";return`${t.value}${e}`}function a_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,er(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),er(e.params,n.params)||t.paramsSubject.next(n.params),Uj(e.url,n.url)||t.urlSubject.next(n.url),er(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function A_(t,e){let n=er(t.params,e.params)&&Hj(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||A_(t.parent,e.parent))}function LA(t){return typeof t.title=="string"||t.title===null}var U_=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ce,this.activateEvents=new Lt,this.deactivateEvents=new Lt,this.attachEvents=new Lt,this.detachEvents=new Lt,this.parentContexts=U($h),this.location=U(Bo),this.changeDetector=U(Ci),this.environmentInjector=U(vn),this.inputBinder=U(j_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new R_(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=an({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ps]});let t=e;return t})(),R_=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Ss?this.route:e===$h?this.childContexts:this.parent.get(e,n)}},j_=new G("");function dB(t,e,n){let r=ru(t,e._root,n?n._root:void 0);return new Vh(r,e)}function ru(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=hB(t,e,n);return new dn(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ru(t,a)),o}}let r=fB(e.value),i=e.children.map(s=>ru(t,s));return new dn(r,i)}}function hB(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ru(t,r,i);return ru(t,r)})}function fB(t){return new Ss(new ut(t.url),new ut(t.params),new ut(t.queryParams),new ut(t.fragment),new ut(t.data),t.outlet,t.component,t)}var VA="ngNavigationCancelingError";function UA(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Xo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=jA(!1,hn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function jA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[VA]=!0,n.cancellationCode=e,n}function pB(t){return BA(t)&&Xo(t.url)}function BA(t){return!!t&&t[VA]}var mB=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ze({type:e,selectors:[["ng-component"]],standalone:!0,features:[Ge],decls:1,vars:0,template:function(i,s){i&1&&we(0,"router-outlet")},dependencies:[U_],encapsulation:2});let t=e;return t})();function gB(t,e){return t.providers&&!t._injector&&(t._injector=Py(t.providers,e,`Route: ${t.path}`)),t._injector??e}function B_(t){let e=t.children&&t.children.map(B_),n=e?ke(V({},t),{children:e}):V({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ce&&(n.component=mB),n}function nr(t){return t.outlet||ce}function yB(t,e){let n=t.filter(r=>nr(r)===e);return n.push(...t.filter(r=>nr(r)!==e)),n}function ou(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var _B=(t,e,n,r)=>se(i=>(new x_(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),x_=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),a_(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ko(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ko(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ko(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ko(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new b_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new E_(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(a_(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),a_(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=ou(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},jh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Yo=class{constructor(e,n){this.component=e,this.route=n}};function vB(t,e,n){let r=t._root,i=e?e._root:null;return Gc(r,i,n,[r.value])}function wB(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ea(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!P0(t)?t:e.get(t):r}function Gc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ko(e);return t.children.forEach(o=>{IB(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Yc(a,n.getContext(o),i)),i}function IB(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=EB(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new jh(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Gc(t,e,a?a.children:null,r,i):Gc(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Yo(a.outlet.component,o))}else o&&Yc(e,a,i),i.canActivateChecks.push(new jh(r)),s.component?Gc(t,null,a?a.children:null,r,i):Gc(t,null,n,r,i);return i}function EB(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ts(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ts(t.url,e.url)||!er(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!A_(t,e)||!er(t.queryParams,e.queryParams);case"paramsChange":default:return!A_(t,e)}}function Yc(t,e,n){let r=Ko(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Yc(o,e.children.getContext(s),n):Yc(o,null,n):Yc(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Yo(e.outlet.component,i)):n.canDeactivateChecks.push(new Yo(null,i)):n.canDeactivateChecks.push(new Yo(null,i))}function au(t){return typeof t=="function"}function CB(t){return typeof t=="boolean"}function bB(t){return t&&au(t.canLoad)}function TB(t){return t&&au(t.canActivate)}function DB(t){return t&&au(t.canActivateChild)}function SB(t){return t&&au(t.canDeactivate)}function AB(t){return t&&au(t.canMatch)}function $A(t){return t instanceof Dr||t?.name==="EmptyError"}var Rh=Symbol("INITIAL_VALUE");function Zo(){return gn(t=>dd(t.map(e=>e.pipe(lt(1),Km(Rh)))).pipe(se(e=>{for(let n of e)if(n!==!0){if(n===Rh)return Rh;if(n===!1||n instanceof Di)return n}return!0}),sn(e=>e!==Rh),lt(1)))}function RB(t,e){return rt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?Z(ke(V({},n),{guardsResult:!0})):xB(o,r,i,t).pipe(rt(a=>a&&CB(a)?NB(r,s,t,e):Z(a)),se(a=>ke(V({},n),{guardsResult:a})))})}function xB(t,e,n,r){return Je(t).pipe(rt(i=>FB(i.component,i.route,n,e,r)),Kn(i=>i!==!0,!0))}function NB(t,e,n,r){return Je(e).pipe(Co(i=>ui(PB(i.route.parent,r),MB(i.route,r),OB(t,i.path,n),kB(t,i.route,n))),Kn(i=>i!==!0,!0))}function MB(t,e){return t!==null&&e&&e(new C_(t)),Z(!0)}function PB(t,e){return t!==null&&e&&e(new I_(t)),Z(!0)}function kB(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(s=>hd(()=>{let o=ou(e)??n,a=ea(s,o),c=TB(a)?a.canActivate(e,t):fs(o,()=>a(e,t));return Ai(c).pipe(Kn())}));return Z(i).pipe(Zo())}function OB(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>wB(o)).filter(o=>o!==null).map(o=>hd(()=>{let a=o.guards.map(c=>{let l=ou(o.node)??n,d=ea(c,l),f=DB(d)?d.canActivateChild(r,t):fs(l,()=>d(r,t));return Ai(f).pipe(Kn())});return Z(a).pipe(Zo())}));return Z(s).pipe(Zo())}function FB(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Z(!0);let o=s.map(a=>{let c=ou(e)??i,l=ea(a,c),d=SB(l)?l.canDeactivate(t,e,n,r):fs(c,()=>l(t,e,n,r));return Ai(d).pipe(Kn())});return Z(o).pipe(Zo())}function LB(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let s=i.map(o=>{let a=ea(o,t),c=bB(a)?a.canLoad(e,n):fs(t,()=>a(e,n));return Ai(c)});return Z(s).pipe(Zo(),HA(r))}function HA(t){return km(dt(e=>{if(Xo(e))throw UA(t,e)}),se(e=>e===!0))}function VB(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let s=i.map(o=>{let a=ea(o,t),c=AB(a)?a.canMatch(e,n):fs(t,()=>a(e,n));return Ai(c)});return Z(s).pipe(Zo(),HA(r))}var iu=class{constructor(e){this.segmentGroup=e||null}},Bh=class extends Error{constructor(e){super(),this.urlTree=e}};function Wo(t){return Eo(new iu(t))}function UB(t){return Eo(new Q(4e3,!1))}function jB(t){return Eo(jA(!1,hn.GuardRejected))}var N_=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[ce])return UB(e.redirectTo);i=i.children[ce]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Bh(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Di(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new xe(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},M_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function BB(t,e,n,r,i){let s=$_(t,e,n);return s.matched?(r=gB(e,r),VB(r,e,n,i).pipe(se(o=>o===!0?s:V({},M_)))):Z(s)}function $_(t,e,n){if(e.path==="**")return $B(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?V({},M_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Vj)(n,t,e);if(!i)return V({},M_);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?V(V({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function $B(t){return{matched:!0,parameters:t.length>0?EA(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function wA(t,e,n,r){return n.length>0&&zB(t,n,r)?{segmentGroup:new xe(e,qB(r,new xe(n,t.children))),slicedSegments:[]}:n.length===0&&GB(t,n,r)?{segmentGroup:new xe(t.segments,HB(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new xe(t.segments,t.children),slicedSegments:n}}function HB(t,e,n,r){let i={};for(let s of n)if(Hh(t,e,s)&&!r[nr(s)]){let o=new xe([],{});i[nr(s)]=o}return V(V({},r),i)}function qB(t,e){let n={};n[ce]=e;for(let r of t)if(r.path===""&&nr(r)!==ce){let i=new xe([],{});n[nr(r)]=i}return n}function zB(t,e,n){return n.some(r=>Hh(t,e,r)&&nr(r)!==ce)}function GB(t,e,n){return n.some(r=>Hh(t,e,r))}function Hh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function WB(t,e,n,r){return nr(t)!==r&&(r===ce||!Hh(e,n,t))?!1:$_(e,t,n).matched}function KB(t,e,n){return e.length===0&&!t.children[n]}var P_=class{};function QB(t,e,n,r,i,s,o="emptyOnly"){return new k_(t,e,n,r,i,o,s).recognize()}var YB=31,k_=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new N_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){let e=wA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(se(n=>{let r=new nu([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,{},ce,this.rootComponentType,null,{}),i=new dn(r,n),s=new Uh("",i),o=rB(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ce).pipe(on(r=>{if(r instanceof Bh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof iu?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=L_(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(se(s=>s instanceof dn?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Je(i).pipe(Co(s=>{let o=r.children[s],a=yB(n,s);return this.processSegmentGroup(e,a,o,s)}),pd((s,o)=>(s.push(...o),s)),li(null),Wm(),rt(s=>{if(s===null)return Wo(r);let o=qA(s);return JB(o),Z(o)}))}processSegment(e,n,r,i,s,o){return Je(n).pipe(Co(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(on(c=>{if(c instanceof iu)return Z(null);throw c}))),Kn(a=>!!a),on(a=>{if($A(a))return KB(r,i,s)?Z(new P_):Wo(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return WB(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Wo(i):Wo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:d}=$_(n,i,s);if(!a)return Wo(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>YB&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,f).pipe(rt(m=>this.processSegment(e,r,n,m.concat(d),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=BB(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(gn(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(gn(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:d,remainingSegments:f,parameters:m}=a,y=new nu(d,m,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,ZB(r),nr(r),r.component??r._loadedComponent??null,r,e$(r)),{segmentGroup:E,slicedSegments:x}=wA(n,d,f,c);if(x.length===0&&E.hasChildren())return this.processChildren(l,c,E).pipe(se(O=>O===null?null:new dn(y,O)));if(c.length===0&&x.length===0)return Z(new dn(y,[]));let R=nr(r)===s;return this.processSegment(l,c,E,x,R?ce:s,!0).pipe(se(O=>new dn(y,O instanceof dn?[O]:[])))}))):Wo(n)))}getChildConfig(e,n,r){return n.children?Z({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Z({routes:n._loadedRoutes,injector:n._loadedInjector}):LB(e,n,r,this.urlSerializer).pipe(rt(i=>i?this.configLoader.loadChildren(e,n).pipe(dt(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):jB(n))):Z({routes:[],injector:e})}};function JB(t){t.sort((e,n)=>e.value.outlet===ce?-1:n.value.outlet===ce?1:e.value.outlet.localeCompare(n.value.outlet))}function XB(t){let e=t.value.routeConfig;return e&&e.path===""}function qA(t){let e=[],n=new Set;for(let r of t){if(!XB(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=qA(r.children);e.push(new dn(r.value,i))}return e.filter(r=>!n.has(r))}function ZB(t){return t.data||{}}function e$(t){return t.resolve||{}}function t$(t,e,n,r,i,s){return rt(o=>QB(t,e,n,r,o.extractedUrl,i,s).pipe(se(({state:a,tree:c})=>ke(V({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function n$(t,e){return rt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Z(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of zA(c))o.add(l);let a=0;return Je(o).pipe(Co(c=>s.has(c)?r$(c,r,t,e):(c.data=L_(c,c.parent,t).resolve,Z(void 0))),dt(()=>a++),bo(1),rt(c=>a===o.size?Z(n):rn))})}function zA(t){let e=t.children.map(n=>zA(n)).flat();return[t,...e]}function r$(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!LA(i)&&(s[su]=i.title),i$(s,t,e,r).pipe(se(o=>(t._resolvedData=o,t.data=L_(t,t.parent,n).resolve,null)))}function i$(t,e,n,r){let i=l_(t);if(i.length===0)return Z({});let s={};return Je(i).pipe(rt(o=>s$(t[o],e,n,r).pipe(Kn(),dt(a=>{s[o]=a}))),bo(1),wc(s),on(o=>$A(o)?rn:Eo(o)))}function s$(t,e,n,r){let i=ou(e)??r,s=ea(t,i),o=s.resolve?s.resolve(e,n):fs(i,()=>s(e,n));return Ai(o)}function c_(t){return gn(e=>{let n=t(e);return n?Je(n).pipe(se(()=>e)):Z(e)})}var GA=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===ce);return i}getResolvedTitleForRoute(r){return r.data[su]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>U(o$),providedIn:"root"});let t=e;return t})(),o$=(()=>{let e=class e extends GA{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(X(mA))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),H_=new G("",{providedIn:"root",factory:()=>({})}),q_=new G(""),a$=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=U(Vy)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Z(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ai(r.loadComponent()).pipe(se(WA),dt(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Ic(()=>{this.componentLoaders.delete(r)})),s=new yo(i,()=>new St).pipe(go());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Z({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=c$(i,this.compiler,r,this.onLoadEndListener).pipe(Ic(()=>{this.childrenLoaders.delete(i)})),a=new yo(o,()=>new St).pipe(go());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function c$(t,e,n,r){return Ai(t.loadChildren()).pipe(se(WA),rt(i=>i instanceof Mc||Array.isArray(i)?Z(i):Je(e.compileModuleAsync(i))),se(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(q_,[],{optional:!0,self:!0}).flat()),{routes:o.map(B_),injector:s}}))}function u$(t){return t&&typeof t=="object"&&"default"in t}function WA(t){return u$(t)?t.default:t}var z_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>U(l$),providedIn:"root"});let t=e;return t})(),l$=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),d$=new G("");var h$=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new St,this.transitionAbortSubject=new St,this.configLoader=U(a$),this.environmentInjector=U(vn),this.urlSerializer=U(F_),this.rootContexts=U($h),this.location=U(Bc),this.inputBindingEnabled=U(j_,{optional:!0})!==null,this.titleStrategy=U(GA),this.options=U(H_,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=U(z_),this.createViewTransition=U(d$,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let r=s=>this.events.next(new v_(s)),i=s=>this.events.next(new w_(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ke(V(V({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new ut({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Qc,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(sn(o=>o.id!==0),se(o=>ke(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),gn(o=>{let a=!1,c=!1;return Z(o).pipe(gn(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",hn.SupersededByNewNavigation),rn;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ke(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&f!=="reload"){let m="";return this.events.next(new Ds(l.id,this.urlSerializer.serialize(l.rawUrl),m,p_.IgnoredSameUrlNavigation)),l.resolve(null),rn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Z(l).pipe(gn(m=>{let y=this.transitions?.getValue();return this.events.next(new Xc(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?rn:Promise.resolve(m)}),t$(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),dt(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=ke(V({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let y=new Fh(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:y,source:E,restoredState:x,extras:R}=l,O=new Xc(m,this.urlSerializer.serialize(y),E,x);this.events.next(O);let H=OA(this.rootComponentType).snapshot;return this.currentTransition=o=ke(V({},l),{targetSnapshot:H,urlAfterRedirects:y,extras:ke(V({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,Z(o)}else{let m="";return this.events.next(new Ds(l.id,this.urlSerializer.serialize(l.extractedUrl),m,p_.IgnoredByUrlHandlingStrategy)),l.resolve(null),rn}}),dt(l=>{let d=new m_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),se(l=>(this.currentTransition=o=ke(V({},l),{guards:vB(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),RB(this.environmentInjector,l=>this.events.next(l)),dt(l=>{if(o.guardsResult=l.guardsResult,Xo(l.guardsResult))throw UA(this.urlSerializer,l.guardsResult);let d=new g_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),sn(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",hn.GuardRejected),!1)),c_(l=>{if(l.guards.canActivateChecks.length)return Z(l).pipe(dt(d=>{let f=new y_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),gn(d=>{let f=!1;return Z(d).pipe(n$(this.paramsInheritanceStrategy,this.environmentInjector),dt({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",hn.NoDataFromResolver)}}))}),dt(d=>{let f=new __(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),c_(l=>{let d=f=>{let m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(dt(y=>{f.component=y}),se(()=>{})));for(let y of f.children)m.push(...d(y));return m};return dd(d(l.targetSnapshot.root)).pipe(li(null),lt(1))}),c_(()=>this.afterPreactivation()),gn(()=>{let{currentSnapshot:l,targetSnapshot:d}=o,f=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return f?Je(f).pipe(se(()=>o)):Z(o)}),se(l=>{let d=dB(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=ke(V({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),dt(()=>{this.events.next(new eu)}),_B(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),lt(1),dt({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new tr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Qm(this.transitionAbortSubject.pipe(dt(l=>{throw l}))),Ic(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",hn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),on(l=>{if(c=!0,BA(l))this.events.next(new Si(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),pB(l)?this.events.next(new tu(l.url)):o.resolve(!1);else{this.events.next(new Zc(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return rn}))}))}cancelNavigationTransition(r,i,s){let o=new Si(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function f$(t){return t!==Qc}var p$=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>U(m$),providedIn:"root"});let t=e;return t})(),O_=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},m$=(()=>{let e=class e extends O_{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=jo(e)))(s||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),KA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>U(g$),providedIn:"root"});let t=e;return t})(),g$=(()=>{let e=class e extends KA{constructor(){super(...arguments),this.location=U(Bc),this.urlSerializer=U(F_),this.options=U(H_,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=U(z_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Di,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=OA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Xc)this.stateMemento=this.createStateMemento();else if(r instanceof Ds)this.rawUrlTree=i.initialUrl;else if(r instanceof Fh){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof eu?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Si&&(r.code===hn.GuardRejected||r.code===hn.NoDataFromResolver)?this.restoreHistory(i):r instanceof Zc?this.restoreHistory(i,!0):r instanceof tr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=V(V({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=V(V({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=jo(e)))(s||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Wc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Wc||{});function y$(t,e){t.events.pipe(sn(n=>n instanceof tr||n instanceof Si||n instanceof Zc||n instanceof Ds),se(n=>n instanceof tr||n instanceof Ds?Wc.COMPLETE:(n instanceof Si?n.code===hn.Redirect||n.code===hn.SupersededByNewNavigation:!1)?Wc.REDIRECTING:Wc.FAILED),sn(n=>n!==Wc.REDIRECTING),lt(1)).subscribe(()=>{e()})}function _$(t){throw t}var v$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},w$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},wt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=U(hh),this.stateManager=U(KA),this.options=U(H_,{optional:!0})||{},this.pendingTasks=U(ch),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=U(h$),this.urlSerializer=U(F_),this.location=U(Bc),this.urlHandlingStrategy=U(z_),this._events=new St,this.errorHandler=this.options.errorHandler||_$,this.navigated=!1,this.routeReuseStrategy=U(p$),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=U(q_,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!U(j_,{optional:!0}),this.eventsSubscription=new nt,this.isNgZoneEnabled=U(be)instanceof be&&be.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Si&&i.code!==hn.Redirect&&i.code!==hn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof tr)this.navigated=!0;else if(i instanceof tu){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||f$(s.source)};this.scheduleNavigation(a,Qc,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}E$(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Qc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=V({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(B_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:a,f=null;switch(c){case"merge":f=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let m;try{let y=s?s.snapshot:this.routerState.snapshot.root;m=NA(y)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),m=this.currentUrlTree.root}return MA(m,r,f,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Xo(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Qc,null,i)}navigate(r,i={skipLocationChange:!1}){return I$(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=V({},v$):i===!1?s=V({},w$):s=i,Xo(r))return gA(this.currentUrlTree,r,s);let o=this.parseUrl(r);return gA(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((m,y)=>{c=m,l=y});let f=this.pendingTasks.add();return y$(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function I$(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Q(4008,!1)}function E$(t){return!(t instanceof eu)&&!(t instanceof tu)}var ta=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new St,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(d=>{d instanceof tr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:zD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(q(wt),q(Ss),yy("tabindex"),q(ys),q(yi),q(zo))},e.\u0275dir=an({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&Oe("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&uh("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Ut.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Es],skipLocationChange:[Ut.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Es],replaceUrl:[Ut.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Es],routerLink:"routerLink"},standalone:!0,features:[My,ps]});let t=e;return t})();var C$=new G("");function QA(t,...e){return Gt([{provide:q_,multi:!0,useValue:t},[],{provide:Ss,useFactory:b$,deps:[wt]},{provide:Ly,multi:!0,useFactory:T$},e.map(n=>n.\u0275providers)])}function b$(t){return t.routerState.root}function T$(){let t=U(Rt);return e=>{let n=t.get(Vc);if(e!==n.components[0])return;let r=t.get(wt),i=t.get(D$);t.get(S$)===1&&r.initialNavigation(),t.get(A$,null,de.Optional)?.setUpPreloading(),t.get(C$,null,de.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var D$=new G("",{factory:()=>new St}),S$=new G("",{providedIn:"root",factory:()=>1});var A$=new G("");var YA=(()=>{let e=class e{constructor(r){this.router=r}navigateToLogin(){this.router.navigate(["login"])}};e.\u0275fac=function(i){return new(i||e)(q(wt))},e.\u0275cmp=ze({type:e,selectors:[["app-root"]],standalone:!0,features:[Ge],decls:9,vars:0,consts:[[1,"h-screen","bg-white","dark:bg-black"],[1,"container1"],[1,"text-6xl","text-rose-700"],[1,"text-lg","dark:text-gray-300"],[1,"btn-sign-in",3,"click"]],template:function(i,s){i&1&&(L(0,"div",0)(1,"div",1)(2,"h1",2),j(3,"Welcome to Angular Banking"),k(),we(4,"br"),L(5,"p",3),j(6,"Please sign in to access your account."),k(),L(7,"button",4),Oe("click",function(){return s.navigateToLogin()}),j(8,"Sign In"),k()()())},styles:[".container1[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;font-family:Arial,sans-serif}.btn-sign-in[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;font-size:18px;background-color:#be123c;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.btn-sign-in[_ngcontent-%COMP%]:hover{background-color:#881337}"]});let t=e;return t})();var W_={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var M=function(t,e){if(!t)throw As(e)},As=function(t){return new Error("Firebase Database ("+W_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var XA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},R$=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},zh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;c||(y=64,o||(m=64)),r.push(n[d],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(XA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):R$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new K_;let m=s<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),f!==64){let E=l<<6&192|f;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},K_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Y_=function(t){let e=XA(t);return zh.encodeByteArray(e,!0)},cu=function(t){return Y_(t).replace(/\./g,"")},uu=function(t){try{return zh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ZA(t){return eR(void 0,t)}function eR(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!x$(n)||(t[n]=eR(t[n],e[n]));return t}function x$(t){return t!=="__proto__"}function N$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var M$=()=>N$().__FIREBASE_DEFAULTS__,P$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},k$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&uu(t[1]);return e&&JSON.parse(e)},Gh=()=>{try{return M$()||P$()||k$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},J_=t=>{var e,n;return(n=(e=Gh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ia=t=>{let e=J_(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},X_=()=>{var t;return(t=Gh())===null||t===void 0?void 0:t.config},Z_=t=>{var e;return(e=Gh())===null||e===void 0?void 0:e[`_${t}`]};var Ri=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function sa(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[cu(JSON.stringify(n)),cu(JSON.stringify(o)),""].join(".")}function ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lu(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function O$(){var t;let e=(t=Gh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tR(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Wh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nR(){let t=ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function rr(){return W_.NODE_CLIENT===!0||W_.NODE_ADMIN===!0}function rR(){return!O$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ev(){try{return typeof indexedDB=="object"}catch{return!1}}function iR(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var F$="FirebaseError",$t=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=F$,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lr.prototype.create)}},Lr=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?L$(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new $t(i,a,r)}};function L$(t,e){return t.replace(V$,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var V$=/\{\$([^}]+)}/g;function ra(t){return JSON.parse(t)}function pt(t){return JSON.stringify(t)}var sR=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=ra(uu(s[0])||""),n=ra(uu(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var oR=function(t){let e=sR(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},aR=function(t){let e=sR(t).claims;return typeof e=="object"&&e.admin===!0};function ir(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Rs(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function du(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hu(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function xs(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(JA(s)&&JA(o)){if(!xs(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function JA(t){return t!==null&&typeof t=="object"}function Ns(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oa(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function aa(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var qh=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)r[f]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)r[f]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let f=16;f<80;f++){let m=r[f-3]^r[f-8]^r[f-14]^r[f-16];r[f]=(m<<1|m>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,d;for(let f=0;f<80;f++){f<40?f<20?(l=a^s&(o^a),d=1518500249):(l=s^o^a,d=1859775393):f<60?(l=s&o|a&(s|o),d=2400959708):(l=s^o^a,d=3395469782);let m=(i<<5|i>>>27)+l+c+d+r[f]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function cR(t,e){let n=new Q_(t,e);return n.subscribe.bind(n)}var Q_=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");U$(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=G_),i.error===void 0&&(i.error=G_),i.complete===void 0&&(i.complete=G_);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function U$(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function G_(){}function Kh(t,e){return`${t} failed: ${e} argument `}var uR=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,M(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},fu=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var MZ=4*60*60*1e3;function We(t){return t&&t._delegate?t._delegate:t}var xt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ms="[DEFAULT]";var Qh=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Ri;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(B$(e))try{this.getOrInitializeService({instanceIdentifier:Ms})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ms){return this.instances.has(e)}getOptions(e=Ms){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:j$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ms){return this.component?this.component.multipleInstances?e:Ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function j$(t){return t===Ms?void 0:t}function B$(t){return t.instantiationMode==="EAGER"}var pu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Qh(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var $$=[],fe=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(fe||{}),H$={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},q$=fe.INFO,z$={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},G$=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=z$[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},sr=class{constructor(e){this.name=e,this._logLevel=q$,this._logHandler=G$,this._userLogHandler=null,$$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?H$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}};var W$=(t,e)=>e.some(n=>t instanceof n),lR,dR;function K$(){return lR||(lR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Q$(){return dR||(dR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var hR=new WeakMap,nv=new WeakMap,fR=new WeakMap,tv=new WeakMap,iv=new WeakMap;function Y$(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(or(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hR.set(n,t)}).catch(()=>{}),iv.set(e,t),e}function J$(t){if(nv.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});nv.set(t,e)}var rv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return nv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return or(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function pR(t){rv=t(rv)}function X$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Yh(this),e,...n);return fR.set(r,e.sort?e.sort():[e]),or(r)}:Q$().includes(t)?function(...e){return t.apply(Yh(this),e),or(hR.get(this))}:function(...e){return or(t.apply(Yh(this),e))}}function Z$(t){return typeof t=="function"?X$(t):(t instanceof IDBTransaction&&J$(t),W$(t,K$())?new Proxy(t,rv):t)}function or(t){if(t instanceof IDBRequest)return Y$(t);if(tv.has(t))return tv.get(t);let e=Z$(t);return e!==t&&(tv.set(t,e),iv.set(e,t)),e}var Yh=t=>iv.get(t);function gR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=or(o);return r&&o.addEventListener("upgradeneeded",c=>{r(or(o.result),c.oldVersion,c.newVersion,or(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var eH=["get","getKey","getAll","getAllKeys","count"],tH=["put","add","delete","clear"],sv=new Map;function mR(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sv.get(e))return sv.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=tH.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||eH.includes(n)))return;let s=function(o,...a){return v(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return sv.set(e,s),s}pR(t=>ke(V({},t),{get:(e,n,r)=>mR(e,n)||t.get(e,n,r),has:(e,n)=>!!mR(e,n)||t.has(e,n)}));var av=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nH(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function nH(t){let e=t.getComponent();return e?.type==="VERSION"}var cv="@firebase/app",yR="0.10.4";var Ps=new sr("@firebase/app"),rH="@firebase/app-compat",iH="@firebase/analytics-compat",sH="@firebase/analytics",oH="@firebase/app-check-compat",aH="@firebase/app-check",cH="@firebase/auth",uH="@firebase/auth-compat",lH="@firebase/database",dH="@firebase/database-compat",hH="@firebase/functions",fH="@firebase/functions-compat",pH="@firebase/installations",mH="@firebase/installations-compat",gH="@firebase/messaging",yH="@firebase/messaging-compat",_H="@firebase/performance",vH="@firebase/performance-compat",wH="@firebase/remote-config",IH="@firebase/remote-config-compat",EH="@firebase/storage",CH="@firebase/storage-compat",bH="@firebase/firestore",TH="@firebase/vertexai-preview",DH="@firebase/firestore-compat",SH="firebase",AH="10.12.1";var uv="[DEFAULT]",RH={[cv]:"fire-core",[rH]:"fire-core-compat",[sH]:"fire-analytics",[iH]:"fire-analytics-compat",[aH]:"fire-app-check",[oH]:"fire-app-check-compat",[cH]:"fire-auth",[uH]:"fire-auth-compat",[lH]:"fire-rtdb",[dH]:"fire-rtdb-compat",[hH]:"fire-fn",[fH]:"fire-fn-compat",[pH]:"fire-iid",[mH]:"fire-iid-compat",[gH]:"fire-fcm",[yH]:"fire-fcm-compat",[_H]:"fire-perf",[vH]:"fire-perf-compat",[wH]:"fire-rc",[IH]:"fire-rc-compat",[EH]:"fire-gcs",[CH]:"fire-gcs-compat",[bH]:"fire-fst",[DH]:"fire-fst-compat",[TH]:"fire-vertex","fire-js":"fire-js",[SH]:"fire-js-all"};var mu=new Map,xH=new Map,lv=new Map;function _R(t,e){try{t.container.addComponent(e)}catch(n){Ps.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Tn(t){let e=t.name;if(lv.has(e))return Ps.debug(`There were multiple attempts to register component ${e}.`),!1;lv.set(e,t);for(let n of mu.values())_R(n,t);for(let n of xH.values())_R(n,t);return!0}function Vr(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Un(t){return t.settings!==void 0}var NH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xi=new Lr("app","Firebase",NH);var dv=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xi.create("app-deleted",{appName:this._name})}};var Dn=AH;function pv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:uv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw xi.create("bad-app-name",{appName:String(i)});if(n||(n=X_()),!n)throw xi.create("no-options");let s=mu.get(i);if(s){if(xs(n,s.options)&&xs(r,s.config))return s;throw xi.create("duplicate-app",{appName:i})}let o=new pu(i);for(let c of lv.values())o.addComponent(c);let a=new dv(n,r,o);return mu.set(i,a),a}function ar(t=uv){let e=mu.get(t);if(!e&&t===uv&&X_())return pv();if(!e)throw xi.create("no-app",{appName:t});return e}function Jh(){return Array.from(mu.values())}function Me(t,e,n){var r;let i=(r=RH[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ps.warn(a.join(" "));return}Tn(new xt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var MH="firebase-heartbeat-database",PH=1,gu="firebase-heartbeat-store",ov=null;function ER(){return ov||(ov=gR(MH,PH,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(gu)}catch(n){console.warn(n)}}}}).catch(t=>{throw xi.create("idb-open",{originalErrorMessage:t.message})})),ov}function kH(t){return v(this,null,function*(){try{let n=(yield ER()).transaction(gu),r=yield n.objectStore(gu).get(CR(t));return yield n.done,r}catch(e){if(e instanceof $t)Ps.warn(e.message);else{let n=xi.create("idb-get",{originalErrorMessage:e?.message});Ps.warn(n.message)}}})}function vR(t,e){return v(this,null,function*(){try{let r=(yield ER()).transaction(gu,"readwrite");yield r.objectStore(gu).put(e,CR(t)),yield r.done}catch(n){if(n instanceof $t)Ps.warn(n.message);else{let r=xi.create("idb-set",{originalErrorMessage:n?.message});Ps.warn(r.message)}}})}function CR(t){return`${t.name}!${t.options.appId}`}var OH=1024,FH=30*24*60*60*1e3,hv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new fv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=wR();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=FH}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return v(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=wR(),{heartbeatsToSend:r,unsentEntries:i}=LH(this._heartbeatsCache.heartbeats),s=cu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function wR(){return new Date().toISOString().substring(0,10)}function LH(t,e=OH){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),IR(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),IR(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var fv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return ev()?iR().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield kH(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return vR(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return vR(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function IR(t){return cu(JSON.stringify({version:2,heartbeats:t})).length}function VH(t){Tn(new xt("platform-logger",e=>new av(e),"PRIVATE")),Tn(new xt("heartbeat",e=>new hv(e),"PRIVATE")),Me(cv,yR,t),Me(cv,yR,"esm2017"),Me("fire-js","")}VH("");var UH="firebase",jH="10.12.1";Me(UH,jH,"app");var jn=new Rr("ANGULARFIRE2_VERSION");function Ni(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ur=(t,e)=>{let n=e?[e]:Jh(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},cr=class{constructor(){return Ur(BH)}},BH="app-check";function ca(){}var Xh=class{zone;delegate;constructor(e,n=jm){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},mv=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ca,{},ca,ca)),n.pipe(dt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ur=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Xh(Zone.current)),this.insideAngular=n.run(()=>new Xh(Zone.current,Io)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(X(be))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Zh(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function $H(t){return Zh().ngZone.runOutsideAngular(()=>t())}function ks(t){return Zh().ngZone.run(()=>t())}function HH(t){return qH(Zh())(t)}function qH(t){return function(n){return n=n.lift(new mv(t.ngZone)),n.pipe(ci(t.outsideAngular),ai(t.insideAngular))}}var zH=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ks(()=>t.apply(void 0,r))},Xe=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=ks(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ca,{},ca,ca))),r[s]=zH(r[s],n));let i=$H(()=>t.apply(this,r));if(!e)if(i instanceof J){let s=Zh();return i.pipe(ci(s.outsideAngular),ai(s.insideAngular))}else return ks(()=>i);return i instanceof J?i.pipe(HH):i instanceof Promise?ks(()=>new Promise((s,o)=>i.then(a=>ks(()=>s(a)),a=>ks(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:ks(()=>i)};var fn=class{constructor(e){return e}},Bn=class{constructor(){return Jh()}};function GH(t){return t&&t.length===1?t[0]:new fn(ar())}var gv=new G("angularfire2._apps"),WH={provide:fn,useFactory:GH,deps:[[new He,gv]]},KH={provide:Bn,deps:[[new He,gv]]};function QH(t){return(e,n)=>{let r=n.get(_i);Me("angularfire",jn.full,"core"),Me("angularfire",jn.full,"app"),Me("angular",PS.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new fn(i)}}function bR(t,...e){return Gt([WH,KH,{provide:gv,useFactory:QH(t),multi:!0,deps:[be,Rt,ur,...e]}])}var TR=Xe(pv,!0);function $R(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var HR=$R,qR=new Lr("auth","Firebase",$R());var of=new sr("@firebase/auth");function YH(t,...e){of.logLevel<=fe.WARN&&of.warn(`Auth (${Dn}): ${t}`,...e)}function tf(t,...e){of.logLevel<=fe.ERROR&&of.error(`Auth (${Dn}): ${t}`,...e)}function dr(t,...e){throw Uv(t,...e)}function Os(t,...e){return Uv(t,...e)}function zR(t,e,n){let r=Object.assign(Object.assign({},HR()),{[e]:n});return new Lr("auth","Firebase",r).create(e,{appName:t.name})}function $r(t){return zR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Uv(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return qR.create(t,...e)}function ee(t,e,...n){if(!t)throw Uv(e,...n)}function jr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw tf(e),new Error(e)}function Pi(t,e){t||jr(e)}function wv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function JH(){return DR()==="http:"||DR()==="https:"}function DR(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function XH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JH()||tR()||"connection"in navigator)?navigator.onLine:!0}function ZH(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Fs=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pi(n>e,"Short delay should be less than long delay!"),this.isMobile=lu()||Wh()}get(){return XH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function jv(t,e){Pi(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var af=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var eq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var tq=new Fs(3e4,6e4);function ki(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Oi(s,o,a,c){return v(this,arguments,function*(t,e,n,r,i={}){return GR(t,i,()=>v(this,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let f=Ns(Object.assign({key:t.config.apiKey},d)).slice(1),m=yield t._getAdditionalHeaders();return m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode),af.fetch()(WR(t,t.config.apiHost,n,f),Object.assign({method:e,headers:m,referrerPolicy:"no-referrer"},l))}))})}function GR(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},eq),e);try{let i=new Iv(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw ef(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ef(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ef(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw ef(t,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw zR(t,d,l);dr(t,d)}}catch(i){if(i instanceof $t)throw i;dr(t,"network-request-failed",{message:String(i)})}})}function bu(s,o,a,c){return v(this,arguments,function*(t,e,n,r,i={}){let l=yield Oi(t,e,n,r,i);return"mfaPendingCredential"in l&&dr(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function WR(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?jv(t.config,i):`${t.config.apiScheme}://${i}`}function nq(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Iv=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Os(this.auth,"network-request-failed")),tq.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function ef(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Os(t,e,r);return i.customData._tokenResponse=n,i}function SR(t){return t!==void 0&&t.enterprise!==void 0}var Ev=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return nq(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function rq(t,e){return v(this,null,function*(){return Oi(t,"GET","/v2/recaptchaConfig",ki(t,e))})}function iq(t,e){return v(this,null,function*(){return Oi(t,"POST","/v1/accounts:delete",e)})}function KR(t,e){return v(this,null,function*(){return Oi(t,"POST","/v1/accounts:lookup",e)})}function yu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Bv(t,e=!1){return v(this,null,function*(){let n=We(t),r=yield n.getIdToken(e),i=$v(r);ee(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:yu(yv(i.auth_time)),issuedAtTime:yu(yv(i.iat)),expirationTime:yu(yv(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function yv(t){return Number(t)*1e3}function $v(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return tf("JWT malformed, contained fewer than 3 sections"),null;try{let i=uu(n);return i?JSON.parse(i):(tf("Failed to decode base64 JWT payload"),null)}catch(i){return tf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function AR(t){let e=$v(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function vu(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof $t&&sq(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function sq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Cv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var wu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yu(this.lastLoginAt),this.creationTime=yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function cf(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield vu(t,KR(n,{idToken:r}));ee(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?QR(s.providerUserInfo):[],a=oq(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,d=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new wu(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)})}function Hv(t){return v(this,null,function*(){let e=We(t);yield cf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function oq(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function QR(t){return t.map(e=>{var{providerId:n}=e,r=Bm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function aq(t,e){return v(this,null,function*(){let n=yield GR(t,{},()=>v(this,null,function*(){let r=Ns({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=WR(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",af.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function cq(t,e){return v(this,null,function*(){return Oi(t,"POST","/v2/accounts:revokeToken",ki(t,e))})}var _u=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):AR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");let n=AR(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield aq(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ee(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ee(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return jr("not implemented")}};function Mi(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var ua=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Bm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new wu(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield vu(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Bv(this,e)}reload(){return Hv(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield cf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Un(this.auth.app))return Promise.reject($r(this.auth));let e=yield this.getIdToken();return yield vu(this,iq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,d;let f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,O=(l=n.createdAt)!==null&&l!==void 0?l:void 0,H=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:B,emailVerified:z,isAnonymous:Re,providerData:re,stsTokenManager:b}=n;ee(B&&b,e,"internal-error");let _=_u.fromJSON(this.name,b);ee(typeof B=="string",e,"internal-error"),Mi(f,e.name),Mi(m,e.name),ee(typeof z=="boolean",e,"internal-error"),ee(typeof Re=="boolean",e,"internal-error"),Mi(y,e.name),Mi(E,e.name),Mi(x,e.name),Mi(R,e.name),Mi(O,e.name),Mi(H,e.name);let w=new t({uid:B,auth:e,email:m,emailVerified:z,displayName:f,isAnonymous:Re,photoURL:E,phoneNumber:y,tenantId:x,stsTokenManager:_,createdAt:O,lastLoginAt:H});return re&&Array.isArray(re)&&(w.providerData=re.map(C=>Object.assign({},C))),R&&(w._redirectEventId=R),w}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new _u;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield cf(s),s})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];ee(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?QR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new _u;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new wu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var RR=new Map;function Br(t){Pi(t instanceof Function,"Expected a class definition");let e=RR.get(t);return e?(Pi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,RR.set(t,e),e)}var uq=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),bv=uq;function nf(t,e,n){return`firebase:${t}:${e}:${n}`}var uf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=nf(this.userKey,i.apiKey,s),this.fullPersistenceKey=nf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ua._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(Br(bv),e,r);let i=(yield Promise.all(n.map(l=>v(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Br(bv),o=nf(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let d=yield l._get(o);if(d){let f=ua._fromJSON(e,d);l!==s&&(a=f),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>v(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function xR(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(XR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ex(e))return"Blackberry";if(tx(e))return"Webos";if(qv(e))return"Safari";if((e.includes("chrome/")||JR(e))&&!e.includes("edge/"))return"Chrome";if(ZR(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function YR(t=ft()){return/firefox\//i.test(t)}function qv(t=ft()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JR(t=ft()){return/crios\//i.test(t)}function XR(t=ft()){return/iemobile/i.test(t)}function ZR(t=ft()){return/android/i.test(t)}function ex(t=ft()){return/blackberry/i.test(t)}function tx(t=ft()){return/webos/i.test(t)}function yf(t=ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lq(t=ft()){var e;return yf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function dq(){return nR()&&document.documentMode===10}function nx(t=ft()){return yf(t)||ZR(t)||tx(t)||ex(t)||/windows phone/i.test(t)||XR(t)}function hq(){try{return!!(window&&window!==window.top)}catch{return!1}}function rx(t,e=[]){let n;switch(t){case"Browser":n=xR(ft());break;case"Worker":n=`${xR(ft())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Dn}/${r}`}var Tv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function fq(n){return v(this,arguments,function*(t,e={}){return Oi(t,"GET","/v2/passwordPolicy",ki(t,e))})}var pq=6,Dv=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:pq,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Sv=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lf(this),this.idTokenSubscription=new lf(this),this.beforeStateQueue=new Tv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Br(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield uf.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield KR(this,{idToken:e}),r=yield ua._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(Un(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield cf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=ZH()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Un(this.app))return Promise.reject($r(this));let n=e?We(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Un(this.app)?Promise.reject($r(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Un(this.app)?Promise.reject($r(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Br(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield fq(this),n=new Dv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Lr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield cq(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Br(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=yield uf.create(this,[Br(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&YH(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Vs(t){return We(t)}var lf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=cR(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var _f={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mq(t){_f=t}function ix(t){return _f.loadJS(t)}function gq(){return _f.recaptchaEnterpriseScript}function yq(){return _f.gapiScript}function sx(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var _q="recaptcha-enterprise",vq="NO_RECAPTCHA",Av=class{constructor(e){this.type=_q,this.auth=Vs(e)}verify(e="verify",n=!1){return v(this,null,function*(){function r(s){return v(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>v(this,null,function*(){rq(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Ev(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;SR(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(vq)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&SR(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=gq();c.length!==0&&(c+=a),ix(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function NR(t,e,n,r=!1){return v(this,null,function*(){let i=new Av(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function Rv(t,e,n,r){return v(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield NR(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>v(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield NR(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function zv(t,e){let n=Vr(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(xs(s,e??{}))return i;dr(i,"already-initialized")}return n.initialize({options:e})}function wq(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Br);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Gv(t,e,n){let r=Vs(t);ee(r._canInitEmulator,r,"emulator-config-failed"),ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=ox(e),{host:o,port:a}=Iq(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Eq()}function ox(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Iq(t){let e=ox(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:MR(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:MR(o)}}}function MR(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function Eq(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Iu=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return jr("not implemented")}_getIdTokenResponse(e){return jr("not implemented")}_linkToIdToken(e,n){return jr("not implemented")}_getReauthenticationResolver(e){return jr("not implemented")}};function Cq(t,e){return v(this,null,function*(){return Oi(t,"POST","/v1/accounts:signUp",e)})}function bq(t,e){return v(this,null,function*(){return bu(t,"POST","/v1/accounts:signInWithPassword",ki(t,e))})}function Tq(t,e){return v(this,null,function*(){return bu(t,"POST","/v1/accounts:signInWithEmailLink",ki(t,e))})}function Dq(t,e){return v(this,null,function*(){return bu(t,"POST","/v1/accounts:signInWithEmailLink",ki(t,e))})}var Eu=class t extends Iu{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rv(e,n,"signInWithPassword",bq);case"emailLink":return Tq(e,{email:this._email,oobCode:this._password});default:dr(e,"internal-error")}})}_linkToIdToken(e,n){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rv(e,r,"signUpPassword",Cq);case"emailLink":return Dq(e,{idToken:n,email:this._email,oobCode:this._password});default:dr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function _v(t,e){return v(this,null,function*(){return bu(t,"POST","/v1/accounts:signInWithIdp",ki(t,e))})}function Sq(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Aq(t){let e=oa(aa(t)).link,n=e?oa(aa(e)).deep_link_id:null,r=oa(aa(t)).deep_link_id;return(r?oa(aa(r)).link:null)||r||n||e||t}var df=class t{constructor(e){var n,r,i,s,o,a;let c=oa(aa(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,f=Sq((i=c.mode)!==null&&i!==void 0?i:null);ee(l&&d&&f,"argument-error"),this.apiKey=l,this.operation=f,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=Aq(e);try{return new t(n)}catch{return null}}};var ax=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Eu._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=df.parseLink(r);return ee(i,"argument-error"),Eu._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),hf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var xv=class extends hf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Rq(t,e){return v(this,null,function*(){return bu(t,"POST","/v1/accounts:signUp",ki(t,e))})}var la=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return v(this,null,function*(){let s=yield ua._fromIdTokenResponse(e,r,i),o=PR(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=PR(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function PR(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Nv=class t extends $t{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function cx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Nv._fromErrorAndOperation(t,s,e,r):s})}function xq(t,e,n=!1){return v(this,null,function*(){let r=yield vu(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return la._forOperation(t,"link",r)})}function Nq(t,e,n=!1){return v(this,null,function*(){let{auth:r}=t;if(Un(r.app))return Promise.reject($r(r));let i="reauthenticate";try{let s=yield vu(t,cx(r,i,e,t),n);ee(s.idToken,r,"internal-error");let o=$v(s.idToken);ee(o,r,"internal-error");let{sub:a}=o;return ee(t.uid===a,r,"user-mismatch"),la._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&dr(r,"user-mismatch"),s}})}function ux(t,e,n=!1){return v(this,null,function*(){if(Un(t.app))return Promise.reject($r(t));let r="signIn",i=yield cx(t,r,e),s=yield la._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Wv(t,e){return v(this,null,function*(){return ux(Vs(t),e)})}function lx(t){return v(this,null,function*(){let e=Vs(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Kv(t,e,n){return v(this,null,function*(){if(Un(t.app))return Promise.reject($r(t));let r=Vs(t),o=yield Rv(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Rq).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&lx(t),c}),a=yield la._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function Qv(t,e,n){return Un(t.app)?Promise.reject($r(t)):Wv(We(t),ax.credential(e,n)).catch(r=>v(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&lx(t),r}))}function Yv(t,e,n,r){return We(t).onIdTokenChanged(e,n,r)}function Jv(t,e,n){return We(t).beforeAuthStateChanged(e,n)}function Xv(t,e,n,r){return We(t).onAuthStateChanged(e,n,r)}function Zv(t){return We(t).signOut()}var ff="__sak";var pf=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ff,"1"),this.storage.removeItem(ff),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function Mq(){let t=ft();return qv(t)||yf(t)}var Pq=1e3,kq=10,Oq=(()=>{class t extends pf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Mq()&&hq(),this.fallbackToPolling=nx(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);dq()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,kq):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},Pq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return v(this,null,function*(){yield si(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return v(this,null,function*(){let r=yield si(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return v(this,null,function*(){yield si(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),dx=Oq;var Fq=(()=>{class t extends pf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),ew=Fq;function Lq(t){return Promise.all(t.map(e=>v(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var Vq=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return v(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(d=>v(this,null,function*(){return d(r.origin,o)})),l=yield Lq(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function hx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Mv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=hx("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let m=f;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function lr(){return window}function Uq(t){lr().location.href=t}function fx(){return typeof lr().WorkerGlobalScope<"u"&&typeof lr().importScripts=="function"}function jq(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Bq(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function $q(){return fx()?self:null}var px="firebaseLocalStorageDb",Hq=1,mf="firebaseLocalStorage",mx="fbase_key",Ls=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function vf(t,e){return t.transaction([mf],e?"readwrite":"readonly").objectStore(mf)}function qq(){let t=indexedDB.deleteDatabase(px);return new Ls(t).toPromise()}function Pv(){let t=indexedDB.open(px,Hq);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(mf,{keyPath:mx})}catch(i){n(i)}}),t.addEventListener("success",()=>v(this,null,function*(){let r=t.result;r.objectStoreNames.contains(mf)?e(r):(r.close(),yield qq(),e(yield Pv()))}))})}function kR(t,e,n){return v(this,null,function*(){let r=vf(t,!0).put({[mx]:e,value:n});return new Ls(r).toPromise()})}function zq(t,e){return v(this,null,function*(){let n=vf(t,!1).get(e),r=yield new Ls(n).toPromise();return r===void 0?null:r.value})}function OR(t,e){let n=vf(t,!0).delete(e);return new Ls(n).toPromise()}var Gq=800,Wq=3,Kq=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield Pv(),this.db)})}_withRetries(n){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>Wq)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return fx()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=Vq._getInstance($q()),this.receiver._subscribe("keyChanged",(n,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var n,r;if(this.activeServiceWorker=yield jq(),!this.activeServiceWorker)return;this.sender=new Mv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Bq()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Pv();return yield kR(n,ff,"1"),yield OR(n,ff),!0}catch{}return!1})}_withPendingWrite(n){return v(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>kR(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return v(this,null,function*(){let r=yield this._withRetries(i=>zq(i,n));return this.localCache[n]=r,r})}_remove(n){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>OR(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return v(this,null,function*(){let n=yield this._withRetries(s=>{let o=vf(s,!1).getAll();return new Ls(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),Gq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),gx=Kq;var bee=sx("rcb"),Tee=new Fs(3e4,6e4);function Qq(t,e){return e?Br(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Cu=class extends Iu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _v(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _v(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _v(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function Yq(t){return ux(t.auth,new Cu(t),t.bypassAuthState)}function Jq(t){let{auth:e,user:n}=t;return ee(n,e,"internal-error"),Nq(n,new Cu(t),t.bypassAuthState)}function Xq(t){return v(this,null,function*(){let{auth:e,user:n}=t;return ee(n,e,"internal-error"),xq(n,new Cu(t),t.bypassAuthState)})}var kv=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Yq;case"linkViaPopup":case"linkViaRedirect":return Xq;case"reauthViaPopup":case"reauthViaRedirect":return Jq;default:dr(this.auth,"internal-error")}}resolve(e){Pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Dee=new Fs(2e3,1e4);var Zq="pendingRedirect",rf=new Map,Ov=class t extends kv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=rf.get(this.auth._key());if(!e){try{let r=(yield ez(this.resolver,this.auth))?yield si(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}rf.set(this.auth._key(),e)}return this.bypassAuthState||rf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return si(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,si(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function ez(t,e){return v(this,null,function*(){let n=rz(e),r=nz(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function tz(t,e){rf.set(t._key(),e)}function nz(t){return Br(t._redirectPersistence)}function rz(t){return nf(Zq,t.config.apiKey,t.name)}function iz(t,e,n=!1){return v(this,null,function*(){if(Un(t.app))return Promise.reject($r(t));let r=Vs(t),i=Qq(r,e),o=yield new Ov(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var sz=10*60*1e3,Fv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oz(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!yx(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Os(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sz&&this.cachedEventUids.clear(),this.cachedEventUids.has(FR(e))}saveEventToCache(e){this.cachedEventUids.add(FR(e)),this.lastProcessedEventTime=Date.now()}};function FR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yx({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function oz(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yx(t);default:return!1}}function az(n){return v(this,arguments,function*(t,e={}){return Oi(t,"GET","/v1/projects",e)})}var cz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uz=/^https?/;function lz(t){return v(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield az(t);for(let n of e)try{if(dz(n))return}catch{}dr(t,"unauthorized-domain")})}function dz(t){let e=wv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!uz.test(n))return!1;if(cz.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var hz=new Fs(3e4,6e4);function LR(){let t=lr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function fz(t){return new Promise((e,n)=>{var r,i,s;function o(){LR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{LR(),n(Os(t,"network-request-failed"))},timeout:hz.get()})}if(!((i=(r=lr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=lr().gapi)===null||s===void 0)&&s.load)o();else{let a=sx("iframefcb");return lr()[a]=()=>{gapi.load?o():n(Os(t,"network-request-failed"))},ix(`${yq()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw sf=null,e})}var sf=null;function pz(t){return sf=sf||fz(t),sf}var mz=new Fs(5e3,15e3),gz="__/auth/iframe",yz="emulator/auth/iframe",_z={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wz(t){let e=t.config;ee(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?jv(e,yz):`https://${t.config.authDomain}/${gz}`,r={apiKey:e.apiKey,appName:t.name,v:Dn},i=vz.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ns(r).slice(1)}`}function Iz(t){return v(this,null,function*(){let e=yield pz(t),n=lr().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:wz(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_z,dontclear:!0},r=>new Promise((i,s)=>v(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Os(t,"network-request-failed"),a=lr().setTimeout(()=>{s(o)},mz.get());function c(){lr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var Ez={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Cz=500,bz=600,Tz="_blank",Dz="http://localhost",gf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Sz(t,e,n,r=Cz,i=bz){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},Ez),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ft().toLowerCase();n&&(a=JR(l)?Tz:n),YR(l)&&(e=e||Dz,c.scrollbars="yes");let d=Object.entries(c).reduce((m,[y,E])=>`${m}${y}=${E},`,"");if(lq(l)&&a!=="_self")return Az(e||"",a),new gf(null);let f=window.open(e||"",a,d);ee(f,t,"popup-blocked");try{f.focus()}catch{}return new gf(f)}function Az(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Rz="__/auth/handler",xz="emulator/auth/handler",Nz=encodeURIComponent("fac");function VR(t,e,n,r,i,s){return v(this,null,function*(){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Dn,eventId:i};if(e instanceof hf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",du(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof xv){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield t._getAppCheckToken(),l=c?`#${Nz}=${encodeURIComponent(c)}`:"";return`${Mz(t)}?${Ns(a).slice(1)}${l}`})}function Mz({config:t}){return t.emulator?jv(t,xz):`https://${t.authDomain}/${Rz}`}var vv="webStorageSupport",Lv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ew,this._completeRedirectFn=iz,this._overrideRedirectResult=tz}_openPopup(e,n,r,i){return v(this,null,function*(){var s;Pi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield VR(e,n,r,wv(),i);return Sz(e,o,hx())})}_openRedirect(e,n,r,i){return v(this,null,function*(){yield this._originValidation(e);let s=yield VR(e,n,r,wv(),i);return Uq(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Pi(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return v(this,null,function*(){let n=yield Iz(e),r=new Fv(e);return n.register("authEvent",i=>(ee(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vv,{type:vv},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[vv];o!==void 0&&n(!!o),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lz(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return nx()||qv()||yf()}},_x=Lv;var UR="@firebase/auth",jR="1.7.3";var Vv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Pz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kz(t){Tn(new xt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rx(t)},l=new Sv(r,i,s,c);return wq(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Tn(new xt("auth-internal",e=>{let n=Vs(e.getProvider("auth").getImmediate());return(r=>new Vv(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Me(UR,jR,Pz(t)),Me(UR,jR,"esm2017")}var Oz=5*60,Fz=Z_("authIdTokenMaxAge")||Oz,BR=null,Lz=t=>e=>v(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Fz)return;let i=n?.token;BR!==i&&(BR=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function tw(t=ar()){let e=Vr(t,"auth");if(e.isInitialized())return e.getImmediate();let n=zv(t,{popupRedirectResolver:_x,persistence:[gx,dx,ew]}),r=Z_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=Lz(s.toString());Jv(n,o,()=>o(n.currentUser)),Yv(n,a=>o(a))}}let i=J_("auth");return i&&Gv(n,`http://${i}`),n}function Vz(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}mq({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Os("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Vz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kz("Browser");var vx="auth",pn=class{constructor(e){return e}},Hr=class{constructor(){return Ur(vx)}};var nw=new G("angularfire2.auth-instances");function SG(t,e){let n=Ni(vx,t,e);return n&&new pn(n)}function AG(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new pn(r)}}var RG={provide:Hr,deps:[[new He,nw]]},xG={provide:pn,useFactory:SG,deps:[[new He,nw],fn]};function wx(t,...e){return Me("angularfire",jn.full,"auth"),Gt([xG,RG,{provide:nw,useFactory:AG(t),multi:!0,deps:[be,Rt,ur,Bn,[new He,cr],...e]}])}var Ix=Xe(Kv,!0);var Ex=Xe(tw,!0);var Cx=Xe(Xv,!0);var bx=Xe(Qv,!0);var Tx=Xe(Zv,!0);var Dx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Sx={};var Fi,iw;(function(){var t;function e(b,_){function w(){}w.prototype=_.prototype,b.D=_.prototype,b.prototype=new w,b.prototype.constructor=b,b.C=function(C,T,S){for(var I=Array(arguments.length-2),Cr=2;Cr<arguments.length;Cr++)I[Cr-2]=arguments[Cr];return _.prototype[T].apply(C,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,_,w){w||(w=0);var C=Array(16);if(typeof _=="string")for(var T=0;16>T;++T)C[T]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(T=0;16>T;++T)C[T]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=b.g[0],w=b.g[1],T=b.g[2];var S=b.g[3],I=_+(S^w&(T^S))+C[0]+3614090360&4294967295;_=w+(I<<7&4294967295|I>>>25),I=S+(T^_&(w^T))+C[1]+3905402710&4294967295,S=_+(I<<12&4294967295|I>>>20),I=T+(w^S&(_^w))+C[2]+606105819&4294967295,T=S+(I<<17&4294967295|I>>>15),I=w+(_^T&(S^_))+C[3]+3250441966&4294967295,w=T+(I<<22&4294967295|I>>>10),I=_+(S^w&(T^S))+C[4]+4118548399&4294967295,_=w+(I<<7&4294967295|I>>>25),I=S+(T^_&(w^T))+C[5]+1200080426&4294967295,S=_+(I<<12&4294967295|I>>>20),I=T+(w^S&(_^w))+C[6]+2821735955&4294967295,T=S+(I<<17&4294967295|I>>>15),I=w+(_^T&(S^_))+C[7]+4249261313&4294967295,w=T+(I<<22&4294967295|I>>>10),I=_+(S^w&(T^S))+C[8]+1770035416&4294967295,_=w+(I<<7&4294967295|I>>>25),I=S+(T^_&(w^T))+C[9]+2336552879&4294967295,S=_+(I<<12&4294967295|I>>>20),I=T+(w^S&(_^w))+C[10]+4294925233&4294967295,T=S+(I<<17&4294967295|I>>>15),I=w+(_^T&(S^_))+C[11]+2304563134&4294967295,w=T+(I<<22&4294967295|I>>>10),I=_+(S^w&(T^S))+C[12]+1804603682&4294967295,_=w+(I<<7&4294967295|I>>>25),I=S+(T^_&(w^T))+C[13]+4254626195&4294967295,S=_+(I<<12&4294967295|I>>>20),I=T+(w^S&(_^w))+C[14]+2792965006&4294967295,T=S+(I<<17&4294967295|I>>>15),I=w+(_^T&(S^_))+C[15]+1236535329&4294967295,w=T+(I<<22&4294967295|I>>>10),I=_+(T^S&(w^T))+C[1]+4129170786&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^T&(_^w))+C[6]+3225465664&4294967295,S=_+(I<<9&4294967295|I>>>23),I=T+(_^w&(S^_))+C[11]+643717713&4294967295,T=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(T^S))+C[0]+3921069994&4294967295,w=T+(I<<20&4294967295|I>>>12),I=_+(T^S&(w^T))+C[5]+3593408605&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^T&(_^w))+C[10]+38016083&4294967295,S=_+(I<<9&4294967295|I>>>23),I=T+(_^w&(S^_))+C[15]+3634488961&4294967295,T=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(T^S))+C[4]+3889429448&4294967295,w=T+(I<<20&4294967295|I>>>12),I=_+(T^S&(w^T))+C[9]+568446438&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^T&(_^w))+C[14]+3275163606&4294967295,S=_+(I<<9&4294967295|I>>>23),I=T+(_^w&(S^_))+C[3]+4107603335&4294967295,T=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(T^S))+C[8]+1163531501&4294967295,w=T+(I<<20&4294967295|I>>>12),I=_+(T^S&(w^T))+C[13]+2850285829&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^T&(_^w))+C[2]+4243563512&4294967295,S=_+(I<<9&4294967295|I>>>23),I=T+(_^w&(S^_))+C[7]+1735328473&4294967295,T=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(T^S))+C[12]+2368359562&4294967295,w=T+(I<<20&4294967295|I>>>12),I=_+(w^T^S)+C[5]+4294588738&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^T)+C[8]+2272392833&4294967295,S=_+(I<<11&4294967295|I>>>21),I=T+(S^_^w)+C[11]+1839030562&4294967295,T=S+(I<<16&4294967295|I>>>16),I=w+(T^S^_)+C[14]+4259657740&4294967295,w=T+(I<<23&4294967295|I>>>9),I=_+(w^T^S)+C[1]+2763975236&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^T)+C[4]+1272893353&4294967295,S=_+(I<<11&4294967295|I>>>21),I=T+(S^_^w)+C[7]+4139469664&4294967295,T=S+(I<<16&4294967295|I>>>16),I=w+(T^S^_)+C[10]+3200236656&4294967295,w=T+(I<<23&4294967295|I>>>9),I=_+(w^T^S)+C[13]+681279174&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^T)+C[0]+3936430074&4294967295,S=_+(I<<11&4294967295|I>>>21),I=T+(S^_^w)+C[3]+3572445317&4294967295,T=S+(I<<16&4294967295|I>>>16),I=w+(T^S^_)+C[6]+76029189&4294967295,w=T+(I<<23&4294967295|I>>>9),I=_+(w^T^S)+C[9]+3654602809&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^T)+C[12]+3873151461&4294967295,S=_+(I<<11&4294967295|I>>>21),I=T+(S^_^w)+C[15]+530742520&4294967295,T=S+(I<<16&4294967295|I>>>16),I=w+(T^S^_)+C[2]+3299628645&4294967295,w=T+(I<<23&4294967295|I>>>9),I=_+(T^(w|~S))+C[0]+4096336452&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~T))+C[7]+1126891415&4294967295,S=_+(I<<10&4294967295|I>>>22),I=T+(_^(S|~w))+C[14]+2878612391&4294967295,T=S+(I<<15&4294967295|I>>>17),I=w+(S^(T|~_))+C[5]+4237533241&4294967295,w=T+(I<<21&4294967295|I>>>11),I=_+(T^(w|~S))+C[12]+1700485571&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~T))+C[3]+2399980690&4294967295,S=_+(I<<10&4294967295|I>>>22),I=T+(_^(S|~w))+C[10]+4293915773&4294967295,T=S+(I<<15&4294967295|I>>>17),I=w+(S^(T|~_))+C[1]+2240044497&4294967295,w=T+(I<<21&4294967295|I>>>11),I=_+(T^(w|~S))+C[8]+1873313359&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~T))+C[15]+4264355552&4294967295,S=_+(I<<10&4294967295|I>>>22),I=T+(_^(S|~w))+C[6]+2734768916&4294967295,T=S+(I<<15&4294967295|I>>>17),I=w+(S^(T|~_))+C[13]+1309151649&4294967295,w=T+(I<<21&4294967295|I>>>11),I=_+(T^(w|~S))+C[4]+4149444226&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~T))+C[11]+3174756917&4294967295,S=_+(I<<10&4294967295|I>>>22),I=T+(_^(S|~w))+C[2]+718787259&4294967295,T=S+(I<<15&4294967295|I>>>17),I=w+(S^(T|~_))+C[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(T+(I<<21&4294967295|I>>>11))&4294967295,b.g[2]=b.g[2]+T&4294967295,b.g[3]=b.g[3]+S&4294967295}r.prototype.u=function(b,_){_===void 0&&(_=b.length);for(var w=_-this.blockSize,C=this.B,T=this.h,S=0;S<_;){if(T==0)for(;S<=w;)i(this,b,S),S+=this.blockSize;if(typeof b=="string"){for(;S<_;)if(C[T++]=b.charCodeAt(S++),T==this.blockSize){i(this,C),T=0;break}}else for(;S<_;)if(C[T++]=b[S++],T==this.blockSize){i(this,C),T=0;break}}this.h=T,this.o+=_},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;var w=8*this.o;for(_=b.length-8;_<b.length;++_)b[_]=w&255,w/=256;for(this.u(b),b=Array(16),_=w=0;4>_;++_)for(var C=0;32>C;C+=8)b[w++]=this.g[_]>>>C&255;return b};function s(b,_){var w=a;return Object.prototype.hasOwnProperty.call(w,b)?w[b]:w[b]=_(b)}function o(b,_){this.h=_;for(var w=[],C=!0,T=b.length-1;0<=T;T--){var S=b[T]|0;C&&S==_||(w[T]=S,C=!1)}this.g=w}var a={};function c(b){return-128<=b&&128>b?s(b,function(_){return new o([_|0],0>_?-1:0)}):new o([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return f;if(0>b)return R(l(-b));for(var _=[],w=1,C=0;b>=w;C++)_[C]=b/w|0,w*=4294967296;return new o(_,0)}function d(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return R(d(b.substring(1),_));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(_,8)),C=f,T=0;T<b.length;T+=8){var S=Math.min(8,b.length-T),I=parseInt(b.substring(T,T+S),_);8>S?(S=l(Math.pow(_,S)),C=C.j(S).add(l(I))):(C=C.j(w),C=C.add(l(I)))}return C}var f=c(0),m=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(x(this))return-R(this).m();for(var b=0,_=1,w=0;w<this.g.length;w++){var C=this.i(w);b+=(0<=C?C:4294967296+C)*_,_*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(E(this))return"0";if(x(this))return"-"+R(this).toString(b);for(var _=l(Math.pow(b,6)),w=this,C="";;){var T=z(w,_).g;w=O(w,T.j(_));var S=((0<w.g.length?w.g[0]:w.h)>>>0).toString(b);if(w=T,E(w))return S+C;for(;6>S.length;)S="0"+S;C=S+C}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function E(b){if(b.h!=0)return!1;for(var _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function x(b){return b.h==-1}t.l=function(b){return b=O(this,b),x(b)?-1:E(b)?0:1};function R(b){for(var _=b.g.length,w=[],C=0;C<_;C++)w[C]=~b.g[C];return new o(w,~b.h).add(m)}t.abs=function(){return x(this)?R(this):this},t.add=function(b){for(var _=Math.max(this.g.length,b.g.length),w=[],C=0,T=0;T<=_;T++){var S=C+(this.i(T)&65535)+(b.i(T)&65535),I=(S>>>16)+(this.i(T)>>>16)+(b.i(T)>>>16);C=I>>>16,S&=65535,I&=65535,w[T]=I<<16|S}return new o(w,w[w.length-1]&-2147483648?-1:0)};function O(b,_){return b.add(R(_))}t.j=function(b){if(E(this)||E(b))return f;if(x(this))return x(b)?R(this).j(R(b)):R(R(this).j(b));if(x(b))return R(this.j(R(b)));if(0>this.l(y)&&0>b.l(y))return l(this.m()*b.m());for(var _=this.g.length+b.g.length,w=[],C=0;C<2*_;C++)w[C]=0;for(C=0;C<this.g.length;C++)for(var T=0;T<b.g.length;T++){var S=this.i(C)>>>16,I=this.i(C)&65535,Cr=b.i(T)>>>16,ec=b.i(T)&65535;w[2*C+2*T]+=I*ec,H(w,2*C+2*T),w[2*C+2*T+1]+=S*ec,H(w,2*C+2*T+1),w[2*C+2*T+1]+=I*Cr,H(w,2*C+2*T+1),w[2*C+2*T+2]+=S*Cr,H(w,2*C+2*T+2)}for(C=0;C<_;C++)w[C]=w[2*C+1]<<16|w[2*C];for(C=_;C<2*_;C++)w[C]=0;return new o(w,0)};function H(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function B(b,_){this.g=b,this.h=_}function z(b,_){if(E(_))throw Error("division by zero");if(E(b))return new B(f,f);if(x(b))return _=z(R(b),_),new B(R(_.g),R(_.h));if(x(_))return _=z(b,R(_)),new B(R(_.g),_.h);if(30<b.g.length){if(x(b)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var w=m,C=_;0>=C.l(b);)w=Re(w),C=Re(C);var T=re(w,1),S=re(C,1);for(C=re(C,2),w=re(w,2);!E(C);){var I=S.add(C);0>=I.l(b)&&(T=T.add(w),S=I),C=re(C,1),w=re(w,1)}return _=O(b,T.j(_)),new B(T,_)}for(T=f;0<=b.l(_);){for(w=Math.max(1,Math.floor(b.m()/_.m())),C=Math.ceil(Math.log(w)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),S=l(w),I=S.j(_);x(I)||0<I.l(b);)w-=C,S=l(w),I=S.j(_);E(S)&&(S=m),T=T.add(S),b=O(b,I)}return new B(T,b)}t.A=function(b){return z(this,b).h},t.and=function(b){for(var _=Math.max(this.g.length,b.g.length),w=[],C=0;C<_;C++)w[C]=this.i(C)&b.i(C);return new o(w,this.h&b.h)},t.or=function(b){for(var _=Math.max(this.g.length,b.g.length),w=[],C=0;C<_;C++)w[C]=this.i(C)|b.i(C);return new o(w,this.h|b.h)},t.xor=function(b){for(var _=Math.max(this.g.length,b.g.length),w=[],C=0;C<_;C++)w[C]=this.i(C)^b.i(C);return new o(w,this.h^b.h)};function Re(b){for(var _=b.g.length+1,w=[],C=0;C<_;C++)w[C]=b.i(C)<<1|b.i(C-1)>>>31;return new o(w,b.h)}function re(b,_){var w=_>>5;_%=32;for(var C=b.g.length-w,T=[],S=0;S<C;S++)T[S]=0<_?b.i(S+w)>>>_|b.i(S+w+1)<<32-_:b.i(S+w);return new o(T,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,iw=Sx.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,Fi=Sx.Integer=o}).apply(typeof Dx<"u"?Dx:typeof self<"u"?self:typeof window<"u"?window:{});var wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qr={};var sw,ow,da,aw,Tu,If,cw,uw,lw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof wf=="object"&&wf];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var D=u[g];if(!(D in p))break e;p=p[D]}u=u[u.length-1],g=p[u],h=h(g),h!=g&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var p=0,g=!1,D={next:function(){if(!g&&p<u.length){var A=p++;return{value:h(A,u[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(u){return u||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),u.apply(h,D)}}return function(){return u.apply(h,arguments)}}function m(u,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function y(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function E(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(g,D,A){for(var F=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)F[Fe-2]=arguments[Fe];return h.prototype[D].apply(g,F)}}function x(u){let h=u.length;if(0<h){let p=Array(h);for(let g=0;g<h;g++)p[g]=u[g];return p}return[]}function R(u,h){for(let p=1;p<arguments.length;p++){let g=arguments[p];if(c(g)){let D=u.length||0,A=g.length||0;u.length=D+A;for(let F=0;F<A;F++)u[D+F]=g[F]}else u.push(g)}}class O{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function H(u){return/^[\s\xa0]*$/.test(u)}function B(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function z(u){return z[" "](u),u}z[" "]=function(){};var Re=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function re(u,h,p){for(let g in u)h.call(p,u[g],g,u)}function b(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function _(u){let h={};for(let p in u)h[p]=u[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,h){let p,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(p in g)u[p]=g[p];for(let A=0;A<w.length;A++)p=w[A],Object.prototype.hasOwnProperty.call(g,p)&&(u[p]=g[p])}}function T(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function S(u){a.setTimeout(()=>{throw u},0)}function I(){var u=Zp;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class Cr{constructor(){this.h=this.g=null}add(h,p){let g=ec.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var ec=new O(()=>new sO,u=>u.reset());class sO{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let tc,nc=!1,Zp=new Cr,db=()=>{let u=a.Promise.resolve(void 0);tc=()=>{u.then(oO)}};var oO=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(p){S(p)}var h=ec;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}nc=!1};function ti(){this.s=this.s,this.C=this.C}ti.prototype.s=!1,ti.prototype.ma=function(){this.s||(this.s=!0,this.N())},ti.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ct(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}Ct.prototype.h=function(){this.defaultPrevented=!0};var aO=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function rc(u,h){if(Ct.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(Re){e:{try{z(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:cO[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&rc.aa.h.call(this)}}E(rc,Ct);var cO={2:"touch",3:"pen",4:"mouse"};rc.prototype.h=function(){rc.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ic="closure_listenable_"+(1e6*Math.random()|0),uO=0;function lO(u,h,p,g,D){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=D,this.key=++uO,this.da=this.fa=!1}function bl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Tl(u){this.src=u,this.g={},this.h=0}Tl.prototype.add=function(u,h,p,g,D){var A=u.toString();u=this.g[A],u||(u=this.g[A]=[],this.h++);var F=tm(u,h,g,D);return-1<F?(h=u[F],p||(h.fa=!1)):(h=new lO(h,this.src,A,!!g,D),h.fa=p,u.push(h)),h};function em(u,h){var p=h.type;if(p in u.g){var g=u.g[p],D=Array.prototype.indexOf.call(g,h,void 0),A;(A=0<=D)&&Array.prototype.splice.call(g,D,1),A&&(bl(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function tm(u,h,p,g){for(var D=0;D<u.length;++D){var A=u[D];if(!A.da&&A.listener==h&&A.capture==!!p&&A.ha==g)return D}return-1}var nm="closure_lm_"+(1e6*Math.random()|0),rm={};function hb(u,h,p,g,D){if(g&&g.once)return pb(u,h,p,g,D);if(Array.isArray(h)){for(var A=0;A<h.length;A++)hb(u,h[A],p,g,D);return null}return p=am(p),u&&u[ic]?u.K(h,p,l(g)?!!g.capture:!!g,D):fb(u,h,p,!1,g,D)}function fb(u,h,p,g,D,A){if(!h)throw Error("Invalid event type");var F=l(D)?!!D.capture:!!D,Fe=sm(u);if(Fe||(u[nm]=Fe=new Tl(u)),p=Fe.add(h,p,g,F,A),p.proxy)return p;if(g=dO(),p.proxy=g,g.src=u,g.listener=p,u.addEventListener)aO||(D=F),D===void 0&&(D=!1),u.addEventListener(h.toString(),g,D);else if(u.attachEvent)u.attachEvent(gb(h.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function dO(){function u(p){return h.call(u.src,u.listener,p)}let h=hO;return u}function pb(u,h,p,g,D){if(Array.isArray(h)){for(var A=0;A<h.length;A++)pb(u,h[A],p,g,D);return null}return p=am(p),u&&u[ic]?u.L(h,p,l(g)?!!g.capture:!!g,D):fb(u,h,p,!0,g,D)}function mb(u,h,p,g,D){if(Array.isArray(h))for(var A=0;A<h.length;A++)mb(u,h[A],p,g,D);else g=l(g)?!!g.capture:!!g,p=am(p),u&&u[ic]?(u=u.i,h=String(h).toString(),h in u.g&&(A=u.g[h],p=tm(A,p,g,D),-1<p&&(bl(A[p]),Array.prototype.splice.call(A,p,1),A.length==0&&(delete u.g[h],u.h--)))):u&&(u=sm(u))&&(h=u.g[h.toString()],u=-1,h&&(u=tm(h,p,g,D)),(p=-1<u?h[u]:null)&&im(p))}function im(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[ic])em(h.i,u);else{var p=u.type,g=u.proxy;h.removeEventListener?h.removeEventListener(p,g,u.capture):h.detachEvent?h.detachEvent(gb(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=sm(h))?(em(p,u),p.h==0&&(p.src=null,h[nm]=null)):bl(u)}}}function gb(u){return u in rm?rm[u]:rm[u]="on"+u}function hO(u,h){if(u.da)u=!0;else{h=new rc(h,this);var p=u.listener,g=u.ha||u.src;u.fa&&im(u),u=p.call(g,h)}return u}function sm(u){return u=u[nm],u instanceof Tl?u:null}var om="__closure_events_fn_"+(1e9*Math.random()>>>0);function am(u){return typeof u=="function"?u:(u[om]||(u[om]=function(h){return u.handleEvent(h)}),u[om])}function bt(){ti.call(this),this.i=new Tl(this),this.M=this,this.F=null}E(bt,ti),bt.prototype[ic]=!0,bt.prototype.removeEventListener=function(u,h,p,g){mb(this,u,h,p,g)};function kt(u,h){var p,g=u.F;if(g)for(p=[];g;g=g.F)p.push(g);if(u=u.M,g=h.type||h,typeof h=="string")h=new Ct(h,u);else if(h instanceof Ct)h.target=h.target||u;else{var D=h;h=new Ct(g,u),C(h,D)}if(D=!0,p)for(var A=p.length-1;0<=A;A--){var F=h.g=p[A];D=Dl(F,g,!0,h)&&D}if(F=h.g=u,D=Dl(F,g,!0,h)&&D,D=Dl(F,g,!1,h)&&D,p)for(A=0;A<p.length;A++)F=h.g=p[A],D=Dl(F,g,!1,h)&&D}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],g=0;g<p.length;g++)bl(p[g]);delete u.g[h],u.h--}}this.F=null},bt.prototype.K=function(u,h,p,g){return this.i.add(String(u),h,!1,p,g)},bt.prototype.L=function(u,h,p,g){return this.i.add(String(u),h,!0,p,g)};function Dl(u,h,p,g){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,A=0;A<h.length;++A){var F=h[A];if(F&&!F.da&&F.capture==p){var Fe=F.listener,_t=F.ha||F.src;F.fa&&em(u.i,F),D=Fe.call(_t,g)!==!1&&D}}return D&&!g.defaultPrevented}function yb(u,h,p){if(typeof u=="function")p&&(u=m(u,p));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function _b(u){u.g=yb(()=>{u.g=null,u.i&&(u.i=!1,_b(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class fO extends ti{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:_b(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sc(u){ti.call(this),this.h=u,this.g={}}E(sc,ti);var vb=[];function wb(u){re(u.g,function(h,p){this.g.hasOwnProperty(p)&&im(h)},u),u.g={}}sc.prototype.N=function(){sc.aa.N.call(this),wb(this)},sc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cm=a.JSON.stringify,pO=a.JSON.parse,mO=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function um(){}um.prototype.h=null;function Ib(u){return u.h||(u.h=u.i())}function Eb(){}var oc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function lm(){Ct.call(this,"d")}E(lm,Ct);function dm(){Ct.call(this,"c")}E(dm,Ct);var qi={},Cb=null;function Sl(){return Cb=Cb||new bt}qi.La="serverreachability";function bb(u){Ct.call(this,qi.La,u)}E(bb,Ct);function ac(u){let h=Sl();kt(h,new bb(h))}qi.STAT_EVENT="statevent";function Tb(u,h){Ct.call(this,qi.STAT_EVENT,u),this.stat=h}E(Tb,Ct);function Ot(u){let h=Sl();kt(h,new Tb(h,u))}qi.Ma="timingevent";function Db(u,h){Ct.call(this,qi.Ma,u),this.size=h}E(Db,Ct);function cc(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function uc(){this.g=!0}uc.prototype.xa=function(){this.g=!1};function gO(u,h,p,g,D,A){u.info(function(){if(u.g)if(A)for(var F="",Fe=A.split("&"),_t=0;_t<Fe.length;_t++){var Ce=Fe[_t].split("=");if(1<Ce.length){var Tt=Ce[0];Ce=Ce[1];var Dt=Tt.split("_");F=2<=Dt.length&&Dt[1]=="type"?F+(Tt+"="+Ce+"&"):F+(Tt+"=redacted&")}}else F=null;else F=A;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+h+`
`+p+`
`+F})}function yO(u,h,p,g,D,A,F){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+h+`
`+p+`
`+A+" "+F})}function oo(u,h,p,g){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+vO(u,p)+(g?" "+g:"")})}function _O(u,h){u.info(function(){return"TIMEOUT: "+h})}uc.prototype.info=function(){};function vO(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var g=p[u];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var A=D[0];if(A!="noop"&&A!="stop"&&A!="close")for(var F=1;F<D.length;F++)D[F]=""}}}}return cm(p)}catch{return h}}var Al={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hm;function Rl(){}E(Rl,um),Rl.prototype.g=function(){return new XMLHttpRequest},Rl.prototype.i=function(){return{}},hm=new Rl;function ni(u,h,p,g){this.j=u,this.i=h,this.l=p,this.R=g||1,this.U=new sc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ab}function Ab(){this.i=null,this.g="",this.h=!1}var Rb={},fm={};function pm(u,h,p){u.L=1,u.v=Pl(br(h)),u.m=p,u.P=!0,xb(u,null)}function xb(u,h){u.F=Date.now(),xl(u),u.A=br(u.v);var p=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),qb(p.i,"t",g),u.C=0,p=u.j.J,u.h=new Ab,u.g=cT(u.j,p?h:null,!u.m),0<u.O&&(u.M=new fO(m(u.Y,u,u.g),u.O)),h=u.U,p=u.g,g=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(vb[0]=D.toString()),D=vb);for(var A=0;A<D.length;A++){var F=hb(p,D[A],g||h.handleEvent,!1,h.h||h);if(!F)break;h.g[F.key]=F}h=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),ac(),gO(u.i,u.u,u.A,u.l,u.R,u.m)}ni.prototype.ca=function(u){u=u.target;let h=this.M;h&&Tr(u)==3?h.j():this.Y(u)},ni.prototype.Y=function(u){try{if(u==this.g)e:{let Dt=Tr(this.g);var h=this.g.Ba();let uo=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||Jb(this.g)))){this.J||Dt!=4||h==7||(h==8||0>=uo?ac(3):ac(2)),mm(this);var p=this.g.Z();this.X=p;t:if(Nb(this)){var g=Jb(this.g);u="";var D=g.length,A=Tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zi(this),lc(this);var F="";break t}this.h.i=new a.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,u+=this.h.i.decode(g[h],{stream:!(A&&h==D-1)});g.length=0,this.h.g+=u,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=p==200,yO(this.i,this.u,this.A,this.l,this.R,Dt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,_t=this.g;if((Fe=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Fe)){var Ce=Fe;break t}}Ce=null}if(p=Ce)oo(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gm(this,p);else{this.o=!1,this.s=3,Ot(12),zi(this),lc(this);break e}}if(this.P){p=!0;let Rn;for(;!this.J&&this.C<F.length;)if(Rn=wO(this,F),Rn==fm){Dt==4&&(this.s=4,Ot(14),p=!1),oo(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==Rb){this.s=4,Ot(15),oo(this.i,this.l,F,"[Invalid Chunk]"),p=!1;break}else oo(this.i,this.l,Rn,null),gm(this,Rn);if(Nb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||F.length!=0||this.h.h||(this.s=1,Ot(16),p=!1),this.o=this.o&&p,!p)oo(this.i,this.l,F,"[Invalid Chunked Response]"),zi(this),lc(this);else if(0<F.length&&!this.W){this.W=!0;var Tt=this.j;Tt.g==this&&Tt.ba&&!Tt.M&&(Tt.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),Em(Tt),Tt.M=!0,Ot(11))}}else oo(this.i,this.l,F,null),gm(this,F);Dt==4&&zi(this),this.o&&!this.J&&(Dt==4?iT(this.j,this):(this.o=!1,xl(this)))}else LO(this.g),p==400&&0<F.indexOf("Unknown SID")?(this.s=3,Ot(12)):(this.s=0,Ot(13)),zi(this),lc(this)}}}catch{}finally{}};function Nb(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function wO(u,h){var p=u.C,g=h.indexOf(`
`,p);return g==-1?fm:(p=Number(h.substring(p,g)),isNaN(p)?Rb:(g+=1,g+p>h.length?fm:(h=h.slice(g,g+p),u.C=g+p,h)))}ni.prototype.cancel=function(){this.J=!0,zi(this)};function xl(u){u.S=Date.now()+u.I,Mb(u,u.I)}function Mb(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=cc(m(u.ba,u),h)}function mm(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ni.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(_O(this.i,this.A),this.L!=2&&(ac(),Ot(17)),zi(this),this.s=2,lc(this)):Mb(this,this.S-u)};function lc(u){u.j.G==0||u.J||iT(u.j,u)}function zi(u){mm(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,wb(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function gm(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||ym(p.h,u))){if(!u.K&&ym(p.h,u)&&p.G==3){try{var g=p.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)Vl(p),Fl(p);else break e;Im(p),Ot(18)}}else p.za=D[1],0<p.za-p.T&&37500>D[2]&&p.F&&p.v==0&&!p.C&&(p.C=cc(m(p.Za,p),6e3));if(1>=Ob(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Wi(p,11)}else if((u.K||p.g==u)&&Vl(p),!H(h))for(D=p.Da.g.parse(h),h=0;h<D.length;h++){let Ce=D[h];if(p.T=Ce[0],Ce=Ce[1],p.G==2)if(Ce[0]=="c"){p.K=Ce[1],p.ia=Ce[2];let Tt=Ce[3];Tt!=null&&(p.la=Tt,p.j.info("VER="+p.la));let Dt=Ce[4];Dt!=null&&(p.Aa=Dt,p.j.info("SVER="+p.Aa));let uo=Ce[5];uo!=null&&typeof uo=="number"&&0<uo&&(g=1.5*uo,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;let Rn=u.g;if(Rn){let jl=Rn.g?Rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jl){var A=g.h;A.g||jl.indexOf("spdy")==-1&&jl.indexOf("quic")==-1&&jl.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(_m(A,A.h),A.h=null))}if(g.D){let Cm=Rn.g?Rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Cm&&(g.ya=Cm,$e(g.I,g.D,Cm))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var F=u;if(g.qa=aT(g,g.J?g.ia:null,g.W),F.K){Fb(g.h,F);var Fe=F,_t=g.L;_t&&(Fe.I=_t),Fe.B&&(mm(Fe),xl(Fe)),g.g=F}else nT(g);0<p.i.length&&Ll(p)}else Ce[0]!="stop"&&Ce[0]!="close"||Wi(p,7);else p.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?Wi(p,7):wm(p):Ce[0]!="noop"&&p.l&&p.l.ta(Ce),p.v=0)}}ac(4)}catch{}}var IO=class{constructor(u,h){this.g=u,this.map=h}};function Pb(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function kb(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ob(u){return u.h?1:u.g?u.g.size:0}function ym(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function _m(u,h){u.g?u.g.add(h):u.h=h}function Fb(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}Pb.prototype.cancel=function(){if(this.i=Lb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Lb(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return x(u.i)}function EO(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,g=0;g<p;g++)h.push(u[g]);return h}h=[],p=0;for(g in u)h[p++]=u[g];return h}function CO(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let g in u)h[p++]=g;return h}}}function Vb(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=CO(u),g=EO(u),D=g.length,A=0;A<D;A++)h.call(void 0,g[A],p&&p[A],u)}var Ub=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bO(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var g=u[p].indexOf("="),D=null;if(0<=g){var A=u[p].substring(0,g);D=u[p].substring(g+1)}else A=u[p];h(A,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Gi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Gi){this.h=u.h,Nl(this,u.j),this.o=u.o,this.g=u.g,Ml(this,u.s),this.l=u.l;var h=u.i,p=new fc;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),jb(this,p),this.m=u.m}else u&&(h=String(u).match(Ub))?(this.h=!1,Nl(this,h[1]||"",!0),this.o=dc(h[2]||""),this.g=dc(h[3]||"",!0),Ml(this,h[4]),this.l=dc(h[5]||"",!0),jb(this,h[6]||"",!0),this.m=dc(h[7]||"")):(this.h=!1,this.i=new fc(null,this.h))}Gi.prototype.toString=function(){var u=[],h=this.j;h&&u.push(hc(h,Bb,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(hc(h,Bb,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(hc(p,p.charAt(0)=="/"?SO:DO,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",hc(p,RO)),u.join("")};function br(u){return new Gi(u)}function Nl(u,h,p){u.j=p?dc(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function Ml(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function jb(u,h,p){h instanceof fc?(u.i=h,xO(u.i,u.h)):(p||(h=hc(h,AO)),u.i=new fc(h,u.h))}function $e(u,h,p){u.i.set(h,p)}function Pl(u){return $e(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function dc(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function hc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,TO),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function TO(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Bb=/[#\/\?@]/g,DO=/[#\?:]/g,SO=/[#\?]/g,AO=/[#\?@]/g,RO=/#/g;function fc(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function ri(u){u.g||(u.g=new Map,u.h=0,u.i&&bO(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=fc.prototype,t.add=function(u,h){ri(this),this.i=null,u=ao(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function $b(u,h){ri(u),h=ao(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function Hb(u,h){return ri(u),h=ao(u,h),u.g.has(h)}t.forEach=function(u,h){ri(this),this.g.forEach(function(p,g){p.forEach(function(D){u.call(h,D,g,this)},this)},this)},t.na=function(){ri(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let g=0;g<h.length;g++){let D=u[g];for(let A=0;A<D.length;A++)p.push(h[g])}return p},t.V=function(u){ri(this);let h=[];if(typeof u=="string")Hb(this,u)&&(h=h.concat(this.g.get(ao(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},t.set=function(u,h){return ri(this),this.i=null,u=ao(this,u),Hb(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},t.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function qb(u,h,p){$b(u,h),0<p.length&&(u.i=null,u.g.set(ao(u,h),x(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var g=h[p];let A=encodeURIComponent(String(g)),F=this.V(g);for(g=0;g<F.length;g++){var D=A;F[g]!==""&&(D+="="+encodeURIComponent(String(F[g]))),u.push(D)}}return this.i=u.join("&")};function ao(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function xO(u,h){h&&!u.j&&(ri(u),u.i=null,u.g.forEach(function(p,g){var D=g.toLowerCase();g!=D&&($b(this,g),qb(this,D,p))},u)),u.j=h}function NO(u,h){let p=new uc;if(a.Image){let g=new Image;g.onload=y(ii,p,"TestLoadImage: loaded",!0,h,g),g.onerror=y(ii,p,"TestLoadImage: error",!1,h,g),g.onabort=y(ii,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=y(ii,p,"TestLoadImage: timeout",!1,h,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else h(!1)}function MO(u,h){let p=new uc,g=new AbortController,D=setTimeout(()=>{g.abort(),ii(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:g.signal}).then(A=>{clearTimeout(D),A.ok?ii(p,"TestPingServer: ok",!0,h):ii(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),ii(p,"TestPingServer: error",!1,h)})}function ii(u,h,p,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(p)}catch{}}function PO(){this.g=new mO}function kO(u,h,p){let g=p||"";try{Vb(u,function(D,A){let F=D;l(D)&&(F=cm(D)),h.push(g+A+"="+encodeURIComponent(F))})}catch(D){throw h.push(g+"type="+encodeURIComponent("_badmap")),D}}function pc(u){this.l=u.Ub||null,this.j=u.eb||!1}E(pc,um),pc.prototype.g=function(){return new kl(this.l,this.j)},pc.prototype.i=function(u){return function(){return u}}({});function kl(u,h){bt.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(kl,bt),t=kl.prototype,t.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,gc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mc(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,gc(this)),this.g&&(this.readyState=3,gc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zb(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function zb(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?mc(this):gc(this),this.readyState==3&&zb(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,mc(this))},t.Qa=function(u){this.g&&(this.response=u,mc(this))},t.ga=function(){this.g&&mc(this)};function mc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,gc(u)}t.setRequestHeader=function(u,h){this.u.append(u,h)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function gc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(kl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Gb(u){let h="";return re(u,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function vm(u,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=Gb(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):$e(u,h,p))}function Qe(u){bt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Qe,bt);var OO=/^https?$/i,FO=["POST","PUT"];t=Qe.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hm.g(),this.v=this.o?Ib(this.o):Ib(hm),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(A){Wb(this,A);return}if(u=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)p.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())p.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(A=>A.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(FO,h,void 0))||g||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,F]of p)this.g.setRequestHeader(A,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yb(this),this.u=!0,this.g.send(u),this.u=!1}catch(A){Wb(this,A)}};function Wb(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,Kb(u),Ol(u)}function Kb(u){u.A||(u.A=!0,kt(u,"complete"),kt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,kt(this,"complete"),kt(this,"abort"),Ol(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ol(this,!0)),Qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Qb(this):this.bb())},t.bb=function(){Qb(this)};function Qb(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Tr(u)!=4||u.Z()!=2)){if(u.u&&Tr(u)==4)yb(u.Ea,0,u);else if(kt(u,"readystatechange"),Tr(u)==4){u.h=!1;try{let F=u.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=F===0){var D=String(u.D).match(Ub)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),g=!OO.test(D?D.toLowerCase():"")}p=g}if(p)kt(u,"complete"),kt(u,"success");else{u.m=6;try{var A=2<Tr(u)?u.g.statusText:""}catch{A=""}u.l=A+" ["+u.Z()+"]",Kb(u)}}finally{Ol(u)}}}}function Ol(u,h){if(u.g){Yb(u);let p=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||kt(u,"ready");try{p.onreadystatechange=g}catch{}}}function Yb(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Tr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Tr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),pO(h)}};function Jb(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function LO(u){let h={};u=(u.g&&2<=Tr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(H(u[g]))continue;var p=T(u[g]);let D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let A=h[D]||[];h[D]=A,A.push(p)}b(h,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yc(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function Xb(u){this.Aa=0,this.i=[],this.j=new uc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yc("baseRetryDelayMs",5e3,u),this.cb=yc("retryDelaySeedMs",1e4,u),this.Wa=yc("forwardChannelMaxRetries",2,u),this.wa=yc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Pb(u&&u.concurrentRequestLimit),this.Da=new PO,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Xb.prototype,t.la=8,t.G=1,t.connect=function(u,h,p,g){Ot(0),this.W=u,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=aT(this,null,this.W),Ll(this)};function wm(u){if(Zb(u),u.G==3){var h=u.U++,p=br(u.I);if($e(p,"SID",u.K),$e(p,"RID",h),$e(p,"TYPE","terminate"),_c(u,p),h=new ni(u,u.j,h),h.L=2,h.v=Pl(br(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=cT(h.j,null),h.g.ea(h.v)),h.F=Date.now(),xl(h)}oT(u)}function Fl(u){u.g&&(Em(u),u.g.cancel(),u.g=null)}function Zb(u){Fl(u),u.u&&(a.clearTimeout(u.u),u.u=null),Vl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Ll(u){if(!kb(u.h)&&!u.s){u.s=!0;var h=u.Ga;tc||db(),nc||(tc(),nc=!0),Zp.add(h,u),u.B=0}}function VO(u,h){return Ob(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=cc(m(u.Ga,u,h),sT(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let D=new ni(this,this.j,u),A=this.o;if(this.S&&(A?(A=_(A),C(A,this.S)):A=this.S),this.m!==null||this.O||(D.H=A,A=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=tT(this,D,h),p=br(this.I),$e(p,"RID",u),$e(p,"CVER",22),this.D&&$e(p,"X-HTTP-Session-Id",this.D),_c(this,p),A&&(this.O?h="headers="+encodeURIComponent(String(Gb(A)))+"&"+h:this.m&&vm(p,this.m,A)),_m(this.h,D),this.Ua&&$e(p,"TYPE","init"),this.P?($e(p,"$req",h),$e(p,"SID","null"),D.T=!0,pm(D,p,null)):pm(D,p,h),this.G=2}}else this.G==3&&(u?eT(this,u):this.i.length==0||kb(this.h)||eT(this))};function eT(u,h){var p;h?p=h.l:p=u.U++;let g=br(u.I);$e(g,"SID",u.K),$e(g,"RID",p),$e(g,"AID",u.T),_c(u,g),u.m&&u.o&&vm(g,u.m,u.o),p=new ni(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=tT(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),_m(u.h,p),pm(p,g,h)}function _c(u,h){u.H&&re(u.H,function(p,g){$e(h,g,p)}),u.l&&Vb({},function(p,g){$e(h,g,p)})}function tT(u,h,p){p=Math.min(u.i.length,p);var g=u.l?m(u.l.Na,u.l,u):null;e:{var D=u.i;let A=-1;for(;;){let F=["count="+p];A==-1?0<p?(A=D[0].g,F.push("ofs="+A)):A=0:F.push("ofs="+A);let Fe=!0;for(let _t=0;_t<p;_t++){let Ce=D[_t].g,Tt=D[_t].map;if(Ce-=A,0>Ce)A=Math.max(0,D[_t].g-100),Fe=!1;else try{kO(Tt,F,"req"+Ce+"_")}catch{g&&g(Tt)}}if(Fe){g=F.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,g}function nT(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;tc||db(),nc||(tc(),nc=!0),Zp.add(h,u),u.v=0}}function Im(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=cc(m(u.Fa,u),sT(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,rT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=cc(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ot(10),Fl(this),rT(this))};function Em(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function rT(u){u.g=new ni(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=br(u.qa);$e(h,"RID","rpc"),$e(h,"SID",u.K),$e(h,"AID",u.T),$e(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&$e(h,"TO",u.ja),$e(h,"TYPE","xmlhttp"),_c(u,h),u.m&&u.o&&vm(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Pl(br(h)),p.m=null,p.P=!0,xb(p,u)}t.Za=function(){this.C!=null&&(this.C=null,Fl(this),Im(this),Ot(19))};function Vl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function iT(u,h){var p=null;if(u.g==h){Vl(u),Em(u),u.g=null;var g=2}else if(ym(u.h,h))p=h.D,Fb(u.h,h),g=1;else return;if(u.G!=0){if(h.o)if(g==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var D=u.B;g=Sl(),kt(g,new Db(g,p)),Ll(u)}else nT(u);else if(D=h.s,D==3||D==0&&0<h.X||!(g==1&&VO(u,h)||g==2&&Im(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),D){case 1:Wi(u,5);break;case 4:Wi(u,10);break;case 3:Wi(u,6);break;default:Wi(u,2)}}}function sT(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function Wi(u,h){if(u.j.info("Error code "+h),h==2){var p=m(u.fb,u),g=u.Xa;let D=!g;g=new Gi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Nl(g,"https"),Pl(g),D?NO(g.toString(),p):MO(g.toString(),p)}else Ot(2);u.G=0,u.l&&u.l.sa(h),oT(u),Zb(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function oT(u){if(u.G=0,u.ka=[],u.l){let h=Lb(u.h);(h.length!=0||u.i.length!=0)&&(R(u.ka,h),R(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function aT(u,h,p){var g=p instanceof Gi?br(p):new Gi(p);if(g.g!="")h&&(g.g=h+"."+g.g),Ml(g,g.s);else{var D=a.location;g=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var A=new Gi(null);g&&Nl(A,g),h&&(A.g=h),D&&Ml(A,D),p&&(A.l=p),g=A}return p=u.D,h=u.ya,p&&h&&$e(g,p,h),$e(g,"VER",u.la),_c(u,g),g}function cT(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new Qe(new pc({eb:p})):new Qe(u.pa),h.Ha(u.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function uT(){}t=uT.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ul(){}Ul.prototype.g=function(u,h){return new tn(u,h)};function tn(u,h){bt.call(this),this.g=new Xb(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!H(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!H(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new co(this)}E(tn,bt),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){wm(this.g)},tn.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=cm(u),u=p);h.i.push(new IO(h.Ya++,u)),h.G==3&&Ll(h)},tn.prototype.N=function(){this.g.l=null,delete this.j,wm(this.g),delete this.g,tn.aa.N.call(this)};function lT(u){lm.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}E(lT,lm);function dT(){dm.call(this),this.status=1}E(dT,dm);function co(u){this.g=u}E(co,uT),co.prototype.ua=function(){kt(this.g,"a")},co.prototype.ta=function(u){kt(this.g,new lT(u))},co.prototype.sa=function(u){kt(this.g,new dT)},co.prototype.ra=function(){kt(this.g,"b")},Ul.prototype.createWebChannel=Ul.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,lw=qr.createWebChannelTransport=function(){return new Ul},uw=qr.getStatEventTarget=function(){return Sl()},cw=qr.Event=qi,If=qr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Al.NO_ERROR=0,Al.TIMEOUT=8,Al.HTTP_ERROR=6,Tu=qr.ErrorCode=Al,Sb.COMPLETE="complete",aw=qr.EventType=Sb,Eb.EventType=oc,oc.OPEN="a",oc.CLOSE="b",oc.ERROR="c",oc.MESSAGE="d",bt.prototype.listen=bt.prototype.K,da=qr.WebChannel=Eb,ow=qr.FetchXmlHttpFactory=pc,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,sw=qr.XhrIo=Qe}).apply(typeof wf<"u"?wf:typeof self<"u"?self:typeof window<"u"?window:{});var Ax="@firebase/firestore";var yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");var Ra="10.12.1";var $s=new sr("@firebase/firestore");function Du(){return $s.logLevel}function $(t,...e){if($s.logLevel<=fe.DEBUG){let n=e.map(QI);$s.debug(`Firestore (${Ra}): ${t}`,...n)}}function zr(t,...e){if($s.logLevel<=fe.ERROR){let n=e.map(QI);$s.error(`Firestore (${Ra}): ${t}`,...n)}}function ya(t,...e){if($s.logLevel<=fe.WARN){let n=e.map(QI);$s.warn(`Firestore (${Ra}): ${t}`,...n)}}function QI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ne(t="Unexpected state"){let e=`FIRESTORE (${Ra}) INTERNAL ASSERTION FAILED: `+t;throw zr(e),new Error(e)}function je(t,e){t||ne()}function oe(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},K=class extends $t{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var pr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Df=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},mw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}},gw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},yw=class{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new pr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>v(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new pr)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(je(typeof r.accessToken=="string"),new Df(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string"),new yt(e)}},_w=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},vw=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new _w(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ww=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Iw=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(je(typeof n.token=="string"),this.R=n.token,new ww(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function NG(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Sf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=NG(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Se(t,e){return t<e?-1:t>e?1:0}function _a(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var It=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ae=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new It(0,0))}static max(){return new t(new It(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Af=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(),r===void 0?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ct=class t extends Af{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new K(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},MG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,mn=class t extends Af{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return MG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new K(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new K(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new K(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var Y=class t{constructor(e){this.path=e}static fromPath(e){return new t(ct.fromString(e))}static fromName(e){return new t(ct.fromString(e).popFirst(5))}static empty(){return new t(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ct.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ct(e.slice()))}};var Ew=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Ew.UNKNOWN_ID=-1;function PG(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new It(n+1,0):new It(n,r));return new Hs(i,Y.empty(),e)}function kG(t){return new Hs(t.readTime,t.key,-1)}var Hs=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ae.min(),Y.empty(),-1)}static max(){return new t(ae.max(),Y.empty(),-1)}};function OG(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}var FG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Cw=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Gu(t){return v(this,null,function*(){if(t.code!==N.FAILED_PRECONDITION||t.message!==FG)throw t;$("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function LG(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wu(t){return t.name==="IndexedDbTransactionError"}var tN=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function tp(t){return t==null}function Mu(t){return t===0&&1/t==-1/0}function VG(t){return typeof t=="number"&&Number.isInteger(t)&&!Mu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var UG=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ite=[...UG,"documentOverlays"],jG=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],BG=jG,Ete=[...BG,"indexConfiguration","indexState","indexEntries"];function Rx(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xa(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var et=class t{constructor(e,n){this.comparator=e,this.root=n||mr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ma(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ma(this.root,e,this.comparator,!1)}getReverseIterator(){return new ma(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ma(this.root,e,this.comparator,!0)}},ma=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},mr=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();let e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}};mr.EMPTY=null,mr.RED=!0,mr.BLACK=!1;mr.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,r,i,s){return this}insert(e,n,r){return new mr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Mt=class t{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rf(this.data.getIterator())}getIteratorFrom(e){return new Rf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Rf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var fr=class t{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new t([])}unionWith(e){let n=new Mt(mn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _a(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var xf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ht=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new xf("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ht.EMPTY_BYTE_STRING=new Ht("");var $G=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gr(t){if(je(!!t),typeof t=="string"){let e=0,n=$G.exec(t);if(je(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ze(t.seconds),nanos:Ze(t.nanos)}}function Ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Li(t){return typeof t=="string"?Ht.fromBase64String(t):Ht.fromUint8Array(t)}function YI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function JI(t){let e=t.mapValue.fields.__previous_value__;return YI(e)?JI(e):e}function Pu(t){let e=Gr(t.mapValue.fields.__local_write_time__.timestampValue);return new It(e.seconds,e.nanos)}var bw=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Nf=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Ef={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function qs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?YI(t)?4:rN(t)?9007199254740991:10:ne()}function _r(t,e){if(t===e)return!0;let n=qs(t);if(n!==qs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pu(t).isEqual(Pu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Gr(i.timestampValue),a=Gr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Li(i.bytesValue).isEqual(Li(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ze(i.geoPointValue.latitude)===Ze(s.geoPointValue.latitude)&&Ze(i.geoPointValue.longitude)===Ze(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ze(i.integerValue)===Ze(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ze(i.doubleValue),a=Ze(s.doubleValue);return o===a?Mu(o)===Mu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return _a(t.arrayValue.values||[],e.arrayValue.values||[],_r);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Rx(o)!==Rx(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!_r(o[c],a[c])))return!1;return!0}(t,e);default:return ne()}}function ku(t,e){return(t.values||[]).find(n=>_r(n,e))!==void 0}function va(t,e){if(t===e)return 0;let n=qs(t),r=qs(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ze(s.integerValue||s.doubleValue),c=Ze(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return xx(t.timestampValue,e.timestampValue);case 4:return xx(Pu(t),Pu(e));case 5:return Se(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Li(s),c=Li(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=Se(a[l],c[l]);if(d!==0)return d}return Se(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Se(Ze(s.latitude),Ze(o.latitude));return a!==0?a:Se(Ze(s.longitude),Ze(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let d=va(a[l],c[l]);if(d)return d}return Se(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ef.mapValue&&o===Ef.mapValue)return 0;if(s===Ef.mapValue)return 1;if(o===Ef.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let m=Se(c[f],d[f]);if(m!==0)return m;let y=va(a[c[f]],l[d[f]]);if(y!==0)return y}return Se(c.length,d.length)}(t.mapValue,e.mapValue);default:throw ne()}}function xx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);let n=Gr(t),r=Gr(e),i=Se(n.seconds,r.seconds);return i!==0?i:Se(n.nanos,r.nanos)}function wa(t){return Tw(t)}function Tw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Gr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Li(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Tw(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Tw(n.fields[o])}`;return i+"}"}(t.mapValue):ne()}function Dw(t){return!!t&&"integerValue"in t}function XI(t){return!!t&&"arrayValue"in t}function Nx(t){return!!t&&"nullValue"in t}function Mx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bf(t){return!!t&&"mapValue"in t}function Au(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return xa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Au(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Au(t.arrayValue.values[n]);return e}return Object.assign({},t)}function rN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var $n=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Au(n)}setAll(e){let n=mn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Au(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());bf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];bf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){xa(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Au(this.value))}};function iN(t){let e=[];return xa(t.fields,(n,r)=>{let i=new mn([n]);if(bf(r)){let s=iN(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new fr(e)}var Hn=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ae.min(),ae.min(),ae.min(),$n.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ae.min(),ae.min(),$n.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ae.min(),ae.min(),$n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ia=class{constructor(e,n){this.position=e,this.inclusive=n}};function Px(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=va(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function kx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_r(t.position[n],e.position[n]))return!1;return!0}var Ea=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function HG(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Mf=class{},mt=class t extends Mf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Aw(e,n,r):n==="array-contains"?new Nw(e,r):n==="in"?new Mw(e,r):n==="not-in"?new Pw(e,r):n==="array-contains-any"?new kw(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Rw(e,r):new xw(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(va(n,this.value)):n!==null&&qs(this.value)===qs(n)&&this.matchesComparison(va(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},vr=class t extends Mf{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return sN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function sN(t){return t.op==="and"}function oN(t){return qG(t)&&sN(t)}function qG(t){for(let e of t.filters)if(e instanceof vr)return!1;return!0}function Sw(t){if(t instanceof mt)return t.field.canonicalString()+t.op.toString()+wa(t.value);if(oN(t))return t.filters.map(e=>Sw(e)).join(",");{let e=t.filters.map(n=>Sw(n)).join(",");return`${t.op}(${e})`}}function aN(t,e){return t instanceof mt?function(r,i){return i instanceof mt&&r.op===i.op&&r.field.isEqual(i.field)&&_r(r.value,i.value)}(t,e):t instanceof vr?function(r,i){return i instanceof vr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&aN(o,i.filters[a]),!0):!1}(t,e):void ne()}function cN(t){return t instanceof mt?function(n){return`${n.field.canonicalString()} ${n.op} ${wa(n.value)}`}(t):t instanceof vr?function(n){return n.op.toString()+" {"+n.getFilters().map(cN).join(" ,")+"}"}(t):"Filter"}var Aw=class extends mt{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){let n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}},Rw=class extends mt{constructor(e,n){super(e,"in",n),this.keys=uN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},xw=class extends mt{constructor(e,n){super(e,"not-in",n),this.keys=uN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function uN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}var Nw=class extends mt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return XI(n)&&ku(n.arrayValue,this.value)}},Mw=class extends mt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&ku(this.value.arrayValue,n)}},Pw=class extends mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!ku(this.value.arrayValue,n)}},kw=class extends mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!XI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ku(this.value.arrayValue,r))}};var Ow=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function Ox(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Ow(t,e,n,r,i,s,o)}function ZI(t){let e=oe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Sw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),tp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>wa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>wa(r)).join(",")),e.ue=n}return e.ue}function eE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!HG(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!aN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kx(t.startAt,e.startAt)&&kx(t.endAt,e.endAt)}function Fw(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Ca=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function zG(t,e,n,r,i,s,o,a){return new Ca(t,e,n,r,i,s,o,a)}function tE(t){return new Ca(t)}function Fx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GG(t){return t.collectionGroup!==null}function Ru(t){let e=oe(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Mt(mn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ea(s,r))}),n.has(mn.keyField().canonicalString())||e.ce.push(new Ea(mn.keyField(),r))}return e.ce}function gr(t){let e=oe(t);return e.le||(e.le=WG(e,Ru(t))),e.le}function WG(t,e){if(t.limitType==="F")return Ox(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ea(i.field,s)});let n=t.endAt?new Ia(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ia(t.startAt.position,t.startAt.inclusive):null;return Ox(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Lw(t,e,n){return new Ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function np(t,e){return eE(gr(t),gr(e))&&t.limitType===e.limitType}function lN(t){return`${ZI(gr(t))}|lt:${t.limitType}`}function ha(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>cN(i)).join(", ")}]`),tp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>wa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>wa(i)).join(",")),`Target(${r})`}(gr(t))}; limitType=${t.limitType})`}function rp(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Y.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Ru(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=Px(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Ru(r),i)||r.endAt&&!function(o,a,c){let l=Px(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Ru(r),i))}(t,e)}function KG(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function dN(t){return(e,n)=>{let r=!1;for(let i of Ru(t)){let s=QG(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function QG(t,e,n){let r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?va(c,l):ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}var Vi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xa(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return nN(this.inner)}size(){return this.innerSize}};var YG=new et(Y.comparator);function Wr(){return YG}var hN=new et(Y.comparator);function Su(...t){let e=hN;for(let n of t)e=e.insert(n.key,n);return e}function fN(t){let e=hN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Us(){return xu()}function pN(){return xu()}function xu(){return new Vi(t=>t.toString(),(t,e)=>t.isEqual(e))}var JG=new et(Y.comparator),XG=new Mt(Y.comparator);function ve(...t){let e=XG;for(let n of t)e=e.add(n);return e}var ZG=new Mt(Se);function e4(){return ZG}function mN(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mu(e)?"-0":e}}function gN(t){return{integerValue:""+t}}function t4(t,e){return VG(e)?gN(e):mN(t,e)}var ba=class{constructor(){this._=void 0}};function n4(t,e,n){return t instanceof Ta?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&YI(s)&&(s=JI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof zs?_N(t,e):t instanceof Gs?vN(t,e):function(i,s){let o=yN(i,s),a=Lx(o)+Lx(i.Pe);return Dw(o)&&Dw(i.Pe)?gN(a):mN(i.serializer,a)}(t,e)}function r4(t,e,n){return t instanceof zs?_N(t,e):t instanceof Gs?vN(t,e):n}function yN(t,e){return t instanceof Da?function(r){return Dw(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Ta=class extends ba{},zs=class extends ba{constructor(e){super(),this.elements=e}};function _N(t,e){let n=wN(e);for(let r of t.elements)n.some(i=>_r(i,r))||n.push(r);return{arrayValue:{values:n}}}var Gs=class extends ba{constructor(e){super(),this.elements=e}};function vN(t,e){let n=wN(e);for(let r of t.elements)n=n.filter(i=>!_r(i,r));return{arrayValue:{values:n}}}var Da=class extends ba{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function Lx(t){return Ze(t.integerValue||t.doubleValue)}function wN(t){return XI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function i4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof zs&&i instanceof zs||r instanceof Gs&&i instanceof Gs?_a(r.elements,i.elements,_r):r instanceof Da&&i instanceof Da?_r(r.Pe,i.Pe):r instanceof Ta&&i instanceof Ta}(t.transform,e.transform)}var Vw=class{constructor(e,n){this.version=e,this.transformResults=n}},Bs=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Tf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Sa=class{};function IN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Pf(t.key,Bs.none()):new Ws(t.key,t.data,Bs.none());{let n=t.data,r=$n.empty(),i=new Mt(mn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Kr(t.key,r,new fr(i.toArray()),Bs.none())}}function s4(t,e,n){t instanceof Ws?function(i,s,o){let a=i.value.clone(),c=Ux(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Kr?function(i,s,o){if(!Tf(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=Ux(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(EN(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Nu(t,e,n,r){return t instanceof Ws?function(s,o,a,c){if(!Tf(s.precondition,o))return a;let l=s.value.clone(),d=jx(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Kr?function(s,o,a,c){if(!Tf(s.precondition,o))return a;let l=jx(s.fieldTransforms,c,o),d=o.data;return d.setAll(EN(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Tf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function o4(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=yN(r.transform,i||null);s!=null&&(n===null&&(n=$n.empty()),n.set(r.field,s))}return n||null}function Vx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_a(r,i,(s,o)=>i4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ws=class extends Sa{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Kr=class extends Sa{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function EN(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function Ux(t,e,n){let r=new Map;je(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,r4(o,a,n[i]))}return r}function jx(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,n4(s,o,e))}return r}var Pf=class extends Sa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Uw=class extends Sa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var jw=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&s4(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Nu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Nu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=pN();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=IN(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ve())}isEqual(e){return this.batchId===e.batchId&&_a(this.mutations,e.mutations,(n,r)=>Vx(n,r))&&_a(this.baseMutations,e.baseMutations,(n,r)=>Vx(n,r))}},Bw=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){je(e.mutations.length===r.length);let i=function(){return JG}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var $w=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Hw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ot,Ie;function a4(t){switch(t){default:return ne();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function CN(t){if(t===void 0)return zr("GRPC error has no .code"),N.UNKNOWN;switch(t){case ot.OK:return N.OK;case ot.CANCELLED:return N.CANCELLED;case ot.UNKNOWN:return N.UNKNOWN;case ot.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case ot.INTERNAL:return N.INTERNAL;case ot.UNAVAILABLE:return N.UNAVAILABLE;case ot.UNAUTHENTICATED:return N.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case ot.NOT_FOUND:return N.NOT_FOUND;case ot.ALREADY_EXISTS:return N.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return N.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case ot.ABORTED:return N.ABORTED;case ot.OUT_OF_RANGE:return N.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return N.UNIMPLEMENTED;case ot.DATA_LOSS:return N.DATA_LOSS;default:return ne()}}(Ie=ot||(ot={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";var Bx=null;function c4(){return new TextEncoder}var u4=new Fi([4294967295,4294967295],0);function $x(t){let e=c4().encode(t),n=new iw;return n.update(e),new Uint8Array(n.digest())}function Hx(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Fi([n,r],0),new Fi([i,s],0)]}var qw=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new js(`Invalid padding: ${n}`);if(r<0)throw new js(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new js(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new js(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Fi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Fi.fromNumber(r)));return i.compare(u4)===1&&(i=new Fi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=$x(e),[r,i]=Hx(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=$x(e),[r,i]=Hx(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},js=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var kf=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Ou.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ae.min(),i,new et(Se),Wr(),ve())}},Ou=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ve(),ve(),ve())}};var ga=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Of=class{constructor(e,n){this.targetId=e,this.me=n}},Ff=class{constructor(e,n,r=Ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Lf=class{constructor(){this.fe=0,this.ge=zx(),this.pe=Ht.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=ve(),n=ve(),r=ve();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new Ou(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=zx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,je(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},zw=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Wr(),this.qe=qx(),this.Qe=new et(Se)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(Fw(s))if(r===0){let o=new Y(s.path);this.Ue(n,o,Hn.newNoDocument(o,ae.min()))}else je(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}Bx?.et(function(d,f,m,y,E){var x,R,O,H,B,z;let Re={localCacheCount:d,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},re=f.unchangedNames;return re&&(Re.bloomFilter={applied:E===0,hashCount:(x=re?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(H=(O=(R=re?.bits)===null||R===void 0?void 0:R.bitmap)===null||O===void 0?void 0:O.length)!==null&&H!==void 0?H:0,padding:(z=(B=re?.bits)===null||B===void 0?void 0:B.padding)!==null&&z!==void 0?z:0,mightContain:b=>{var _;return(_=y?.mightContain(b))!==null&&_!==void 0&&_}}),Re}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Li(r).toUint8Array()}catch(c){if(c instanceof xf)return ya("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new qw(o,i,s)}catch(c){return ya(c instanceof js?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Fw(a.target)){let c=new Y(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Hn.newNoDocument(c,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=ve();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new kf(e,n,this.Qe,this.ke,r);return this.ke=Wr(),this.qe=qx(),this.Qe=new et(Se),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Lf,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Mt(Se),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Lf),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function qx(){return new et(Y.comparator)}function zx(){return new et(Y.comparator)}var l4={asc:"ASCENDING",desc:"DESCENDING"},d4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},h4={and:"AND",or:"OR"},Gw=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Ww(t,e){return t.useProto3Json||tp(e)?e:{value:e}}function Vf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function f4(t,e){return Vf(t,e.toTimestamp())}function yr(t){return je(!!t),ae.fromTimestamp(function(n){let r=Gr(n);return new It(r.seconds,r.nanos)}(t))}function nE(t,e){return Kw(t,e).canonicalString()}function Kw(t,e){let n=function(i){return new ct(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function TN(t){let e=ct.fromString(t);return je(xN(e)),e}function Qw(t,e){return nE(t.databaseId,e.path)}function dw(t,e){let n=TN(e);if(n.get(1)!==t.databaseId.projectId)throw new K(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(SN(n))}function DN(t,e){return nE(t.databaseId,e)}function p4(t){let e=TN(t);return e.length===4?ct.emptyPath():SN(e)}function Yw(t){return new ct(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function SN(t){return je(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Gx(t,e,n){return{name:Qw(t,e),fields:n.value.mapValue.fields}}function m4(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(je(d===void 0||typeof d=="string"),Ht.fromBase64String(d||"")):(je(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ht.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?N.UNKNOWN:CN(l.code);return new K(d,l.message||"")}(o);n=new Ff(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=dw(t,r.document.name),s=yr(r.document.updateTime),o=r.document.createTime?yr(r.document.createTime):ae.min(),a=new $n({mapValue:{fields:r.document.fields}}),c=Hn.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];n=new ga(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=dw(t,r.document),s=r.readTime?yr(r.readTime):ae.min(),o=Hn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ga([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=dw(t,r.document),s=r.removedTargetIds||[];n=new ga([],s,i,null)}else{if(!("filter"in e))return ne();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Hw(i,s),a=r.targetId;n=new Of(a,o)}}return n}function g4(t,e){let n;if(e instanceof Ws)n={update:Gx(t,e.key,e.value)};else if(e instanceof Pf)n={delete:Qw(t,e.key)};else if(e instanceof Kr)n={update:Gx(t,e.key,e.data),updateMask:T4(e.fieldMask)};else{if(!(e instanceof Uw))return ne();n={verify:Qw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Ta)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Da)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:f4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ne()}(t,e.precondition)),n}function y4(t,e){return t&&t.length>0?(je(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?yr(i.updateTime):yr(s);return o.isEqual(ae.min())&&(o=yr(s)),new Vw(o,i.transformResults||[])}(n,e))):[]}function _4(t,e){return{documents:[DN(t,e.path)]}}function v4(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=DN(t,i);let s=function(l){if(l.length!==0)return RN(vr.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(m){return{field:fa(m.field),direction:E4(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Ww(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function w4(t){let e=p4(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){je(r===1);let d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){let m=AN(f);return m instanceof vr&&oN(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(E){return new Ea(pa(E.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,tp(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){let m=!!f.before,y=f.values||[];return new Ia(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(f){let m=!f.before,y=f.values||[];return new Ia(y,m)}(n.endAt)),zG(e,i,o,s,a,"F",c,l)}function I4(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function AN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=pa(n.unaryFilter.field);return mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=pa(n.unaryFilter.field);return mt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=pa(n.unaryFilter.field);return mt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=pa(n.unaryFilter.field);return mt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):t.fieldFilter!==void 0?function(n){return mt.create(pa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return vr.create(n.compositeFilter.filters.map(r=>AN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(n.compositeFilter.op))}(t):ne()}function E4(t){return l4[t]}function C4(t){return d4[t]}function b4(t){return h4[t]}function fa(t){return{fieldPath:t.canonicalString()}}function pa(t){return mn.fromServerFormat(t.fieldPath)}function RN(t){return t instanceof mt?function(n){if(n.op==="=="){if(Mx(n.value))return{unaryFilter:{field:fa(n.field),op:"IS_NAN"}};if(Nx(n.value))return{unaryFilter:{field:fa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Mx(n.value))return{unaryFilter:{field:fa(n.field),op:"IS_NOT_NAN"}};if(Nx(n.value))return{unaryFilter:{field:fa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fa(n.field),op:C4(n.op),value:n.value}}}(t):t instanceof vr?function(n){let r=n.getFilters().map(i=>RN(i));return r.length===1?r[0]:{compositeFilter:{op:b4(n.op),filters:r}}}(t):ne()}function T4(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function xN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Fu=class t{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=Ht.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Jw=class{constructor(e){this.ct=e}};function D4(t){let e=w4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lw(e,e.limit,"L"):e}var Uf=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Ze(e.integerValue));else if("doubleValue"in e){let r=Ze(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Mu(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=Gr(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Li(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?rN(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ne()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),Y.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Uf.bt=new Uf;var Xw=class{constructor(){this._n=new Zw}addToCollectionParentIndex(e,n){return this._n.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Hs.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},Zw=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Mt(ct.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mt(ct.comparator)).toArray()}};var bte=new Uint8Array(0);var hr=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};hr.DEFAULT_COLLECTION_PERCENTILE=10,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hr.DEFAULT=new hr(41943040,hr.DEFAULT_COLLECTION_PERCENTILE,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hr.DISABLED=new hr(-1,0,0);var Lu=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var eI=class{constructor(){this.changes=new Vi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var tI=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var nI=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Nu(r.mutation,i,fr.empty(),It.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ve()){let i=Us();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Su();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Us();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ve()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Wr(),o=xu(),a=function(){return xu()}();return n.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Kr)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),Nu(d.mutation,l,d.mutation.getFieldMask(),It.now())):o.set(l.key,fr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),n.forEach((l,d)=>{var f;return a.set(l,new tI(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let r=xu(),i=new et((o,a)=>o-a),s=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let d=r.get(c)||fr.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||ve()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=pN();d.forEach(m=>{if(!s.has(m)){let y=IN(n.get(m),r.get(m));y!==null&&f.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):GG(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):P.resolve(Us()),a=-1,c=s;return o.next(l=>P.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?P.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,ve())).next(d=>({batchId:a,changes:fN(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=Su();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Su();return this.indexManager.getCollectionParents(e,s).next(a=>P.forEach(a,c=>{let l=function(f,m){return new Ca(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,Hn.newInvalidDocument(d)))});let a=Su();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&Nu(d.mutation,l,fr.empty(),It.now()),rp(n,l)&&(a=a.insert(c,l))}),a})}};var rI=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return P.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:yr(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:D4(i.bundledQuery),readTime:yr(i.readTime)}}(n)),P.resolve()}};var iI=class{constructor(){this.overlays=new et(Y.comparator),this.hr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Us();return P.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=Us(),s=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new et((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=Us(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Us(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return P.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $w(n,r));let s=this.hr.get(n);s===void 0&&(s=ve(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var Vu=class{constructor(){this.Pr=new Mt(at.Ir),this.Tr=new Mt(at.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new at(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new at(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new Y(new ct([])),r=new at(n,e),i=new at(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new Y(new ct([])),r=new at(n,e),i=new at(n,e+1),s=ve();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new at(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},at=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Y.comparator(e.key,n.key)||Se(e.pr,n.pr)}static Er(e,n){return Se(e.pr,n.pr)||Y.comparator(e.key,n.key)}};var sI=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Mt(at.Ir)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new jw(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new at(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,n){return P.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new at(n,0),i=new at(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mt(Se);return n.forEach(i=>{let s=new at(i,0),o=new at(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),P.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;Y.isDocumentKey(s)||(s=s.child(""));let o=new at(new Y(s),0),a=new Mt(Se);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},o),P.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){je(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return P.forEach(n.mutations,i=>{let s=new at(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new at(n,0),i=this.wr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var oI=class{constructor(e){this.vr=e,this.docs=function(){return new et(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():Hn.newInvalidDocument(n))}getEntries(e,n){let r=Wr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Hn.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Wr(),o=n.path,a=new Y(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||OG(kG(d),r)<=0||(i.has(d.key)||rp(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ne()}Fr(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new aI(this)}getSize(e){return P.resolve(this.size)}},aI=class extends eI{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var cI=class{constructor(e){this.persistence=e,this.Mr=new Vi(n=>ZI(n),eE),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Vu,this.targetCount=0,this.Lr=Lu.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),P.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Lu(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.qn(n),P.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(s).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.Nr.containsKey(n))}};var uI=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new tN(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new cI(this),this.indexManager=new Xw,this.remoteDocumentCache=function(i){return new oI(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Jw(n),this.$r=new rI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new iI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new sI(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);let i=new lI(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return P.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},lI=class extends Cw{constructor(e){super(),this.currentSequenceNumber=e}},dI=class t{constructor(e){this.persistence=e,this.zr=new Vu,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw ne()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),P.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Jr,r=>{let i=Y.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return P.or([()=>P.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var hI=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=ve(),i=ve();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var fI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var pI=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return rR()?8:LG(ft())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new fI;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Du()<=fe.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",ha(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),P.resolve()):(Du()<=fe.DEBUG&&$("QueryEngine","Query:",ha(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Du()<=fe.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",ha(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gr(n))):P.resolve())}ji(e,n){if(Fx(n))return P.resolve(null);let r=gr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Lw(n,null,"F"),r=gr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ve(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(e,Lw(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,r,i){return Fx(n)||i.isEqual(ae.min())?P.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?P.resolve(null):(Du()<=fe.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ha(n)),this.es(e,o,n,PG(i,-1)).next(a=>a))})}Zi(e,n){let r=new Mt(dN(e));return n.forEach((i,s)=>{rp(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Du()<=fe.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",ha(n)),this.zi.getDocumentsMatchingQuery(e,n,Hs.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var mI=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new et(Se),this.rs=new Vi(s=>ZI(s),eE),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nI(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function S4(t,e,n,r){return new mI(t,e,n,r)}function NN(t,e){return v(this,null,function*(){let n=oe(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=ve();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function A4(t,e){let n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,m=f.keys(),y=P.resolve();return m.forEach(E=>{y=y.next(()=>d.getEntry(c,E)).next(x=>{let R=l.docVersions.get(E);je(R!==null),x.version.compareTo(R)<0&&(f.applyToRemoteDocument(x,l),x.isValidDocument()&&(x.setReadTime(l.commitVersion),d.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ve();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function MN(t){let e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function R4(t,e){let n=oe(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((d,f)=>{let m=i.get(f);if(!m)return;a.push(n.Qr.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,d.addedDocuments,f)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Ht.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(x,R,O){return x.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(m,y,d)&&a.push(n.Qr.updateTargetData(s,y))});let c=Wr(),l=ve();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(x4(s,o,e.documentUpdates).next(d=>{c=d.cs,l=d.ls})),!r.isEqual(ae.min())){let d=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return P.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.ns=i,s))}function x4(t,e,n){let r=ve(),i=ve();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Wr();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ae.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):$("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:i}})}function N4(t,e){let n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function M4(t,e){let n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,P.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Fu(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function gI(t,e,n){return v(this,null,function*(){let r=oe(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Wu(o))throw o;$("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function Wx(t,e,n){let r=oe(t),i=ae.min(),s=ve();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let f=oe(c),m=f.rs.get(d);return m!==void 0?P.resolve(f.ns.get(m)):f.Qr.getTargetData(l,d)}(r,o,gr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:ve())).next(a=>(P4(r,KG(e),a),{documents:a,hs:s})))}function P4(t,e,n){let r=t.ss.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}var jf=class{constructor(){this.activeTargetIds=e4()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var yI=class{constructor(){this.no=new jf,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new jf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var _I=class{io(e){}shutdown(){}};var Bf=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){$("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){$("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Cf=null;function hw(){return Cf===null?Cf=function(){return 268435456+Math.round(2147483648*Math.random())}():Cf++,"0x"+Cf.toString(16)}var k4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var vI=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Nt="WebChannelConnection",wI=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){let a=hw(),c=this.vo(n,r.toUriEncodedString());$("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,c,l,i).then(d=>($("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw ya("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ra}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){let i=k4[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){let s=hw();return new Promise((o,a)=>{let c=new sw;c.setWithCredentials(!0),c.listenOnce(aw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Tu.NO_ERROR:let d=c.getResponseJson();$(Nt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Tu.TIMEOUT:$(Nt,`RPC '${e}' ${s} timed out`),a(new K(N.DEADLINE_EXCEEDED,"Request time out"));break;case Tu.HTTP_ERROR:let f=c.getStatus();if($(Nt,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let E=function(R){let O=R.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(O)>=0?O:N.UNKNOWN}(y.status);a(new K(E,y.message))}else a(new K(N.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new K(N.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{$(Nt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);$(Nt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}Oo(e,n,r){let i=hw(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=lw(),a=uw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new ow({})),this.Fo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let d=s.join("");$(Nt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),m=!1,y=!1,E=new vI({lo:R=>{y?$(Nt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||($(Nt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),$(Nt,`RPC '${e}' stream ${i} sending:`,R),f.send(R))},ho:()=>f.close()}),x=(R,O,H)=>{R.listen(O,B=>{try{H(B)}catch(z){setTimeout(()=>{throw z},0)}})};return x(f,da.EventType.OPEN,()=>{y||($(Nt,`RPC '${e}' stream ${i} transport opened.`),E.mo())}),x(f,da.EventType.CLOSE,()=>{y||(y=!0,$(Nt,`RPC '${e}' stream ${i} transport closed`),E.po())}),x(f,da.EventType.ERROR,R=>{y||(y=!0,ya(Nt,`RPC '${e}' stream ${i} transport errored:`,R),E.po(new K(N.UNAVAILABLE,"The operation could not be completed")))}),x(f,da.EventType.MESSAGE,R=>{var O;if(!y){let H=R.data[0];je(!!H);let B=H,z=B.error||((O=B[0])===null||O===void 0?void 0:O.error);if(z){$(Nt,`RPC '${e}' stream ${i} received error:`,z);let Re=z.status,re=function(w){let C=ot[w];if(C!==void 0)return CN(C)}(Re),b=z.message;re===void 0&&(re=N.INTERNAL,b="Unknown error status: "+Re+" with message "+z.message),y=!0,E.po(new K(re,b)),f.close()}else $(Nt,`RPC '${e}' stream ${i} received:`,H),E.yo(H)}}),x(a,cw.STAT_EVENT,R=>{R.stat===If.PROXY?$(Nt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===If.NOPROXY&&$(Nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.fo()},0),E}};function fw(){return typeof document<"u"?document:null}function ip(t){return new Gw(t,!0)}var $f=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Hf=class{constructor(e,n,r,i,s,o,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new $f(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return v(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return v(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return v(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(zr(n.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{let i=new K(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){let r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>v(this,null,function*(){this.state=0,this.start()}))}c_(e){return $("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():($("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},II=class extends Hf{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=m4(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?yr(o.readTime):ae.min()}(e);return this.listener.h_(n,r)}P_(e){let n={};n.database=Yw(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=Fw(c)?{documents:_4(s,c)}:{query:v4(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=bN(s,o.resumeToken);let l=Ww(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=Vf(s,o.snapshotVersion.toTimestamp());let l=Ww(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=I4(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){let n={};n.database=Yw(this.serializer),n.removeTarget=e,this.i_(n)}},EI=class extends Hf{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=y4(e.writeResults,e.commitTime),r=yr(e.commitTime);return this.listener.A_(r,n)}return je(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=Yw(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>g4(this.serializer,r))};this.i_(n)}};var CI=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new K(N.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,Kw(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(N.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,Kw(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(N.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},bI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(zr(n),this.y_=!1):$("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var TI=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(()=>v(this,null,function*(){Ks(this)&&($("RemoteStore","Restarting streams for network reachability change."),yield function(c){return v(this,null,function*(){let l=oe(c);l.M_.add(4),yield Ku(l),l.N_.set("Unknown"),l.M_.delete(4),yield sp(l)})}(this))}))}),this.N_=new bI(r,i)}};function sp(t){return v(this,null,function*(){if(Ks(t))for(let e of t.x_)yield e(!0)})}function Ku(t){return v(this,null,function*(){for(let e of t.x_)yield e(!1)})}function PN(t,e){let n=oe(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),oE(n)?sE(n):Na(n).Xo()&&iE(n,e))}function rE(t,e){let n=oe(t),r=Na(n);n.F_.delete(e),r.Xo()&&kN(n,e),n.F_.size===0&&(r.Xo()?r.n_():Ks(n)&&n.N_.set("Unknown"))}function iE(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Na(t).P_(e)}function kN(t,e){t.L_.xe(e),Na(t).I_(e)}function sE(t){t.L_=new zw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Na(t).start(),t.N_.w_()}function oE(t){return Ks(t)&&!Na(t).Zo()&&t.F_.size>0}function Ks(t){return oe(t).M_.size===0}function ON(t){t.L_=void 0}function O4(t){return v(this,null,function*(){t.N_.set("Online")})}function F4(t){return v(this,null,function*(){t.F_.forEach((e,n)=>{iE(t,e)})})}function L4(t,e){return v(this,null,function*(){ON(t),oE(t)?(t.N_.D_(e),sE(t)):t.N_.set("Unknown")})}function V4(t,e,n){return v(this,null,function*(){if(t.N_.set("Online"),e instanceof Ff&&e.state===2&&e.cause)try{yield function(i,s){return v(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){$("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield qf(t,r)}else if(e instanceof ga?t.L_.Ke(e):e instanceof Of?t.L_.He(e):t.L_.We(e),!n.isEqual(ae.min()))try{let r=yield MN(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.L_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.F_.get(l);d&&s.F_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.F_.get(c);if(!d)return;s.F_.set(c,d.withResumeToken(Ht.EMPTY_BYTE_STRING,d.snapshotVersion)),kN(s,c);let f=new Fu(d.target,c,l,d.sequenceNumber);iE(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){$("RemoteStore","Failed to raise snapshot:",r),yield qf(t,r)}})}function qf(t,e,n){return v(this,null,function*(){if(!Wu(e))throw e;t.M_.add(1),yield Ku(t),t.N_.set("Offline"),n||(n=()=>MN(t.localStore)),t.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){$("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield sp(t)}))})}function FN(t,e){return e().catch(n=>qf(t,n,e))}function op(t){return v(this,null,function*(){let e=oe(t),n=Ui(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;U4(e);)try{let i=yield N4(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,j4(e,i)}catch(i){yield qf(e,i)}LN(e)&&VN(e)})}function U4(t){return Ks(t)&&t.v_.length<10}function j4(t,e){t.v_.push(e);let n=Ui(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function LN(t){return Ks(t)&&!Ui(t).Zo()&&t.v_.length>0}function VN(t){Ui(t).start()}function B4(t){return v(this,null,function*(){Ui(t).V_()})}function $4(t){return v(this,null,function*(){let e=Ui(t);for(let n of t.v_)e.d_(n.mutations)})}function H4(t,e,n){return v(this,null,function*(){let r=t.v_.shift(),i=Bw.from(r,e,n);yield FN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield op(t)})}function q4(t,e){return v(this,null,function*(){e&&Ui(t).E_&&(yield function(r,i){return v(this,null,function*(){if(function(o){return a4(o)&&o!==N.ABORTED}(i.code)){let s=r.v_.shift();Ui(r).t_(),yield FN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield op(r)}})}(t,e)),LN(t)&&VN(t)})}function Kx(t,e){return v(this,null,function*(){let n=oe(t);n.asyncQueue.verifyOperationInProgress(),$("RemoteStore","RemoteStore received new credentials");let r=Ks(n);n.M_.add(3),yield Ku(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield sp(n)})}function z4(t,e){return v(this,null,function*(){let n=oe(t);e?(n.M_.delete(2),yield sp(n)):e||(n.M_.add(2),yield Ku(n),n.N_.set("Unknown"))})}function Na(t){return t.B_||(t.B_=function(n,r,i){let s=oe(n);return s.f_(),new II(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:O4.bind(null,t),To:F4.bind(null,t),Ao:L4.bind(null,t),h_:V4.bind(null,t)}),t.x_.push(e=>v(this,null,function*(){e?(t.B_.t_(),oE(t)?sE(t):t.N_.set("Unknown")):(yield t.B_.stop(),ON(t))}))),t.B_}function Ui(t){return t.k_||(t.k_=function(n,r,i){let s=oe(n);return s.f_(),new EI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:B4.bind(null,t),Ao:q4.bind(null,t),R_:$4.bind(null,t),A_:H4.bind(null,t)}),t.x_.push(e=>v(this,null,function*(){e?(t.k_.t_(),yield op(t)):(yield t.k_.stop(),t.v_.length>0&&($("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var DI=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function aE(t,e){if(zr("AsyncQueue",`${e}: ${t}`),Wu(t))return new K(N.UNAVAILABLE,`${e}: ${t}`);throw t}var zf=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Su(),this.sortedSet=new et(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Gf=class{constructor(){this.q_=new et(Y.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):ne():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},Aa=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,zf.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&np(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var SI=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},AI=class{constructor(){this.queries=new Vi(e=>lN(e),np),this.onlineState="Unknown",this.z_=new Set}};function G4(t,e){return v(this,null,function*(){let n=oe(t),r=3,i=e.query,s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new SI,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield n.onListen(i,!0);break;case 1:s.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=aE(o,`Initialization of query '${ha(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&cE(n)})}function W4(t,e){return v(this,null,function*(){let n=oe(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function K4(t,e){let n=oe(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&cE(n)}function Q4(t,e,n){let r=oe(t),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(n);r.queries.delete(e)}function cE(t){t.z_.forEach(e=>{e.next()})}var RI,Qx;(Qx=RI||(RI={})).J_="default",Qx.Cache="cache";var xI=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Aa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Aa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==RI.Cache}};var Wf=class{constructor(e){this.key=e}},Kf=class{constructor(e){this.key=e}},NI=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ve(),this.mutatedKeys=ve(),this.Ia=dN(e),this.Ta=new zf(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new Gf,i=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let m=i.get(d),y=rp(this.query,f)?f:null,E=!!m&&this.mutatedKeys.has(m.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?E!==x&&(r.track({type:3,doc:y}),R=!0):this.Ra(m,y)||(r.track({type:2,doc:y}),R=!0,(c&&this.Ia(y,c)>0||l&&this.Ia(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(c||l)&&(a=!0)),R&&(y?(o=o.add(y),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((d,f)=>function(y,E){let x=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return x(y)-x(E)}(d.type,f.type)||this.Ia(d.doc,f.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],c=this.Pa.size===0&&this.current&&!i?1:0,l=c!==this.ha;return this.ha=c,o.length!==0||l?{snapshot:new Aa(this.query,e.Ta,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Gf,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=ve(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new Kf(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new Wf(r))}),n}pa(e){this.la=e.hs,this.Pa=ve();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Aa.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},MI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},PI=class{constructor(e){this.key=e,this.wa=!1}},kI=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Vi(a=>lN(a),np),this.Da=new Map,this.Ca=new Set,this.va=new et(Y.comparator),this.Fa=new Map,this.Ma=new Vu,this.xa={},this.Oa=new Map,this.Na=Lu.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function Y4(t,e,n=!0){return v(this,null,function*(){let r=qN(t),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield UN(r,e,n,!0),i})}function J4(t,e){return v(this,null,function*(){let n=qN(t);yield UN(n,e,!0,!1)})}function UN(t,e,n,r){return v(this,null,function*(){let i=yield M4(t.localStore,gr(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield X4(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&PN(t.remoteStore,i),a})}function X4(t,e,n,r,i){return v(this,null,function*(){t.Ba=(f,m,y)=>function(x,R,O,H){return v(this,null,function*(){let B=R.view.da(O);B.Xi&&(B=yield Wx(x.localStore,R.query,!1).then(({documents:b})=>R.view.da(b,B)));let z=H&&H.targetChanges.get(R.targetId),Re=H&&H.targetMismatches.get(R.targetId)!=null,re=R.view.applyChanges(B,x.isPrimaryClient,z,Re);return Jx(x,R.targetId,re.fa),re.snapshot})}(t,f,m,y);let s=yield Wx(t.localStore,e,!0),o=new NI(e,s.hs),a=o.da(s.documents),c=Ou.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);Jx(t,n,l.fa);let d=new MI(e,n,o);return t.ba.set(e,d),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),l.snapshot})}function Z4(t,e,n){return v(this,null,function*(){let r=oe(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!np(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield gI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&rE(r.remoteStore,i.targetId),OI(r,i.targetId)}).catch(Gu))):(OI(r,i.targetId),yield gI(r.localStore,i.targetId,!0))})}function eW(t,e){return v(this,null,function*(){let n=oe(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),rE(n.remoteStore,r.targetId))})}function tW(t,e,n){return v(this,null,function*(){let r=cW(t);try{let i=yield function(o,a){let c=oe(o),l=It.now(),d=a.reduce((y,E)=>y.add(E.key),ve()),f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=Wr(),x=ve();return c.os.getEntries(y,d).next(R=>{E=R,E.forEach((O,H)=>{H.isValidDocument()||(x=x.add(O))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,E)).next(R=>{f=R;let O=[];for(let H of a){let B=o4(H,f.get(H.key).overlayedDocument);B!=null&&O.push(new Kr(H.key,B,iN(B.value.mapValue),Bs.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,O,a)}).next(R=>{m=R;let O=R.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(y,R.batchId,O)})}).then(()=>({batchId:m.batchId,changes:fN(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.xa[o.currentUser.toKey()];l||(l=new et(Se)),l=l.insert(a,c),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Qu(r,i.changes),yield op(r.remoteStore)}catch(i){let s=aE(i,"Failed to persist write");n.reject(s)}})}function jN(t,e){return v(this,null,function*(){let n=oe(t);try{let r=yield R4(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Fa.get(s);o&&(je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?je(o.wa):i.removedDocuments.size>0&&(je(o.wa),o.wa=!1))}),yield Qu(n,r,e)}catch(r){yield Gu(r)}})}function Yx(t,e,n){let r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=oe(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let m of f.U_)m.j_(a)&&(l=!0)}),l&&cE(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function nW(t,e,n){return v(this,null,function*(){let r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new et(Y.comparator);o=o.insert(s,Hn.newNoDocument(s,ae.min()));let a=ve().add(s),c=new kf(ae.min(),new Map,new et(Se),o,a);yield jN(r,c),r.va=r.va.remove(s),r.Fa.delete(e),uE(r)}else yield gI(r.localStore,e,!1).then(()=>OI(r,e,n)).catch(Gu)})}function rW(t,e){return v(this,null,function*(){let n=oe(t),r=e.batch.batchId;try{let i=yield A4(n.localStore,e);$N(n,r,null),BN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Qu(n,i)}catch(i){yield Gu(i)}})}function iW(t,e,n){return v(this,null,function*(){let r=oe(t);try{let i=yield function(o,a){let c=oe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(je(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);$N(r,e,n),BN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Qu(r,i)}catch(i){yield Gu(i)}})}function BN(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function $N(t,e,n){let r=oe(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function OI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||HN(t,r)})}function HN(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(rE(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),uE(t))}function Jx(t,e,n){for(let r of n)r instanceof Wf?(t.Ma.addReference(r.key,e),sW(t,r)):r instanceof Kf?($("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||HN(t,r.key)):ne()}function sW(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||($("SyncEngine","New document in limbo: "+n),t.Ca.add(r),uE(t))}function uE(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new Y(ct.fromString(e)),r=t.Na.next();t.Fa.set(r,new PI(n)),t.va=t.va.insert(n,r),PN(t.remoteStore,new Fu(gr(tE(n.path)),r,"TargetPurposeLimboResolution",tN.oe))}}function Qu(t,e,n){return v(this,null,function*(){let r=oe(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,c)=>{o.push(r.Ba(c,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let d=l&&!l.fromCache;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){i.push(l);let d=hI.Ki(c.targetId,l);s.push(d)}}))}),yield Promise.all(o),r.Sa.h_(i),yield function(c,l){return v(this,null,function*(){let d=oe(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>P.forEach(l,m=>P.forEach(m.qi,y=>d.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>P.forEach(m.Qi,y=>d.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!Wu(f))throw f;$("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let m=f.targetId;if(!f.fromCache){let y=d.ns.get(m),E=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(E);d.ns=d.ns.insert(m,x)}}})}(r.localStore,s))})}function oW(t,e){return v(this,null,function*(){let n=oe(t);if(!n.currentUser.isEqual(e)){$("SyncEngine","User change. New user:",e.toKey());let r=yield NN(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(c=>{c.reject(new K(N.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qu(n,r.us)}})}function aW(t,e){let n=oe(t),r=n.Fa.get(e);if(r&&r.wa)return ve().add(r.key);{let i=ve(),s=n.Da.get(e);if(!s)return i;for(let o of s){let a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function qN(t){let e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nW.bind(null,e),e.Sa.h_=K4.bind(null,e.eventManager),e.Sa.ka=Q4.bind(null,e.eventManager),e}function cW(t){let e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iW.bind(null,e),e}var Qf=class{constructor(){this.synchronizeTabs=!1}initialize(e){return v(this,null,function*(){this.serializer=ip(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return S4(this.persistence,new pI,e.initialUser,this.serializer)}createPersistence(e){return new uI(dI.Hr,this.serializer)}createSharedClientState(e){return new yI}terminate(){return v(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var FI=class{initialize(e,n){return v(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Yx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=oW.bind(null,this.syncEngine),yield z4(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new AI}()}createDatastore(e){let n=ip(e.databaseInfo.databaseId),r=function(s){return new wI(s)}(e.databaseInfo);return function(s,o,a,c){return new CI(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new TI(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Yx(this.syncEngine,n,0),function(){return Bf.D()?new Bf:new _I}())}createSyncEngine(e,n){return function(i,s,o,a,c,l,d){let f=new kI(i,s,o,a,c,l);return d&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return v(this,null,function*(){var e;yield function(r){return v(this,null,function*(){let i=oe(r);$("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield Ku(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var LI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var VI=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=Sf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>v(this,null,function*(){$("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>($("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new K(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=aE(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function pw(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),$("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>v(this,null,function*(){r.isEqual(i)||(yield NN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Xx(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield lW(t);$("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Kx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Kx(e.remoteStore,i)),t._onlineComponents=e})}function uW(t){return t.name==="FirebaseError"?t.code===N.FAILED_PRECONDITION||t.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function lW(t){return v(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$("FirestoreClient","Using user provided OfflineComponentProvider");try{yield pw(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!uW(n))throw n;ya("Error using user provided cache. Falling back to memory cache: "+n),yield pw(t,new Qf)}}else $("FirestoreClient","Using default OfflineComponentProvider"),yield pw(t,new Qf);return t._offlineComponents})}function zN(t){return v(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?($("FirestoreClient","Using user provided OnlineComponentProvider"),yield Xx(t,t._uninitializedComponentsProvider._online)):($("FirestoreClient","Using default OnlineComponentProvider"),yield Xx(t,new FI))),t._onlineComponents})}function dW(t){return zN(t).then(e=>e.syncEngine)}function hW(t){return v(this,null,function*(){let e=yield zN(t),n=e.eventManager;return n.onListen=Y4.bind(null,e.syncEngine),n.onUnlisten=Z4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=J4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=eW.bind(null,e.syncEngine),n})}function fW(t,e,n={}){let r=new pr;return t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(s,o,a,c,l){let d=new LI({next:m=>{o.enqueueAndForget(()=>W4(s,f));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new K(N.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?l.reject(new K(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),f=new xI(tE(a.path),d,{includeMetadataChanges:!0,ra:!0});return G4(s,f)}(yield hW(t),t.asyncQueue,e,n,r)})),r.promise}function GN(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var Zx=new Map;function pW(t,e,n){if(!n)throw new K(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mW(t,e,n,r){if(e===!0&&r===!0)throw new K(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function eN(t){if(!Y.isDocumentKey(t))throw new K(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lE(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function Uu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=lE(t);throw new K(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Yf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ju=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new K(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new K(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new mw;switch(r.type){case"firstParty":return new vw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=Zx.get(n);r&&($("ComponentProvider","Removing Datastore"),Zx.delete(n),r.terminate())}(this),Promise.resolve()}};function WN(t,e,n,r={}){var i;let s=(t=Uu(t,ju))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=yt.MOCK_USER;else{a=sa(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new K(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new yt(l)}t._authCredentials=new gw(new Df(a,c))}}var UI=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Sn=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Bu=class t extends UI{constructor(e,n,r){super(e,n,tE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new Y(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function KN(t,e,...n){if(t=We(t),arguments.length===1&&(e=Sf.newId()),pW("doc","path",e),t instanceof ju){let r=ct.fromString(e,...n);return eN(r),new Sn(t,null,new Y(r))}{if(!(t instanceof Sn||t instanceof Bu))throw new K(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ct.fromString(e,...n));return eN(r),new Sn(t.firestore,t instanceof Bu?t.converter:null,new Y(r))}}var jI=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new $f(this,"async_queue_retry"),this.hu=()=>{let n=fw();n&&$("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=fw();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=fw();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new pr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return v(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Wu(e))throw e;$("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw zr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=DI.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&ne()}verifyOperationInProgress(){}du(){return v(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};var $u=class extends ju{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new jI}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||JN(this),this._firestoreClient.terminate()}};function QN(t,e){let n=typeof t=="object"?t:ar(),r=typeof t=="string"?t:e||"(default)",i=Vr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=ia("firestore");s&&WN(i,...s)}return i}function YN(t){return t._firestoreClient||JN(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function JN(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,d){return new bw(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,GN(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new VI(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Hu=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ht.fromBase64String(e))}catch(n){throw new K(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var qu=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Jf=class{constructor(e){this._methodName=e}};var zu=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}};var gW=/^__.*__$/,BI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Kr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ws(e,this.data,n,this.fieldTransforms)}};function XN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}var $I=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Xf(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(XN(this.fu)&&gW.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},HI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ip(e)}Fu(e,n,r,i=!1){return new $I({fu:e,methodName:n,vu:r,path:mn.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function yW(t){let e=t._freezeSettings(),n=ip(t._databaseId);return new HI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _W(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);nM("Data must be an object, but it was:",o,r);let a=eM(r,o),c,l;if(s.merge)c=new fr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let m=vW(e,f,n);if(!o.contains(m))throw new K(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);IW(d,m)||d.push(m)}c=new fr(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new BI(new $n(a),c,l)}function ZN(t,e){if(tM(t=We(t)))return nM("Unsupported field value:",e,t),eM(t,e);if(t instanceof Jf)return function(r,i){if(!XN(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=ZN(a,i.bu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return t4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=It.fromDate(r);return{timestampValue:Vf(i.serializer,s)}}if(r instanceof It){let s=new It(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vf(i.serializer,s)}}if(r instanceof zu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hu)return{bytesValue:bN(i.serializer,r._byteString)};if(r instanceof Sn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:nE(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${lE(r)}`)}(t,e)}function eM(t,e){let n={};return nN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xa(t,(r,i)=>{let s=ZN(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function tM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof It||t instanceof zu||t instanceof Hu||t instanceof Sn||t instanceof Jf)}function nM(t,e,n){if(!tM(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=lE(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function vW(t,e,n){if((e=We(e))instanceof qu)return e._internalPath;if(typeof e=="string")return rM(t,e);throw Xf("Field path arguments must be of type string or ",t,!1,void 0,n)}var wW=new RegExp("[~\\*/\\[\\]]");function rM(t,e,n){if(e.search(wW)>=0)throw Xf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qu(...e.split("."))._internalPath}catch{throw Xf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xf(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new K(N.INVALID_ARGUMENT,a+t+c)}function IW(t,e){return t.some(n=>n.isEqual(e))}var Zf=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new qI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(iM("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},qI=class extends Zf{data(){return super.data()}};function iM(t,e){return typeof e=="string"?rM(t,e):e instanceof qu?e._internalPath:e._delegate._internalPath}var zI=class{convertValue(e,n="none"){switch(qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return xa(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new zu(Ze(e.latitude),Ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=JI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Pu(e));default:return null}}convertTimestamp(e){let n=Gr(e);return new It(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ct.fromString(e);je(xN(r));let i=new Nf(r.get(1),r.get(3)),s=new Y(r.popFirst(5));return i.isEqual(n)||zr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function EW(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var GI=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ep=class extends Zf{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new WI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(iM("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},WI=class extends ep{data(e={}){return super.data(e)}};function sM(t){t=Uu(t,Sn);let e=Uu(t.firestore,$u);return fW(YN(e),t._key).then(n=>bW(e,t,n))}var KI=class extends zI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hu(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,n)}};function oM(t,e,n){t=Uu(t,Sn);let r=Uu(t.firestore,$u),i=EW(t.converter,e,n);return CW(r,[_W(yW(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Bs.none())])}function CW(t,e){return function(r,i){let s=new pr;return r.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return tW(yield dW(r),i,s)})),s.promise}(YN(t),e)}function bW(t,e,n){let r=n.docs.get(e._key),i=new KI(t);return new ep(t,i,e._key,r,new GI(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ra=i})(Dn),Tn(new xt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new $u(new yw(r.getProvider("auth-internal")),new Iw(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new K(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nf(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Me(Ax,"4.6.3",e),Me(Ax,"4.6.3","esm2017")})();var Qs=class{constructor(e){return e}},aM="firestore",dE=class{constructor(){return Ur(aM)}};var hE=new G("angularfire2.firestore-instances");function TW(t,e){let n=Ni(aM,t,e);return n&&new Qs(n)}function DW(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Qs(r)}}var SW={provide:dE,deps:[[new He,hE]]},AW={provide:Qs,useFactory:TW,deps:[[new He,hE],fn]};function cM(t,...e){return Me("angularfire",jn.full,"fst"),Gt([AW,SW,{provide:hE,useFactory:DW(t),multi:!0,deps:[be,Rt,ur,Bn,[new He,Hr],[new He,cr],...e]}])}var fE=Xe(KN,!0);var uM=Xe(sM,!0);var lM=Xe(QN,!0);var dM=Xe(oM,!0);var wr=(()=>{let e=class e{constructor(r,i,s){this.auth=r,this.router=i,this.firestore=s,this.hasRefreshed=!1,this.authStateSubject=new ut(null),this.authState=this.authStateSubject.asObservable(),Cx(this.auth,o=>{this.authStateSubject.next(o),o?sessionStorage.setItem("user",JSON.stringify(o)):sessionStorage.removeItem("user")})}signUpWithEmail(r,i,s,o){return v(this,null,function*(){return alert("Thanks for signing up. You will now be navigated to your dashboard"),Ix(this.auth,r.trim(),i.trim()).then(a=>v(this,null,function*(){sessionStorage.setItem("user",JSON.stringify(a.user));let c=fE(this.firestore,`users/${a.user.uid}`);return yield dM(c,{email:a.user.email,firstName:s,lastName:o,createdAt:new Date}),a}))})}login(r,i){return alert("Welcome!"),bx(this.auth,r.trim(),i.trim())}signOut(){return v(this,null,function*(){try{yield Tx(this.auth),this.router.navigate(["/login"]),console.log("User signed out"),this.hasRefreshed=!1}catch(r){console.error("Error signing out:",r.message)}})}getUserDetails(r){return v(this,null,function*(){let i=fE(this.firestore,`users/${r}`),s=yield uM(i);return s.exists()?s.data():null})}};e.\u0275fac=function(i){return new(i||e)(X(pn),X(wt),X(Qs))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var hM=(()=>{let e=class e{constructor(r,i){this.router=r,this.authService=i,this.hasRefreshed=!1}signIn(r,i,s){r.preventDefault(),this.authService.login(i,s).then(()=>{alert("Thanks for logging in"),this.router.navigate(["/dashboard"]),this.hasRefreshed||setTimeout(()=>{window.location.reload(),this.hasRefreshed=!0,console.log(this.hasRefreshed)},1)}).catch(o=>{console.error("Error signing in:",o.message),alert("Sign in failed. Please try again.")}).finally(()=>{i="",s=""})}};e.\u0275fac=function(i){return new(i||e)(q(wt),q(wr))},e.\u0275cmp=ze({type:e,selectors:[["app-login"]],standalone:!0,features:[Ge],decls:22,vars:0,consts:[["email",""],["password",""],[1,"h-screen","bg-white","dark:bg-black"],[1,"login-container"],[1,"pb-5","text-3xl","font-semibold","text-rose-700"],[1,"form-lg","text-center",3,"submit"],[1,"m-0","mx-auto","my-auto"],[1,"form-group"],["for","username",1,"dark:text-gray-300"],["type","email","id","username","name","username","required","",1,"border-2","border-black","rounded-md","px-7","text-center"],["for","password",1,"ml","dark:text-gray-300"],["type","password","id","password","name","password","required","",1,"border-2","border-black","rounded-md","px-7","text-center","ml-2"],["type","submit",1,"btn-login"],[1,"text-white","text-xl","font-semibold","mt-4"],["routerLink","/signup",1,"btn-login","mt-3"]],template:function(i,s){if(i&1){let o=Ho();L(0,"div",2)(1,"div",3)(2,"h2",4),j(3,"Welcome!"),k(),L(4,"form",5),Oe("submit",function(c){ms(o);let l=Mr(10),d=Mr(15);return gs(s.signIn(c,l.value,d.value))}),L(5,"div",6)(6,"div",7)(7,"label",8),j(8,"Username: "),k(),we(9,"input",9,0),k(),L(11,"div",7)(12,"label",10),j(13,"Password:"),k(),we(14,"input",11,1),k()(),L(16,"button",12),j(17,"Login"),k()(),L(18,"p",13),j(19,"or"),k(),L(20,"button",14),j(21,"Signup"),k()()()}},dependencies:[ta],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh}.form-group[_ngcontent-%COMP%]{margin:0 auto 20px}.btn-login[_ngcontent-%COMP%]{padding:5px 70px;font-size:18px;background-color:#be123c;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.btn-login[_ngcontent-%COMP%]:hover{background-color:#881337}"]});let t=e;return t})();var ap=(()=>{let e=class e{constructor(r,i){this.router=r,this.authService=i,this.darkMode=!1}ngOnInit(){if(typeof localStorage<"u"){let r=localStorage.getItem("darkMode");r!==null&&(this.darkMode=JSON.parse(r),this.applyDarkMode())}else console.error("localStorage is not available.")}toggleDarkMode(){this.darkMode=!this.darkMode,this.applyDarkMode(),localStorage.setItem("darkMode",JSON.stringify(this.darkMode))}applyDarkMode(){this.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}};e.\u0275fac=function(i){return new(i||e)(q(wt),q(wr))},e.\u0275cmp=ze({type:e,selectors:[["app-root"]],standalone:!0,features:[Ge],decls:1,vars:0,template:function(i,s){i&1&&we(0,"router-outlet")},dependencies:[U_],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;font-family:Arial,sans-serif}.btn-sign-in[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;font-size:18px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.btn-sign-in[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]});let t=e;return t})();var pE=()=>["/dashboard"],mE=()=>["#"];function NW(t,e){if(t&1){let n=Ho();L(0,"div",9)(1,"a",10),j(2,"Home"),k(),L(3,"a",11),Oe("click",function(i){ms(n);let s=lh();return gs(s.toggleDarkMode(i))}),j(4,"Dark"),k(),L(5,"a",11),Oe("click",function(i){ms(n);let s=lh();return gs(s.signOut(i))}),j(6,"Sign Out"),k()()}if(t&2){let n=lh();qe(),cn("routerLink",n.isLoggedIn?Is(1,pE):Is(2,mE))}}var Ma=(()=>{let e=class e{constructor(r,i){this.AppComponent=r,this.authService=i,this.isLoggedIn=!1,this.isMenuOpen=!1}ngOnInit(){this.authService.authState.subscribe(r=>{this.isLoggedIn=!!r})}toggleDarkMode(r){r.preventDefault(),this.AppComponent.toggleDarkMode()}signOut(r){r.preventDefault(),this.authService.signOut()}toggleMenu(){this.isMenuOpen=!this.isMenuOpen,console.log(this.isMenuOpen)}};e.\u0275fac=function(i){return new(i||e)(q(ap),q(wr))},e.\u0275cmp=ze({type:e,selectors:[["app-navbar"]],standalone:!0,features:[Ge],decls:16,vars:7,consts:[[1,"bg-white","dark:bg-zinc-950","shadow-sm","shadow-rose-100","dark:shadow-rose-950","px-4","py-7","fixed","w-full","top-0","z-20","transition-all","duration-500","ease-in-out"],[1,"container","mx-auto","flex","justify-between","items-center"],[1,"text-rose-600","dark:text-rose-600","dark:hover:text-rose-800","font-bold","lg:text-2xl","md:text-xl",3,"routerLink"],[1,"hidden","lg:flex"],[1,"text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800","lg:px-4","sm:px-4",3,"routerLink"],["href","#",1,"text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800","lg:px-4","sm:px-4",3,"click"],[1,"lg:hidden"],[1,"text-rose-600","dark:text-rose-600","focus:outline-none",3,"click"],["class","lg:hidden absolute top-full left-0 w-full bg-white dark:bg-zinc-950 shadow-md transition-all duration-500 ease-in-out",4,"ngIf"],[1,"lg:hidden","absolute","top-full","left-0","w-full","bg-white","dark:bg-zinc-950","shadow-md","transition-all","duration-500","ease-in-out"],[1,"block","py-2","px-4","text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800",3,"routerLink"],["href","#",1,"block","py-2","px-4","text-rose-600","hover:text-rose-900","font-semibold","dark:text-rose-600","dark:hover:text-rose-800",3,"click"]],template:function(i,s){i&1&&(L(0,"nav",0)(1,"div",1)(2,"div")(3,"a",2),j(4,"Angular Banking"),k()(),L(5,"div",3)(6,"a",4),j(7,"Home"),k(),L(8,"a",5),Oe("click",function(a){return s.toggleDarkMode(a)}),j(9,"Dark"),k(),L(10,"a",5),Oe("click",function(a){return s.signOut(a)}),j(11,"Sign Out"),k()(),L(12,"div",6)(13,"button",7),Oe("click",function(){return s.toggleMenu()}),j(14," \u2630 "),k()(),$o(15,NW,7,3,"div",8),k()()),i&2&&(qe(3),cn("routerLink",s.isLoggedIn?Is(3,pE):Is(4,mE)),qe(3),cn("routerLink",s.isLoggedIn?Is(5,pE):Is(6,mE)),qe(9),cn("ngIf",s.isMenuOpen))},dependencies:[ta,Vn,Th],styles:[".dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 10px);left:0;z-index:10;background-color:#fff;border:1px solid #e5e7eb;box-shadow:0 2px 4px #0000001a;padding:8px 0;width:100%}.dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:8px 16px;color:#333;text-decoration:none;transition:background-color .3s ease}.dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.dropdown-menu-dark[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 10px);left:0;z-index:10;background-color:#000;border:1px solid #e5e7eb;box-shadow:0 2px 4px #0000001a;padding:8px 0;width:100%}.dropdown-menu-dark[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:8px 16px;color:#333;text-decoration:none;transition:background-color .3s ease}.dropdown-menu-dark[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}"]});let t=e;return t})();var Pa=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ze({type:e,selectors:[["app-footer"]],standalone:!0,features:[Ge],decls:4,vars:0,consts:[[1,"bg-rose-700","dark:bg-zinc-950","text-white","dark:text-gray-300","text-center","py-4","shadow-inner","shadow-slate-300","dark:shadow-rose-950","transition-all","duration-500","ease-in-out"],[1,"container","mx-auto"],[1,"text-md","font-semibold"]],template:function(i,s){i&1&&(L(0,"footer",0)(1,"div",1)(2,"p",2),j(3,"\xA9 2024 Angular Banking - Hakeem Ellis | All Rights Reserved"),k()()())}});let t=e;return t})();var fM="@firebase/database",pM="1.0.5";var _C="";function MW(t){_C=t}var CE=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),pt(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ra(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var bE=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ir(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var WM=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new CE(e)}}catch{}return new bE},Js=WM("localStorage"),TE=WM("sessionStorage");var Fa=new sr("@firebase/database"),PW=function(){let t=1;return function(){return t++}}(),KM=function(t){let e=uR(t),n=new qh;n.update(e);let r=n.digest();return zh.encodeByteArray(r)},hl=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=hl.apply(null,r):typeof r=="object"?e+=pt(r):e+=r,e+=" "}return e},Zs=null,mM=!0,kW=function(t,e){M(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Fa.logLevel=fe.VERBOSE,Zs=Fa.log.bind(Fa),e&&TE.set("logging_enabled",!0)):typeof t=="function"?Zs=t:(Zs=null,TE.remove("logging_enabled"))},Pt=function(...t){if(mM===!0&&(mM=!1,Zs===null&&TE.get("logging_enabled")===!0&&kW(!0)),Zs){let e=hl.apply(null,t);Zs(e)}},fl=function(t){return function(...e){Pt(t,...e)}},DE=function(...t){let e="FIREBASE INTERNAL ERROR: "+hl(...t);Fa.error(e)},Qr=function(...t){let e=`FIREBASE FATAL ERROR: ${hl(...t)}`;throw Fa.error(e),new Error(e)},Xt=function(...t){let e="FIREBASE WARNING: "+hl(...t);Fa.warn(e)},OW=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Xt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},QM=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},FW=function(t){if(rr()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ua="[MIN_NAME]",eo="[MAX_NAME]",Ga=function(t,e){if(t===e)return 0;if(t===Ua||e===eo)return-1;if(e===Ua||t===eo)return 1;{let n=gM(t),r=gM(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},LW=function(t,e){return t===e?0:t<e?-1:1},Ju=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+pt(e))},vC=function(t){if(typeof t!="object"||t===null)return pt(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=pt(e[r]),n+=":",n+=vC(t[e[r]]);return n+="}",n},YM=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Zt(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var JM=function(t){M(!QM(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let d=l.join(""),f="";for(c=0;c<64;c+=8){let m=parseInt(d.substr(c,8),2).toString(16);m.length===1&&(m="0"+m),f=f+m}return f.toLowerCase()},VW=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},UW=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function jW(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var BW=new RegExp("^-?(0*)\\d{1,10}$"),$W=-2147483648,HW=2147483647,gM=function(t){if(BW.test(t)){let e=Number(t);if(e>=$W&&e<=HW)return e}return null},Wa=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Xt("Exception was thrown by user callback.",n),e},Math.floor(0))}},qW=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},nl=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var SE=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Xt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var AE=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Pt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xt(e)}},rl=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),up="5",XM="v",ZM="s",eP="r",tP="f",nP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,rP="ls",iP="p",RE="ac",sP="websocket",oP="long_polling";var lp=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Js.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Js.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function zW(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function aP(t,e,n){M(typeof e=="string","typeof type must == string"),M(typeof n=="object","typeof params must == object");let r;if(e===sP)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===oP)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);zW(t)&&(n.ns=t.namespace);let i=[];return Zt(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var xE=class{constructor(){this.counters_={}}incrementCounter(e,n=1){ir(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return ZA(this.counters_)}};var gE={},yE={};function wC(t){let e=t.toString();return gE[e]||(gE[e]=new xE),gE[e]}function GW(t,e){let n=t.toString();return yE[n]||(yE[n]=e()),yE[n]}var NE=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Wa(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var yM="start",WW="close",KW="pLPCommand",QW="pRTLPCB",cP="id",uP="pw",lP="ser",YW="cb",JW="seg",XW="ts",ZW="d",e3="dframe",dP=1870,hP=30,t3=dP-hP,n3=25e3,r3=3e4,ME=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fl(e),this.stats_=wC(n),this.urlFn=c=>(this.appCheckToken&&(c[RE]=this.appCheckToken),aP(n,oP,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new NE(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(r3)),FW(()=>{if(this.isClosed_)return;this.scriptTagHolder=new PE((...s)=>{let[o,a,c,l,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===yM)this.id=a,this.password=c;else if(o===WW)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[yM]="t",r[lP]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[YW]=this.scriptTagHolder.uniqueCallbackIdentifier),r[XM]=up,this.transportSessionId&&(r[ZM]=this.transportSessionId),this.lastSessionId&&(r[rP]=this.lastSessionId),this.applicationId&&(r[iP]=this.applicationId),this.appCheckToken&&(r[RE]=this.appCheckToken),typeof location<"u"&&location.hostname&&nP.test(location.hostname)&&(r[eP]=tP);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return rr()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!VW()&&!UW()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=pt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Y_(n),i=YM(r,t3);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(rr())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[e3]="t",r[cP]=e,r[uP]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=pt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},PE=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,rr())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=PW(),window[KW+this.uniqueCallbackIdentifier]=e,window[QW+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Pt("frame writing exception"),a.stack&&Pt(a.stack),Pt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Pt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[cP]=this.myID,e[uP]=this.myPW,e[lP]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+hP+r.length<=dP;){let o=this.pendingSegs.shift();r=r+"&"+JW+i+"="+o.seg+"&"+XW+i+"="+o.ts+"&"+ZW+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(n3)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){rr()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Pt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var i3=16384,s3=45e3,dp=null;typeof MozWebSocket<"u"?dp=MozWebSocket:typeof WebSocket<"u"&&(dp=WebSocket);var Xu=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fl(this.connId),this.stats_=wC(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[XM]=up,!rr()&&typeof location<"u"&&location.hostname&&nP.test(location.hostname)&&(a[eP]=tP),r&&(a[ZM]=r),i&&(a[rP]=i),s&&(a[RE]=s),o&&(a[iP]=o),aP(n,sP,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Js.set("previous_websocket_failure",!0);try{let i;if(rr()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${up}/${_C}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new dp(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&dp!==null&&!t.forceDisallow_}static previouslyFailed(){return Js.isInMemoryStorage||Js.get("previous_websocket_failure")===!0}markConnectionHealthy(){Js.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=ra(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(M(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=pt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=YM(r,i3);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(s3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),o3=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[ME,Xu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Xu&&Xu.isAvailable(),i=r&&!Xu.previouslyFailed();if(n.webSocketOnly&&(r||Xt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Xu];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),a3=6e4,c3=5e3,u3=10*1024,l3=100*1024,_E="t",_M="d",d3="s",vM="r",h3="e",wM="o",IM="a",EM="n",CM="p",f3="h",kE=class{constructor(e,n,r,i,s,o,a,c,l,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fl("c:"+this.id+":"),this.transportManager_=new o3(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=nl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>l3?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>u3?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(_E in e){let n=e[_E];n===IM?this.upgradeIfSecondaryHealthy_():n===vM?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===wM&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Ju("t",e),r=Ju("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:CM,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:IM,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:EM,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Ju("t",e),r=Ju("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Ju(_E,e);if(_M in e){let r=e[_M];if(n===f3){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===EM){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===d3?this.onConnectionShutdown_(r):n===vM?this.onReset_(r):n===h3?DE("Server Error: "+r):n===wM?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):DE("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),up!==r&&Xt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),nl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(a3))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):nl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(c3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:CM,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Js.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var hp=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var fp=class{constructor(e){this.allowedEvents_=e,this.listeners_={},M(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){M(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var pp=class t extends fp{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!lu()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return M(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var bM=32,TM=768,Pe=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Ae(){return new Pe("")}function pe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Bi(t){return t.pieces_.length-t.pieceNum_}function Be(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Pe(t.pieces_,e)}function fP(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function p3(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function pP(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function mP(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Pe(e,0)}function gt(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Pe)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Pe(n,0)}function ge(t){return t.pieceNum_>=t.pieces_.length}function Jt(t,e){let n=pe(t),r=pe(e);if(n===null)return e;if(n===r)return Jt(Be(t),Be(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function IC(t,e){if(Bi(t)!==Bi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function zn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Bi(t)>Bi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var OE=class{constructor(e,n){this.errorPrefix_=n,this.parts_=pP(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=fu(this.parts_[r]);gP(this)}};function m3(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=fu(e),gP(t)}function g3(t){let e=t.parts_.pop();t.byteLength_-=fu(e),t.parts_.length>0&&(t.byteLength_-=1)}function gP(t){if(t.byteLength_>TM)throw new Error(t.errorPrefix_+"has a key path longer than "+TM+" bytes ("+t.byteLength_+").");if(t.parts_.length>bM)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+bM+") or object contains a cycle "+Ys(t))}function Ys(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var FE=class t extends fp{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return M(e==="visible","Unknown event type: "+e),[this.visible_]}};var Zu=1e3,y3=60*5*1e3,DM=30*1e3,_3=1.3,v3=3e4,w3="server_kill",SM=3,EC=(()=>{class t extends hp{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=fl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Zu,this.maxReconnectDelay_=y3,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!rr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");FE.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&pp.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(pt(o)),M(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new Ri,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),M(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),M(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,d=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(d,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&ir(n,"w")){let i=Rs(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Xt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||aR(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=DM)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=oR(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),M(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+pt(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):DE("Unrecognized action received from server: "+pt(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){M(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Zu,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Zu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>v3&&(this.reconnectDelay_=Zu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*_3)}this.onConnectStatus_(!1)}establishConnection_(){return v(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},d=function(m){M(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(m)};this.realtime_={close:l,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[m,y]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?Pt("getToken() completed but was canceled"):(Pt("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=y&&y.token,c=new kE(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,E=>{Xt(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(w3)},o))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&Xt(m),l())}}})}interrupt(n){Pt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Pt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],du(this.interruptReasons_)&&(this.reconnectDelay_=Zu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>vC(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new Pe(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){Pt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=SM&&(this.reconnectDelay_=DM,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Pt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=SM&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";rr()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+_C.replace(/\./g,"-")]=1,lu()?n["framework.cordova"]=1:Wh()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=pp.getInstance().currentlyOnline();return du(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),me=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var ja=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new me(Ua,e),i=new me(Ua,n);return this.compare(r,i)!==0}minPost(){return me.MIN}};var cp,mp=class extends ja{static get __EMPTY_NODE(){return cp}static set __EMPTY_NODE(e){cp=e}compare(e,n){return Ga(e.name,n.name)}isDefinedOn(e){throw As("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return me.MIN}maxPost(){return new me(eo,cp)}makePost(e,n){return M(typeof e=="string","KeyIndex indexValue must always be a string."),new me(e,cp)}toString(){return".key"}},La=new mp;var Oa=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},qn=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??An.EMPTY_NODE,this.right=o??An.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return An.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return An.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),LE=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new qn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},An=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,qn.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,qn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Oa(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Oa(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Oa(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Oa(this.root_,null,this.comparator_,!0,e)}};An.EMPTY_NODE=new LE;function I3(t,e){return Ga(t.name,e.name)}function CC(t,e){return Ga(t,e)}var VE;function E3(t){VE=t}var yP=function(t){return typeof t=="number"?"number:"+JM(t):"string:"+t},_P=function(t){if(t.isLeafNode()){let e=t.val();M(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ir(e,".sv"),"Priority must be a string or number.")}else M(t===VE||t.isEmpty(),"priority of unexpected type.");M(t===VE||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var AM,Ba=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,M(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),_P(this.priorityNode_)}static set __childrenNodeConstructor(n){AM=n}static get __childrenNodeConstructor(){return AM}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ge(n)?this:pe(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=pe(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(M(i!==".priority"||Bi(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Be(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+yP(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=JM(this.value_):n+=this.value_,this.lazyHash_=KM(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(M(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return M(s>=0,"Unknown leaf type: "+r),M(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),vP,wP;function C3(t){vP=t}function b3(t){wP=t}var UE=class extends ja{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Ga(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return me.MIN}maxPost(){return new me(eo,new Ba("[PRIORITY-POST]",wP))}makePost(e,n){let r=vP(e);return new me(n,new Ba("[PRIORITY-POST]",r))}toString(){return".priority"}},tt=new UE;var T3=Math.log(2),jE=class{constructor(e){let n=s=>parseInt(Math.log(s)/T3,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},gp=function(t,e,n,r){t.sort(e);let i=function(c,l){let d=l-c,f,m;if(d===0)return null;if(d===1)return f=t[c],m=n?n(f):f,new qn(m,f.node,qn.BLACK,null,null);{let y=parseInt(d/2,10)+c,E=i(c,y),x=i(y+1,l);return f=t[y],m=n?n(f):f,new qn(m,f.node,qn.BLACK,E,x)}},s=function(c){let l=null,d=null,f=t.length,m=function(E,x){let R=f-E,O=f;f-=E;let H=i(R+1,O),B=t[R],z=n?n(B):B;y(new qn(z,B.node,x,null,H))},y=function(E){l?(l.left=E,l=E):(d=E,l=E)};for(let E=0;E<c.count;++E){let x=c.nextBitIsOne(),R=Math.pow(2,c.count-(E+1));x?m(R,qn.BLACK):(m(R,qn.BLACK),m(R,qn.RED))}return d},o=new jE(t.length),a=s(o);return new An(r||e,a)};var vE,ka={},$a=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return M(ka&&tt,"ChildrenNode.ts has not been loaded"),vE=vE||new t({".priority":ka},{".priority":tt}),vE}get(e){let n=Rs(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof An?n:null}hasIndex(e){return ir(this.indexSet_,e.toString())}addIndex(e,n){M(e!==La,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(me.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=gp(r,e.getCompare()):a=ka;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new t(d,l)}addToIndexes(e,n){let r=hu(this.indexes_,(i,s)=>{let o=Rs(this.indexSet_,s);if(M(o,"Missing index implementation for "+s),i===ka)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(me.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),gp(a,o.getCompare())}else return ka;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new me(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=hu(this.indexes_,i=>{if(i===ka)return i;{let s=n.get(e.name);return s?i.remove(new me(e.name,s)):i}});return new t(r,this.indexSet_)}};var el,ue=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&_P(this.priorityNode_),this.children_.isEmpty()&&M(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return el||(el=new t(new An(CC),null,$a.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||el}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?el:r}}getChild(n){let r=pe(n);return r===null?this:this.getImmediateChild(r).getChild(Be(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(M(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new me(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?el:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=pe(n);if(i===null)return r;{M(pe(n)!==".priority"||Bi(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Be(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(tt,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+yP(this.getPriority().val())+":"),this.forEachChild(tt,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":KM(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new me(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new me(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new me(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,me.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,me.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===pl?-1:0}withIndex(n){if(n===La||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===La||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(tt),s=r.getIterator(tt),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===La?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),BE=class extends ue{constructor(){super(new An(CC),ue.EMPTY_NODE,$a.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ue.EMPTY_NODE}isEmpty(){return!1}},pl=new BE;Object.defineProperties(me,{MIN:{value:new me(Ua,ue.EMPTY_NODE)},MAX:{value:new me(eo,pl)}});mp.__EMPTY_NODE=ue.EMPTY_NODE;Ba.__childrenNodeConstructor=ue;E3(pl);b3(pl);var D3=!0;function Et(t,e=null){if(t===null)return ue.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),M(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Ba(n,Et(e))}if(!(t instanceof Array)&&D3){let n=[],r=!1;if(Zt(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=Et(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new me(o,c)))}}),n.length===0)return ue.EMPTY_NODE;let s=gp(n,I3,o=>o.name,CC);if(r){let o=gp(n,tt.getCompare());return new ue(s,Et(e),new $a({".priority":o},{".priority":tt}))}else return new ue(s,Et(e),$a.Default)}else{let n=ue.EMPTY_NODE;return Zt(t,(r,i)=>{if(ir(t,r)&&r.substring(0,1)!=="."){let s=Et(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Et(e))}}C3(Et);var $E=class extends ja{constructor(e){super(),this.indexPath_=e,M(!ge(e)&&pe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Ga(e.name,n.name):s}makePost(e,n){let r=Et(e),i=ue.EMPTY_NODE.updateChild(this.indexPath_,r);return new me(n,i)}maxPost(){let e=ue.EMPTY_NODE.updateChild(this.indexPath_,pl);return new me(eo,e)}toString(){return pP(this.indexPath_,0).join("/")}};var HE=class extends ja{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Ga(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return me.MIN}maxPost(){return me.MAX}makePost(e,n){let r=Et(e);return new me(n,r)}toString(){return".value"}},S3=new HE;function IP(t){return{type:"value",snapshotNode:t}}function Ha(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function al(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function cl(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function A3(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var ul=class{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){M(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(al(n,a)):M(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ha(n,r)):o.trackChildChange(cl(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(tt,(i,s)=>{n.hasChild(i)||r.trackChildChange(al(i,s))}),n.isLeafNode()||n.forEachChild(tt,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(cl(i,s,o))}else r.trackChildChange(Ha(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ue.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var yp=class t{constructor(e){this.indexedFilter_=new ul(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new me(n,r))||(r=ue.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ue.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(ue.EMPTY_NODE);let s=this;return n.forEachChild(tt,(o,a)=>{s.matches(new me(o,a))||(i=i.updateImmediateChild(o,ue.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var qE=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new yp(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new me(n,r))||(r=ue.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=ue.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=ue.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(ue.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,ue.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){let f=this.index_.getCompare();o=(m,y)=>f(y,m)}else o=this.index_.getCompare();let a=e;M(a.numChildren()===this.limit_,"");let c=new me(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(a.hasChild(n)){let f=a.getImmediateChild(n),m=i.getChildAfterChild(this.index_,l,this.reverse_);for(;m!=null&&(m.name===n||a.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);let y=m==null?1:o(m,c);if(d&&!r.isEmpty()&&y>=0)return s?.trackChildChange(cl(n,r,f)),a.updateImmediateChild(n,r);{s?.trackChildChange(al(n,f));let x=a.updateImmediateChild(n,ue.EMPTY_NODE);return m!=null&&this.rangedFilter_.matches(m)?(s?.trackChildChange(Ha(m.name,m.node)),x.updateImmediateChild(m.name,m.node)):x}}else return r.isEmpty()?e:d&&o(l,c)>=0?(s!=null&&(s.trackChildChange(al(l.name,l.node)),s.trackChildChange(Ha(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,ue.EMPTY_NODE)):e}};var zE=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=tt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return M(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return M(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ua}hasEnd(){return this.endSet_}getIndexEndValue(){return M(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return M(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:eo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return M(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===tt}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function R3(t){return t.loadsAllData()?new ul(t.getIndex()):t.hasLimit()?new qE(t):new yp(t)}function RM(t){let e={};if(t.isDefault())return e;let n;if(t.index_===tt?n="$priority":t.index_===S3?n="$value":t.index_===La?n="$key":(M(t.index_ instanceof $E,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=pt(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=pt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+pt(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=pt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+pt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function xM(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==tt&&(e.i=t.index_.toString()),e}var GE=class t extends hp{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=fl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(M(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=RM(e._queryParams);this.restRequest_(s+".json",c,(l,d)=>{let f=d;if(l===404&&(f=null,l=null),l===null&&this.onDataUpdate_(s,f,!1,r),Rs(this.listens_,o)===a){let m;l?l===401?m="permission_denied":m="rest_error:"+l:m="ok",i(m,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=RM(e._queryParams),r=e._path.toString(),i=new Ri;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ns(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ra(a.responseText)}catch{Xt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Xt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var WE=class{constructor(){this.rootNode_=ue.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function _p(){return{value:null,children:new Map}}function EP(t,e,n){if(ge(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=pe(e);t.children.has(r)||t.children.set(r,_p());let i=t.children.get(r);e=Be(e),EP(i,e,n)}}function KE(t,e,n){t.value!==null?n(e,t.value):x3(t,(r,i)=>{let s=new Pe(e.toString()+"/"+r);KE(i,s,n)})}function x3(t,e){t.children.forEach((n,r)=>{e(r,n)})}var QE=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Zt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var NM=10*1e3,N3=30*1e3,M3=5*60*1e3,YE=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new QE(e);let r=NM+(N3-NM)*Math.random();nl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Zt(e,(i,s)=>{s>0&&ir(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),nl(this.reportStats_.bind(this),Math.floor(Math.random()*2*M3))}};var Ir=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Ir||{});function CP(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function bC(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function TC(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var JE=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Ir.ACK_USER_WRITE,this.source=CP()}operationForChild(e){if(ge(this.path)){if(this.affectedTree.value!=null)return M(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Pe(e));return new t(Ae(),n,this.revert)}}else return M(pe(this.path)===e,"operationForChild called for unrelated child."),new t(Be(this.path),this.affectedTree,this.revert)}};var vp=class t{constructor(e,n){this.source=e,this.path=n,this.type=Ir.LISTEN_COMPLETE}operationForChild(e){return ge(this.path)?new t(this.source,Ae()):new t(this.source,Be(this.path))}};var qa=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Ir.OVERWRITE}operationForChild(e){return ge(this.path)?new t(this.source,Ae(),this.snap.getImmediateChild(e)):new t(this.source,Be(this.path),this.snap)}};var wp=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Ir.MERGE}operationForChild(e){if(ge(this.path)){let n=this.children.subtree(new Pe(e));return n.isEmpty()?null:n.value?new qa(this.source,Ae(),n.value):new t(this.source,Ae(),n)}else return M(pe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Be(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Yr=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ge(e))return this.isFullyInitialized()&&!this.filtered_;let n=pe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var XE=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function P3(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(A3(o.childName,o.snapshotNode))}),tl(t,i,"child_removed",e,r,n),tl(t,i,"child_added",e,r,n),tl(t,i,"child_moved",s,r,n),tl(t,i,"child_changed",e,r,n),tl(t,i,"value",e,r,n),i}function tl(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>O3(t,a,c)),o.forEach(a=>{let c=k3(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function k3(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function O3(t,e,n){if(e.childName==null||n.childName==null)throw As("Should only compare child_ events.");let r=new me(e.childName,e.snapshotNode),i=new me(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function kp(t,e){return{eventCache:t,serverCache:e}}function il(t,e,n,r){return kp(new Yr(e,n,r),t.serverCache)}function bP(t,e,n,r){return kp(t.eventCache,new Yr(e,n,r))}function ZE(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function to(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var wE,F3=()=>(wE||(wE=new An(LW)),wE),en=class t{constructor(e,n=F3()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Zt(e,(r,i)=>{n=n.set(new Pe(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ae(),value:this.value};if(ge(e))return null;{let r=pe(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Be(e),n);return s!=null?{path:gt(new Pe(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ge(e))return this;{let n=pe(e),r=this.children.get(n);return r!==null?r.subtree(Be(e)):new t(null)}}set(e,n){if(ge(e))return new t(n,this.children);{let r=pe(e),s=(this.children.get(r)||new t(null)).set(Be(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(ge(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=pe(e),r=this.children.get(n);if(r){let i=r.remove(Be(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(ge(e))return this.value;{let n=pe(e),r=this.children.get(n);return r?r.get(Be(e)):null}}setTree(e,n){if(ge(e))return n;{let r=pe(e),s=(this.children.get(r)||new t(null)).setTree(Be(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(Ae(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(gt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Ae(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(ge(e))return null;{let s=pe(e),o=this.children.get(s);return o?o.findOnPath_(Be(e),gt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ae(),n)}foreachOnPath_(e,n,r){if(ge(e))return this;{this.value&&r(n,this.value);let i=pe(e),s=this.children.get(i);return s?s.foreachOnPath_(Be(e),gt(n,i),r):new t(null)}}foreach(e){this.foreach_(Ae(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(gt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Gn=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new en(null))}};function sl(t,e,n){if(ge(e))return new Gn(new en(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Jt(i,e);return s=s.updateChild(o,n),new Gn(t.writeTree_.set(i,s))}else{let i=new en(n),s=t.writeTree_.setTree(e,i);return new Gn(s)}}}function MM(t,e,n){let r=t;return Zt(n,(i,s)=>{r=sl(r,gt(e,i),s)}),r}function PM(t,e){if(ge(e))return Gn.empty();{let n=t.writeTree_.setTree(e,new en(null));return new Gn(n)}}function eC(t,e){return ro(t,e)!=null}function ro(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Jt(n.path,e)):null}function kM(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(tt,(r,i)=>{e.push(new me(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new me(r,i.value))}),e}function ji(t,e){if(ge(e))return t;{let n=ro(t,e);return n!=null?new Gn(new en(n)):new Gn(t.writeTree_.subtree(e))}}function tC(t){return t.writeTree_.isEmpty()}function za(t,e){return TP(Ae(),t.writeTree_,e)}function TP(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(M(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=TP(gt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(gt(t,".priority"),r)),n}}function DC(t,e){return RP(e,t)}function L3(t,e,n,r,i){M(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=sl(t.visibleWrites,e,n)),t.lastWriteId=r}function V3(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function U3(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);M(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&j3(a,r.path)?i=!1:zn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return B3(t),!0;if(r.snap)t.visibleWrites=PM(t.visibleWrites,r.path);else{let a=r.children;Zt(a,c=>{t.visibleWrites=PM(t.visibleWrites,gt(r.path,c))})}return!0}else return!1}function j3(t,e){if(t.snap)return zn(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&zn(gt(t.path,n),e))return!0;return!1}function B3(t){t.visibleWrites=DP(t.allWrites,$3,Ae()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function $3(t){return t.visible}function DP(t,e,n){let r=Gn.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)zn(n,o)?(a=Jt(n,o),r=sl(r,a,s.snap)):zn(o,n)&&(a=Jt(o,n),r=sl(r,Ae(),s.snap.getChild(a)));else if(s.children){if(zn(n,o))a=Jt(n,o),r=MM(r,a,s.children);else if(zn(o,n))if(a=Jt(o,n),ge(a))r=MM(r,Ae(),s.children);else{let c=Rs(s.children,pe(a));if(c){let l=c.getChild(Be(a));r=sl(r,Ae(),l)}}}else throw As("WriteRecord should have .snap or .children")}}return r}function SP(t,e,n,r,i){if(!r&&!i){let s=ro(t.visibleWrites,e);if(s!=null)return s;{let o=ji(t.visibleWrites,e);if(tC(o))return n;if(n==null&&!eC(o,Ae()))return null;{let a=n||ue.EMPTY_NODE;return za(o,a)}}}else{let s=ji(t.visibleWrites,e);if(!i&&tC(s))return n;if(!i&&n==null&&!eC(s,Ae()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(zn(l.path,e)||zn(e,l.path))},a=DP(t.allWrites,o,e),c=n||ue.EMPTY_NODE;return za(a,c)}}}function H3(t,e,n){let r=ue.EMPTY_NODE,i=ro(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(tt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=ji(t.visibleWrites,e);return n.forEachChild(tt,(o,a)=>{let c=za(ji(s,new Pe(o)),a);r=r.updateImmediateChild(o,c)}),kM(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=ji(t.visibleWrites,e);return kM(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function q3(t,e,n,r,i){M(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=gt(e,n);if(eC(t.visibleWrites,s))return null;{let o=ji(t.visibleWrites,s);return tC(o)?i.getChild(n):za(o,i.getChild(n))}}function z3(t,e,n,r){let i=gt(e,n),s=ro(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=ji(t.visibleWrites,i);return za(o,r.getNode().getImmediateChild(n))}else return null}function G3(t,e){return ro(t.visibleWrites,e)}function W3(t,e,n,r,i,s,o){let a,c=ji(t.visibleWrites,e),l=ro(c,Ae());if(l!=null)a=l;else if(n!=null)a=za(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),y=m.getNext();for(;y&&d.length<i;)f(y,r)!==0&&d.push(y),y=m.getNext();return d}else return[]}function K3(){return{visibleWrites:Gn.empty(),allWrites:[],lastWriteId:-1}}function Ip(t,e,n,r){return SP(t.writeTree,t.treePath,e,n,r)}function SC(t,e){return H3(t.writeTree,t.treePath,e)}function OM(t,e,n,r){return q3(t.writeTree,t.treePath,e,n,r)}function Ep(t,e){return G3(t.writeTree,gt(t.treePath,e))}function Q3(t,e,n,r,i,s){return W3(t.writeTree,t.treePath,e,n,r,i,s)}function AC(t,e,n){return z3(t.writeTree,t.treePath,e,n)}function AP(t,e){return RP(gt(t.treePath,e),t.writeTree)}function RP(t,e){return{treePath:t,writeTree:e}}var nC=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;M(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),M(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,cl(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,al(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Ha(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,cl(r,e.snapshotNode,i.oldSnap));else throw As("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var rC=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},xP=new rC,ll=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Yr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return AC(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:to(this.viewCache_),s=Q3(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function Y3(t){return{filter:t}}function J3(t,e){M(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),M(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function X3(t,e,n,r,i){let s=new nC,o,a;if(n.type===Ir.OVERWRITE){let l=n;l.source.fromUser?o=iC(t,e,l.path,l.snap,r,i,s):(M(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!ge(l.path),o=Cp(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Ir.MERGE){let l=n;l.source.fromUser?o=e9(t,e,l.path,l.children,r,i,s):(M(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=sC(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Ir.ACK_USER_WRITE){let l=n;l.revert?o=r9(t,e,l.path,r,i,s):o=t9(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Ir.LISTEN_COMPLETE)o=n9(t,e,n.path,r,s);else throw As("Unknown operation type: "+n.type);let c=s.getChanges();return Z3(e,o,c),{viewCache:o,changes:c}}function Z3(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ZE(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(IP(ZE(e)))}}function NP(t,e,n,r,i,s){let o=e.eventCache;if(Ep(r,n)!=null)return e;{let a,c;if(ge(n))if(M(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=to(e),d=l instanceof ue?l:ue.EMPTY_NODE,f=SC(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{let l=Ip(r,to(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=pe(n);if(l===".priority"){M(Bi(n)===1,"Can't have a priority with additional path components");let d=o.getNode();c=e.serverCache.getNode();let f=OM(r,n,d,c);f!=null?a=t.filter.updatePriority(d,f):a=o.getNode()}else{let d=Be(n),f;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let m=OM(r,n,o.getNode(),c);m!=null?f=o.getNode().getImmediateChild(l).updateChild(d,m):f=o.getNode().getImmediateChild(l)}else f=AC(r,l,e.serverCache);f!=null?a=t.filter.updateChild(o.getNode(),l,f,d,i,s):a=o.getNode()}}return il(e,a,o.isFullyInitialized()||ge(n),t.filter.filtersNodes())}}function Cp(t,e,n,r,i,s,o,a){let c=e.serverCache,l,d=o?t.filter:t.filter.getIndexedFilter();if(ge(n))l=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let y=c.getNode().updateChild(n,r);l=d.updateFullNode(c.getNode(),y,null)}else{let y=pe(n);if(!c.isCompleteForPath(n)&&Bi(n)>1)return e;let E=Be(n),R=c.getNode().getImmediateChild(y).updateChild(E,r);y===".priority"?l=d.updatePriority(c.getNode(),R):l=d.updateChild(c.getNode(),y,R,E,xP,null)}let f=bP(e,l,c.isFullyInitialized()||ge(n),d.filtersNodes()),m=new ll(i,f,s);return NP(t,f,n,i,m,a)}function iC(t,e,n,r,i,s,o){let a=e.eventCache,c,l,d=new ll(i,e,s);if(ge(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=il(e,l,!0,t.filter.filtersNodes());else{let f=pe(n);if(f===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=il(e,l,a.isFullyInitialized(),a.isFiltered());else{let m=Be(n),y=a.getNode().getImmediateChild(f),E;if(ge(m))E=r;else{let x=d.getCompleteChild(f);x!=null?fP(m)===".priority"&&x.getChild(mP(m)).isEmpty()?E=x:E=x.updateChild(m,r):E=ue.EMPTY_NODE}if(y.equals(E))c=e;else{let x=t.filter.updateChild(a.getNode(),f,E,m,d,o);c=il(e,x,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function FM(t,e){return t.eventCache.isCompleteForChild(e)}function e9(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let d=gt(n,c);FM(e,pe(d))&&(a=iC(t,a,d,l,i,s,o))}),r.foreach((c,l)=>{let d=gt(n,c);FM(e,pe(d))||(a=iC(t,a,d,l,i,s,o))}),a}function LM(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function sC(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;ge(n)?l=r:l=new en(null).setTree(n,r);let d=e.serverCache.getNode();return l.children.inorderTraversal((f,m)=>{if(d.hasChild(f)){let y=e.serverCache.getNode().getImmediateChild(f),E=LM(t,y,m);c=Cp(t,c,new Pe(f),E,i,s,o,a)}}),l.children.inorderTraversal((f,m)=>{let y=!e.serverCache.isCompleteForChild(f)&&m.value===null;if(!d.hasChild(f)&&!y){let E=e.serverCache.getNode().getImmediateChild(f),x=LM(t,E,m);c=Cp(t,c,new Pe(f),x,i,s,o,a)}}),c}function t9(t,e,n,r,i,s,o){if(Ep(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(ge(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Cp(t,e,n,c.getNode().getChild(n),i,s,a,o);if(ge(n)){let l=new en(null);return c.getNode().forEachChild(La,(d,f)=>{l=l.set(new Pe(d),f)}),sC(t,e,n,l,i,s,a,o)}else return e}else{let l=new en(null);return r.foreach((d,f)=>{let m=gt(n,d);c.isCompleteForPath(m)&&(l=l.set(d,c.getNode().getChild(m)))}),sC(t,e,n,l,i,s,a,o)}}function n9(t,e,n,r,i){let s=e.serverCache,o=bP(e,s.getNode(),s.isFullyInitialized()||ge(n),s.isFiltered());return NP(t,o,n,r,xP,i)}function r9(t,e,n,r,i,s){let o;if(Ep(r,n)!=null)return e;{let a=new ll(r,e,i),c=e.eventCache.getNode(),l;if(ge(n)||pe(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Ip(r,to(e));else{let f=e.serverCache.getNode();M(f instanceof ue,"serverChildren would be complete if leaf node"),d=SC(r,f)}d=d,l=t.filter.updateFullNode(c,d,s)}else{let d=pe(n),f=AC(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?l=t.filter.updateChild(c,d,f,Be(n),a,s):e.eventCache.getNode().hasChild(d)?l=t.filter.updateChild(c,d,ue.EMPTY_NODE,Be(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ip(r,to(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Ep(r,Ae())!=null,il(e,l,o,t.filter.filtersNodes())}}var oC=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new ul(r.getIndex()),s=R3(r);this.processor_=Y3(s);let o=n.serverCache,a=n.eventCache,c=i.updateFullNode(ue.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(ue.EMPTY_NODE,a.getNode(),null),d=new Yr(c,o.isFullyInitialized(),i.filtersNodes()),f=new Yr(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=kp(f,d),this.eventGenerator_=new XE(this.query_)}get query(){return this.query_}};function i9(t){return t.viewCache_.serverCache.getNode()}function s9(t,e){let n=to(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ge(e)&&!n.getImmediateChild(pe(e)).isEmpty())?n.getChild(e):null}function VM(t){return t.eventRegistrations_.length===0}function o9(t,e){t.eventRegistrations_.push(e)}function UM(t,e,n){let r=[];if(n){M(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){let o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function jM(t,e,n,r){e.type===Ir.MERGE&&e.source.queryId!==null&&(M(to(t.viewCache_),"We should always have a full cache before handling merges"),M(ZE(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=X3(t.processor_,i,e,n,r);return J3(t.processor_,s.viewCache),M(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,MP(t,s.changes,s.viewCache.eventCache.getNode(),null)}function a9(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(tt,(s,o)=>{r.push(Ha(s,o))}),n.isFullyInitialized()&&r.push(IP(n.getNode())),MP(t,r,n.getNode(),e)}function MP(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return P3(t.eventGenerator_,e,n,i)}var bp,aC=class{constructor(){this.views=new Map}};function c9(t){M(!bp,"__referenceConstructor has already been defined"),bp=t}function u9(){return M(bp,"Reference.ts has not been loaded"),bp}function l9(t){return t.views.size===0}function RC(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return M(s!=null,"SyncTree gave us an op for an invalid query."),jM(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(jM(o,e,n,r));return s}}function d9(t,e,n,r,i){let s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Ip(n,i?r:null),c=!1;a?c=!0:r instanceof ue?(a=SC(n,r),c=!1):(a=ue.EMPTY_NODE,c=!1);let l=kp(new Yr(a,c,!1),new Yr(r,i,!1));return new oC(e,l)}return o}function h9(t,e,n,r,i,s){let o=d9(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),o9(o,n),a9(o,n)}function f9(t,e,n,r){let i=e._queryIdentifier,s=[],o=[],a=$i(t);if(i==="default")for(let[c,l]of t.views.entries())o=o.concat(UM(l,n,r)),VM(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=t.views.get(i);c&&(o=o.concat(UM(c,n,r)),VM(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!$i(t)&&s.push(new(u9())(e._repo,e._path)),{removed:s,events:o}}function PP(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Va(t,e){let n=null;for(let r of t.views.values())n=n||s9(r,e);return n}function kP(t,e){if(e._queryParams.loadsAllData())return Op(t);{let r=e._queryIdentifier;return t.views.get(r)}}function OP(t,e){return kP(t,e)!=null}function $i(t){return Op(t)!=null}function Op(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Tp;function p9(t){M(!Tp,"__referenceConstructor has already been defined"),Tp=t}function m9(){return M(Tp,"Reference.ts has not been loaded"),Tp}var g9=1,Dp=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new en(null),this.pendingWriteTree_=K3(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function FP(t,e,n,r,i){return L3(t.pendingWriteTree_,e,n,r,i),i?ml(t,new qa(CP(),e,n)):[]}function Xs(t,e,n=!1){let r=V3(t.pendingWriteTree_,e);if(U3(t.pendingWriteTree_,e)){let s=new en(null);return r.snap!=null?s=s.set(Ae(),!0):Zt(r.children,o=>{s=s.set(new Pe(o),!0)}),ml(t,new JE(r.path,s,n))}else return[]}function Fp(t,e,n){return ml(t,new qa(bC(),e,n))}function y9(t,e,n){let r=en.fromObject(n);return ml(t,new wp(bC(),e,r))}function _9(t,e){return ml(t,new vp(bC(),e))}function v9(t,e,n){let r=NC(t,n);if(r){let i=MC(r),s=i.path,o=i.queryId,a=Jt(s,e),c=new vp(TC(o),a);return PC(t,s,c)}else return[]}function cC(t,e,n,r,i=!1){let s=e._path,o=t.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||OP(o,e))){let c=f9(o,e,n,r);l9(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let d=l.findIndex(m=>m._queryParams.loadsAllData())!==-1,f=t.syncPointTree_.findOnPath(s,(m,y)=>$i(y));if(d&&!f){let m=t.syncPointTree_.subtree(s);if(!m.isEmpty()){let y=E9(m);for(let E=0;E<y.length;++E){let x=y[E],R=x.query,O=UP(t,x);t.listenProvider_.startListening(ol(R),Sp(t,R),O.hashFn,O.onComplete)}}}!f&&l.length>0&&!r&&(d?t.listenProvider_.stopListening(ol(e),null):l.forEach(m=>{let y=t.queryToTagMap.get(Lp(m));t.listenProvider_.stopListening(ol(m),y)}))}C9(t,l)}return a}function w9(t,e,n,r){let i=NC(t,r);if(i!=null){let s=MC(i),o=s.path,a=s.queryId,c=Jt(o,e),l=new qa(TC(a),c,n);return PC(t,o,l)}else return[]}function I9(t,e,n,r){let i=NC(t,r);if(i){let s=MC(i),o=s.path,a=s.queryId,c=Jt(o,e),l=en.fromObject(n),d=new wp(TC(a),c,l);return PC(t,o,d)}else return[]}function BM(t,e,n,r=!1){let i=e._path,s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(m,y)=>{let E=Jt(m,i);s=s||Va(y,E),o=o||$i(y)});let a=t.syncPointTree_.get(i);a?(o=o||$i(a),s=s||Va(a,Ae())):(a=new aC,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=ue.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((y,E)=>{let x=Va(E,Ae());x&&(s=s.updateImmediateChild(y,x))}));let l=OP(a,e);if(!l&&!e._queryParams.loadsAllData()){let m=Lp(e);M(!t.queryToTagMap.has(m),"View does not exist, but we have a tag");let y=b9();t.queryToTagMap.set(m,y),t.tagToQueryMap.set(y,m)}let d=DC(t.pendingWriteTree_,i),f=h9(a,e,n,d,s,c);if(!l&&!o&&!r){let m=kP(a,e);f=f.concat(T9(t,e,m))}return f}function xC(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=Jt(o,e),l=Va(a,c);if(l)return l});return SP(i,e,s,n,!0)}function ml(t,e){return LP(e,t.syncPointTree_,null,DC(t.pendingWriteTree_,Ae()))}function LP(t,e,n,r){if(ge(t.path))return VP(t,e,n,r);{let i=e.get(Ae());n==null&&i!=null&&(n=Va(i,Ae()));let s=[],o=pe(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,d=AP(r,o);s=s.concat(LP(a,c,l,d))}return i&&(s=s.concat(RC(i,t,r,n))),s}}function VP(t,e,n,r){let i=e.get(Ae());n==null&&i!=null&&(n=Va(i,Ae()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=AP(r,o),d=t.operationForChild(o);d&&(s=s.concat(VP(d,a,c,l)))}),i&&(s=s.concat(RC(i,t,r,n))),s}function UP(t,e){let n=e.query,r=Sp(t,n);return{hashFn:()=>(i9(e)||ue.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?v9(t,n._path,r):_9(t,n._path);{let s=jW(i,n);return cC(t,n,null,s)}}}}function Sp(t,e){let n=Lp(e);return t.queryToTagMap.get(n)}function Lp(t){return t._path.toString()+"$"+t._queryIdentifier}function NC(t,e){return t.tagToQueryMap.get(e)}function MC(t){let e=t.indexOf("$");return M(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Pe(t.substr(0,e))}}function PC(t,e,n){let r=t.syncPointTree_.get(e);M(r,"Missing sync point for query tag that we're tracking");let i=DC(t.pendingWriteTree_,e);return RC(r,n,i,null)}function E9(t){return t.fold((e,n,r)=>{if(n&&$i(n))return[Op(n)];{let i=[];return n&&(i=PP(n)),Zt(r,(s,o)=>{i=i.concat(o)}),i}})}function ol(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(m9())(t._repo,t._path):t}function C9(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Lp(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function b9(){return g9++}function T9(t,e,n){let r=e._path,i=Sp(t,e),s=UP(t,n),o=t.listenProvider_.startListening(ol(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)M(!$i(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,d,f)=>{if(!ge(l)&&d&&$i(d))return[Op(d).query];{let m=[];return d&&(m=m.concat(PP(d).map(y=>y.query))),Zt(f,(y,E)=>{m=m.concat(E)}),m}});for(let l=0;l<c.length;++l){let d=c[l];t.listenProvider_.stopListening(ol(d),Sp(t,d))}}return o}var uC=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},lC=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=gt(this.path_,e);return new t(this.syncTree_,n)}node(){return xC(this.syncTree_,this.path_)}},D9=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},$M=function(t,e,n){if(!t||typeof t!="object")return t;if(M(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return S9(t[".sv"],e,n);if(typeof t[".sv"]=="object")return A9(t[".sv"],e);M(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},S9=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:M(!1,"Unexpected server value: "+t)}},A9=function(t,e,n){t.hasOwnProperty("increment")||M(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&M(!1,"Unexpected increment value: "+r);let i=e.node();if(M(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},R9=function(t,e,n,r){return kC(e,new lC(n,t),r)},jP=function(t,e,n){return kC(t,new uC(e),n)};function kC(t,e,n){let r=t.getPriority().val(),i=$M(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=$M(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Ba(a,Et(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ba(i))),o.forEachChild(tt,(a,c)=>{let l=kC(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var dl=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function OC(t,e){let n=e instanceof Pe?e:new Pe(e),r=t,i=pe(n);for(;i!==null;){let s=Rs(r.node.children,i)||{children:{},childCount:0};r=new dl(i,r,s),n=Be(n),i=pe(n)}return r}function Ka(t){return t.node.value}function BP(t,e){t.node.value=e,dC(t)}function $P(t){return t.node.childCount>0}function x9(t){return Ka(t)===void 0&&!$P(t)}function Vp(t,e){Zt(t.node.children,(n,r)=>{e(new dl(n,t,r))})}function HP(t,e,n,r){n&&!r&&e(t),Vp(t,i=>{HP(i,e,!0,r)}),n&&r&&e(t)}function N9(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function gl(t){return new Pe(t.parent===null?t.name:gl(t.parent)+"/"+t.name)}function dC(t){t.parent!==null&&M9(t.parent,t.name,t)}function M9(t,e,n){let r=x9(n),i=ir(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,dC(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,dC(t))}var P9=/[\[\].#$\/\u0000-\u001F\u007F]/,k9=/[\[\].#$\u0000-\u001F\u007F]/,IE=10*1024*1024,qP=function(t){return typeof t=="string"&&t.length!==0&&!P9.test(t)},zP=function(t){return typeof t=="string"&&t.length!==0&&!k9.test(t)},O9=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),zP(t)};var GP=function(t,e,n,r){r&&e===void 0||FC(Kh(t,"value"),e,n)},FC=function(t,e,n){let r=n instanceof Pe?new OE(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ys(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ys(r)+" with contents = "+e.toString());if(QM(e))throw new Error(t+"contains "+e.toString()+" "+Ys(r));if(typeof e=="string"&&e.length>IE/3&&fu(e)>IE)throw new Error(t+"contains a string greater than "+IE+" utf8 bytes "+Ys(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Zt(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!qP(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ys(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);m3(r,o),FC(t,a,r),g3(r)}),i&&s)throw new Error(t+' contains ".value" child '+Ys(r)+" in addition to actual children.")}};var WP=function(t,e,n,r){if(!(r&&n===void 0)&&!zP(n))throw new Error(Kh(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},F9=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),WP(t,e,n,r)},KP=function(t,e){if(pe(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},L9=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!qP(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!O9(n))throw new Error(Kh(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var hC=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function LC(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!IC(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function QP(t,e,n){LC(t,n),YP(t,r=>IC(r,e))}function Jr(t,e,n){LC(t,n),YP(t,r=>zn(r,e)||zn(e,r))}function YP(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(V9(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function V9(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Zs&&Pt("event: "+n.toString()),Wa(r)}}}var U9="repo_interrupt",j9=25,fC=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_p(),this.transactionQueueTree_=new dl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function B9(t,e,n){if(t.stats_=wC(t.repoInfo_),t.forceRestClient_||qW())t.server_=new GE(t.repoInfo_,(r,i,s,o)=>{HM(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>qM(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{pt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new EC(t.repoInfo_,e,(r,i,s,o)=>{HM(t,r,i,s,o)},r=>{qM(t,r)},r=>{$9(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=GW(t.repoInfo_,()=>new YE(t.stats_,t.server_)),t.infoData_=new WE,t.infoSyncTree_=new Dp({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Fp(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),UC(t,"connected",!1),t.serverSyncTree_=new Dp({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);Jr(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function JP(t){let n=t.infoData_.getNode(new Pe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function VC(t){return D9({timestamp:JP(t)})}function HM(t,e,n,r,i){t.dataUpdateCount++;let s=new Pe(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=hu(n,l=>Et(l));o=I9(t.serverSyncTree_,s,c,i)}else{let c=Et(n);o=w9(t.serverSyncTree_,s,c,i)}else if(r){let c=hu(n,l=>Et(l));o=y9(t.serverSyncTree_,s,c)}else{let c=Et(n);o=Fp(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Up(t,s)),Jr(t.eventQueue_,a,o)}function qM(t,e){UC(t,"connected",e),e===!1&&q9(t)}function $9(t,e){Zt(e,(n,r)=>{UC(t,n,r)})}function UC(t,e,n){let r=new Pe("/.info/"+e),i=Et(n);t.infoData_.updateSnapshot(r,i);let s=Fp(t.infoSyncTree_,r,i);Jr(t.eventQueue_,r,s)}function XP(t){return t.nextWriteId_++}function H9(t,e,n,r,i){jC(t,"set",{path:e.toString(),value:n,priority:r});let s=VC(t),o=Et(n,r),a=xC(t.serverSyncTree_,e),c=jP(o,a,s),l=XP(t),d=FP(t.serverSyncTree_,e,c,l,!0);LC(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(m,y)=>{let E=m==="ok";E||Xt("set at "+e+" failed: "+m);let x=Xs(t.serverSyncTree_,l,!E);Jr(t.eventQueue_,e,x),W9(t,i,m,y)});let f=rk(t,e);Up(t,f),Jr(t.eventQueue_,f,[])}function q9(t){jC(t,"onDisconnectEvents");let e=VC(t),n=_p();KE(t.onDisconnect_,Ae(),(i,s)=>{let o=R9(i,s,t.serverSyncTree_,e);EP(n,i,o)});let r=[];KE(n,Ae(),(i,s)=>{r=r.concat(Fp(t.serverSyncTree_,i,s));let o=rk(t,i);Up(t,o)}),t.onDisconnect_=_p(),Jr(t.eventQueue_,Ae(),r)}function z9(t,e,n){let r;pe(e._path)===".info"?r=BM(t.infoSyncTree_,e,n):r=BM(t.serverSyncTree_,e,n),QP(t.eventQueue_,e._path,r)}function pC(t,e,n){let r;pe(e._path)===".info"?r=cC(t.infoSyncTree_,e,n):r=cC(t.serverSyncTree_,e,n),QP(t.eventQueue_,e._path,r)}function G9(t){t.persistentConnection_&&t.persistentConnection_.interrupt(U9)}function jC(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Pt(n,...e)}function W9(t,e,n,r){e&&Wa(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function ZP(t,e,n){return xC(t.serverSyncTree_,e,n)||ue.EMPTY_NODE}function BC(t,e=t.transactionQueueTree_){if(e||jp(t,e),Ka(e)){let n=tk(t,e);M(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&K9(t,gl(e),n)}else $P(e)&&Vp(e,n=>{BC(t,n)})}function K9(t,e,n){let r=n.map(l=>l.currentWriteId),i=ZP(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let d=n[l];M(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=Jt(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{jC(t,"transaction put response",{path:c.toString(),status:l});let d=[];if(l==="ok"){let f=[];for(let m=0;m<n.length;m++)n[m].status=2,d=d.concat(Xs(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&f.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();jp(t,OC(t.transactionQueueTree_,e)),BC(t,t.transactionQueueTree_),Jr(t.eventQueue_,e,d);for(let m=0;m<f.length;m++)Wa(f[m])}else{if(l==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{Xt("transaction at "+c.toString()+" failed: "+l);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=l}Up(t,e)}},o)}function Up(t,e){let n=ek(t,e),r=gl(n),i=tk(t,n);return Q9(t,i,r),r}function Q9(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Jt(n,c.path),d=!1,f;if(M(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(Xs(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=j9)d=!0,f="maxretry",i=i.concat(Xs(t.serverSyncTree_,c.currentWriteId,!0));else{let m=ZP(t,c.path,o);c.currentInputSnapshot=m;let y=e[a].update(m.val());if(y!==void 0){FC("transaction failed: Data returned ",y,c.path);let E=Et(y);typeof y=="object"&&y!=null&&ir(y,".priority")||(E=E.updatePriority(m.getPriority()));let R=c.currentWriteId,O=VC(t),H=jP(E,m,O);c.currentOutputSnapshotRaw=E,c.currentOutputSnapshotResolved=H,c.currentWriteId=XP(t),o.splice(o.indexOf(R),1),i=i.concat(FP(t.serverSyncTree_,c.path,H,c.currentWriteId,c.applyLocally)),i=i.concat(Xs(t.serverSyncTree_,R,!0))}else d=!0,f="nodata",i=i.concat(Xs(t.serverSyncTree_,c.currentWriteId,!0))}Jr(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(m){setTimeout(m,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}jp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Wa(r[a]);BC(t,t.transactionQueueTree_)}function ek(t,e){let n,r=t.transactionQueueTree_;for(n=pe(e);n!==null&&Ka(r)===void 0;)r=OC(r,n),e=Be(e),n=pe(e);return r}function tk(t,e){let n=[];return nk(t,e,n),n.sort((r,i)=>r.order-i.order),n}function nk(t,e,n){let r=Ka(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Vp(e,i=>{nk(t,i,n)})}function jp(t,e){let n=Ka(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,BP(e,n.length>0?n:void 0)}Vp(e,r=>{jp(t,r)})}function rk(t,e){let n=gl(ek(t,e)),r=OC(t.transactionQueueTree_,e);return N9(r,i=>{EE(t,i)}),EE(t,r),HP(r,i=>{EE(t,i)}),n}function EE(t,e){let n=Ka(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(M(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(M(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Xs(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?BP(e,void 0):n.length=s+1,Jr(t.eventQueue_,gl(e),i);for(let o=0;o<r.length;o++)Wa(r[o])}}function Y9(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function J9(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Xt(`Invalid query segment '${n}' in query '${t}'`)}return e}var zM=function(t,e){let n=X9(t),r=n.namespace;n.domain==="firebase.com"&&Qr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Qr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||OW();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new lp(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Pe(n.pathString)}},X9=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let d=t.indexOf("/");d===-1&&(d=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(d,f)),d<f&&(i=Y9(t.substring(d,f)));let m=J9(t.substring(Math.min(t.length,f)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let y=e.slice(0,l);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{let E=e.indexOf(".");r=e.substring(0,E).toLowerCase(),n=e.substring(E+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var GM="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Z9=function(){let t=0,e=[];return function(n){let r=n===t;t=n;let i,s=new Array(8);for(i=7;i>=0;i--)s[i]=GM.charAt(n%64),n=Math.floor(n/64);M(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=GM.charAt(e[i]);return M(o.length===20,"nextPushId: Length should be 20."),o}}();var Ap=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+pt(this.snapshot.exportVal())}},Rp=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var xp=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return M(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var mC=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ge(this._path)?null:fP(this._path)}get ref(){return new Xr(this._repo,this._path)}get _queryIdentifier(){let e=xM(this._queryParams),n=vC(e);return n==="{}"?"default":n}get _queryObject(){return xM(this._queryParams)}isEqual(e){if(e=We(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=IC(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+p3(this._path)}};var Xr=class t extends mC{constructor(e,n){super(e,n,new zE,!1)}get parent(){let e=mP(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Np=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new Pe(e),r=no(this.ref,e);return new t(this._node.getChild(n),r,tt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,no(this.ref,r),tt)))}hasChild(e){let n=new Pe(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function ik(t,e){return t=We(t),t._checkNotDeleted("ref"),e!==void 0?no(t._root,e):t._root}function no(t,e){return t=We(t),pe(t._path)===null?F9("child","path",e,!1):WP("child","path",e,!1),new Xr(t._repo,gt(t._path,e))}function sk(t,e){t=We(t),KP("push",t._path),GP("push",e,t._path,!0);let n=JP(t._repo),r=Z9(n),i=no(t,r),s=no(t,r),o;return e!=null?o=$C(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function $C(t,e){t=We(t),KP("set",t._path),GP("set",e,t._path,!1);let n=new Ri;return H9(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}var Mp=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Ap("value",this,new Np(e.snapshotNode,new Xr(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Rp(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Pp=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Rp(this,e,n):null}createEvent(e,n){M(e.childName!=null,"Child events should have a childName.");let r=no(new Xr(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Ap(e.type,this,new Np(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function yl(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let c=n,l=(d,f)=>{pC(t._repo,t,a),c(d,f)};l.userCallback=n.userCallback,l.context=n.context,n=l}let o=new xp(n,s||void 0),a=e==="value"?new Mp(o):new Pp(e,o);return z9(t._repo,t,a),()=>pC(t._repo,t,a)}function Bp(t,e,n,r){return yl(t,"value",e,n,r)}function HC(t,e,n,r){return yl(t,"child_added",e,n,r)}function qC(t,e,n,r){return yl(t,"child_changed",e,n,r)}function zC(t,e,n,r){return yl(t,"child_moved",e,n,r)}function GC(t,e,n,r){return yl(t,"child_removed",e,n,r)}function WC(t,e,n){let r=null,i=n?new xp(n):null;e==="value"?r=new Mp(i):e&&(r=new Pp(e,i)),pC(t._repo,t,r)}c9(Xr);p9(Xr);var e6="FIREBASE_DATABASE_EMULATOR_HOST",gC={},t6=!1;function n6(t,e,n,r){t.repoInfo_=new lp(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function r6(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Qr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Pt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=zM(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[e6]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=zM(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let d=i&&c?new rl(rl.OWNER):new AE(t.name,t.options,e);L9("Invalid Firebase Database URL",o),ge(o.path)||Qr("Database URL must point to the root of a Firebase Database (not including a child path).");let f=s6(a,t,d,new SE(t.name,n));return new yC(f,t)}function i6(t,e){let n=gC[e];(!n||n[t.key]!==t)&&Qr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),G9(t),delete n[t.key]}function s6(t,e,n,r){let i=gC[e.name];i||(i={},gC[e.name]=i);let s=i[t.toURLString()];return s&&Qr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new fC(t,t6,n,r),i[t.toURLString()]=s,s}var yC=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(B9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Xr(this._repo,Ae())),this._rootInternal}_delete(){return this._rootInternal!==null&&(i6(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Qr("Cannot call "+e+" on a deleted database.")}};function ok(t=ar(),e){let n=Vr(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=ia("database");r&&ak(n,...r)}return n}function ak(t,e,n,r={}){t=We(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Qr("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Qr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new rl(rl.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:sa(r.mockUserToken,t.app.options.projectId);s=new rl(o)}n6(i,e,n,s)}function o6(t){MW(Dn),Tn(new xt("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return r6(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Me(fM,pM,t),Me(fM,pM,"esm2017")}EC.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};EC.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};o6();var io,so=function(t){return t.added="child_added",t.removed="child_removed",t.changed="child_changed",t.moved="child_moved",t.value="value",t}(so||{}),c6=Object.freeze((io={},io[so.added]=HC,io[so.removed]=GC,io[so.changed]=qC,io[so.moved]=zC,io[so.value]=Bp,io));function ck(t,e){return new J(function(n){var r=c6[e](t,function(i,s){n.next({snapshot:i,prevKey:s,event:e})},n.error.bind(n));return{unsubscribe:function(){WC(t,e,r)}}}).pipe(Gm(0))}var $p=function(){return $p=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$p.apply(this,arguments)};function uk(t,e){return e===void 0&&(e={}),ck(t,so.value).pipe(se(function(n){return lk(n,e)}))}function lk(t,e){var n;e===void 0&&(e={});var r=t.snapshot.val();return!t.snapshot.exists()||typeof r!="object"?r:$p($p({},r),e.keyField?(n={},n[e.keyField]=t.snapshot.key,n):null)}var Wn=class{constructor(e){return e}},dk="database",KC=class{constructor(){return Ur(dk)}};var QC=new G("angularfire2.database-instances");function u6(t,e){let n=Ni(dk,t,e);return n&&new Wn(n)}function l6(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Wn(r)}}var d6={provide:KC,deps:[[new He,QC]]},h6={provide:Wn,useFactory:u6,deps:[[new He,QC],fn]};function hk(t,...e){return Me("angularfire",jn.full,"rtdb"),Gt([h6,d6,{provide:QC,useFactory:l6(t),multi:!0,deps:[be,Rt,ur,Bn,[new He,Hr],[new He,cr],...e]}])}var Hp=Xe(uk,!0);var fk=Xe(ok,!0);var pk=Xe(Bp,!0);var qp=Xe(sk,!0);var Hi=Xe(ik,!0);var Qa=Xe($C,!0);var zp=(()=>{let e=class e{constructor(r,i){this.db=r,this.auth=i;let s=sessionStorage.getItem("user");if(s&&s!=="null"){let a=JSON.parse(s)?.uid;a?(this.balanceRef=Hi(this.db,`users/${a}/chequing/balance`),this.transactionHistoryRef=Hi(this.db,`users/${a}/chequing/transactions`),this.chequingbalance$=Hp(this.balanceRef).pipe(se(c=>c??0),on(c=>(console.error("Error retrieving balance:",c),Z(0))))):(console.error("User UID not found."),this.chequingbalance$=new J(c=>{c.next(null)}))}else console.error("User is not authenticated."),this.chequingbalance$=new J(o=>{o.next(null)})}getBalance(){return this.chequingbalance$}deposit(r){return v(this,null,function*(){this.chequingbalance$.pipe(lt(1)).subscribe(i=>v(this,null,function*(){let s=(i??0)+r;yield Qa(this.balanceRef,s),yield this.logTransaction("deposit",r)}))})}withdraw(r){return v(this,null,function*(){this.chequingbalance$.pipe(lt(1)).subscribe(i=>v(this,null,function*(){let s=(i??0)-r;s>=0?(yield Qa(this.balanceRef,s),yield this.logTransaction("withdrawal",r)):(alert("Insufficient funds"),console.error("Insufficient funds"))}))})}logTransaction(r,i){return v(this,null,function*(){let s=Date.now(),o={type:r,amount:i,timestamp:s};yield qp(this.transactionHistoryRef,o)})}};e.\u0275fac=function(i){return new(i||e)(X(Wn),X(pn))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Gp=(()=>{let e=class e{constructor(r,i){this.db=r,this.auth=i;let s=sessionStorage.getItem("user");if(s&&s!=="null"){let a=JSON.parse(s)?.uid;a?(this.balanceRef=Hi(this.db,`users/${a}/savings/balance`),this.transactionHistoryRef=Hi(this.db,`users/${a}/savings/transactions`),this.savingsbalance$=Hp(this.balanceRef).pipe(se(c=>c??0),on(c=>(console.error("Error retrieving balance:",c),Z(0))))):(console.error("User UID not found."),this.savingsbalance$=new J(c=>{c.next(null)}))}else console.error("User is not authenticated."),this.savingsbalance$=new J(o=>{o.next(null)})}getBalance(){return this.savingsbalance$}deposit(r){return v(this,null,function*(){this.savingsbalance$.pipe(lt(1)).subscribe(i=>v(this,null,function*(){let s=(i??0)+r;yield Qa(this.balanceRef,s),yield this.logTransaction("deposit",r)}))})}withdraw(r){return v(this,null,function*(){this.savingsbalance$.pipe(lt(1)).subscribe(i=>v(this,null,function*(){let s=(i??0)-r;s>=0?(yield Qa(this.balanceRef,s),yield this.logTransaction("withdrawal",r)):(alert("Insufficient funds"),console.error("Insufficient funds"))}))})}logTransaction(r,i){return v(this,null,function*(){let s=Date.now(),o={type:r,amount:i,timestamp:s};yield qp(this.transactionHistoryRef,o)})}};e.\u0275fac=function(i){return new(i||e)(X(Wn),X(pn))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var yk=(()=>{let e=class e{constructor(r,i,s){this.authService=r,this.chequingService=i,this.savingsService=s,this.firstName="",this.chequingbalance$=this.chequingService.getBalance(),this.savingsbalance$=this.savingsService.getBalance()}ngOnInit(){let r=JSON.parse(sessionStorage.getItem("user")||"{}");r&&r.uid&&this.authService.getUserDetails(r.uid).then(i=>{i&&i.firstName&&(this.firstName=i.firstName)})}logAnchorClick(){console.log("Anchor tag clicked!")}alertClick(){alert("Coming Soon")}};e.\u0275fac=function(i){return new(i||e)(q(wr),q(zp),q(Gp))},e.\u0275cmp=ze({type:e,selectors:[["app-dashboard"]],standalone:!0,features:[Ge],decls:43,vars:11,consts:[[1,"flex","flex-col","min-h-screen","lg:pt-20","pt-10"],[1,"flex-grow","bg-gray-100","dark:bg-black","transition-all","duration-500","ease-in-out"],[1,"container","mx-auto","px-4","py-8","mt-7","md:mt-5"],[1,"text-3xl","font-bold","mb-4","text-gray-700","dark:text-rose-600"],[1,"text-3xl","font-semibold","mb-4","mt-7","text-gray-700","dark:text-rose-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["routerLink","/chequing",3,"click"],[1,"bg-white","dark:bg-zinc-950","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","transition-all","duration-500","ease-in-out"],[1,"text-xl","dark:text-gray-300","font-semibold","mb-2","text-gray-700"],[1,"flex","justify-between","items-center","mt-10"],[1,"dark:text-gray-300","text-gray-700","font-bold","text-xl"],["routerLink","/savings",3,"click"],[3,"click"],[1,"mt-7"],[1,"dark:text-gray-300","font-semibold"]],template:function(i,s){i&1&&(we(0,"app-navbar"),L(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1",3),j(5,"Dashboard"),k(),L(6,"h2",4),j(7),k(),L(8,"div",5)(9,"a",6),Oe("click",function(){return s.logAnchorClick()}),L(10,"div",7)(11,"h2",8),j(12,"Chequing"),k(),we(13,"br"),L(14,"div",9)(15,"p",10),j(16,"Balance:"),k(),L(17,"span",10),j(18),jt(19,"async"),jt(20,"currency"),k()()()(),L(21,"a",11),Oe("click",function(){return s.logAnchorClick()}),L(22,"div",7)(23,"h2",8),j(24,"Savings"),k(),we(25,"br"),L(26,"div",9)(27,"p",10),j(28,"Balance:"),k(),L(29,"span",10),j(30),jt(31,"async"),jt(32,"currency"),k()()()(),L(33,"a",12),Oe("click",function(){return s.alertClick()}),L(34,"div",7)(35,"h2",8),j(36,"E-Transfer"),k(),L(37,"div",13),we(38,"br")(39,"br"),L(40,"p",14),j(41,"Send funds with ease via email."),k()()()()()()(),we(42,"app-footer"),k()),i&2&&(qe(7),Ii("Welcome ",s.firstName,"!"),qe(11),wi(Yt(20,5,Yt(19,3,s.chequingbalance$))),qe(12),wi(Yt(32,9,Yt(31,7,s.savingsbalance$))))},dependencies:[ta,Ma,Pa,Vn,bi,Ti]});let t=e;return t})();function f6(t,e){if(t&1&&(L(0,"div")(1,"p",4),j(2),jt(3,"date"),k(),L(4,"p"),j(5),k(),L(6,"p",5),j(7),jt(8,"currency"),k(),we(9,"hr"),k()),t&2){let n=e.$implicit;qe(2),Ii("Date: ",NS(3,3,n.timestamp,"short"),""),qe(3),Ii("Type: ",n.type,""),qe(2),Ii("Amount: ",Yt(8,6,n.amount),"")}}function p6(t,e){if(t&1&&(L(0,"div",2),$o(1,f6,10,8,"div",3),k()),t&2){let n=e.ngIf;qe(),cn("ngForOf",n)}}var Ya=(()=>{let e=class e{constructor(r){this.db=r,this.type="chequing"}ngOnInit(){let r=sessionStorage.getItem("user");if(r&&r!=="null"){let s=JSON.parse(r)?.uid;if(s){let o=Hi(this.db,`users/${s}/${this.type}/transactions`);this.transactionHistory$=new J(a=>{pk(o,c=>{let l=c.val();if(l){let f=Object.keys(l).map(m=>V({id:m},l[m])).sort((m,y)=>y.timestamp-m.timestamp);a.next(f)}else a.next([])})})}else console.error("User UID not found."),this.transactionHistory$=new J(o=>{o.next([])})}else console.error("User is not authenticated."),this.transactionHistory$=new J(i=>{i.next([])})}};e.\u0275fac=function(i){return new(i||e)(q(Wn))},e.\u0275cmp=ze({type:e,selectors:[["app-transaction-history"]],inputs:{type:"type"},standalone:!0,features:[Ge],decls:4,vars:3,consts:[[1,"text-lg","font-semibold","mb-2","text-center","text-gray-600","dark:text-gray-300"],["class","text-gray-600 dark:text-gray-300",4,"ngIf"],[1,"text-gray-600","dark:text-gray-300"],[4,"ngFor","ngForOf"],[1,"text-md","font-semibold"],[1,"font-bold"]],template:function(i,s){i&1&&(L(0,"h3",0),j(1,"Transaction History"),k(),$o(2,p6,2,1,"div",1),jt(3,"async")),i&2&&(qe(2),cn("ngIf",Yt(3,1,s.transactionHistory$)))},dependencies:[Vn,iA,Th,bi,Ti,sA]});let t=e;return t})();var Tk=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(q(ys),q(yi))},e.\u0275dir=an({type:e});let t=e;return t})(),Dk=(()=>{let e=class e extends Tk{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=jo(e)))(s||e)}})(),e.\u0275dir=an({type:e,features:[_s]});let t=e;return t})(),tb=new G("");var m6={provide:tb,useExisting:Lo(()=>Xa),multi:!0};function g6(){let t=Fr()?Fr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var y6=new G(""),Xa=(()=>{let e=class e extends Tk{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!g6())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(q(ys),q(yi),q(y6,8))},e.\u0275dir=an({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Oe("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[dh([m6]),_s]});let t=e;return t})();var _6=new G(""),v6=new G("");function Sk(t){return t!=null}function Ak(t){return Ei(t)?Je(t):t}function Rk(t){let e={};return t.forEach(n=>{e=n!=null?V(V({},e),n):e}),Object.keys(e).length===0?null:e}function xk(t,e){return e.map(n=>n(t))}function w6(t){return!t.validate}function Nk(t){return t.map(e=>w6(e)?e:n=>e.validate(n))}function I6(t){if(!t)return null;let e=t.filter(Sk);return e.length==0?null:function(n){return Rk(xk(n,e))}}function Mk(t){return t!=null?I6(Nk(t)):null}function E6(t){if(!t)return null;let e=t.filter(Sk);return e.length==0?null:function(n){let r=xk(n,e).map(Ak);return qm(r).pipe(se(Rk))}}function Pk(t){return t!=null?E6(Nk(t)):null}function _k(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function C6(t){return t._rawValidators}function b6(t){return t._rawAsyncValidators}function JC(t){return t?Array.isArray(t)?t:[t]:[]}function Kp(t,e){return Array.isArray(t)?t.includes(e):t===e}function vk(t,e){let n=JC(e);return JC(t).forEach(i=>{Kp(n,i)||n.push(i)}),n}function wk(t,e){return JC(e).filter(n=>!Kp(t,n))}var Qp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Mk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Pk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},XC=class extends Qp{get formDirective(){return null}get path(){return null}},wl=class extends Qp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ZC=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},T6={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Kie=ke(V({},T6),{"[class.ng-submitted]":"isSubmitted"}),Yp=(()=>{let e=class e extends ZC{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(q(wl,2))},e.\u0275dir=an({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Oy("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[_s]});let t=e;return t})();var _l="VALID",Wp="INVALID",Ja="PENDING",vl="DISABLED";function D6(t){return(Jp(t)?t.validators:t)||null}function S6(t){return Array.isArray(t)?Mk(t):t||null}function A6(t,e){return(Jp(e)?e.asyncValidators:t)||null}function R6(t){return Array.isArray(t)?Pk(t):t||null}function Jp(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var eb=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===_l}get invalid(){return this.status===Wp}get pending(){return this.status==Ja}get disabled(){return this.status===vl}get enabled(){return this.status!==vl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(vk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(vk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(wk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(wk(e,this._rawAsyncValidators))}hasValidator(e){return Kp(this._rawValidators,e)}hasAsyncValidator(e){return Kp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ja,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=vl,this.errors=null,this._forEachChild(r=>{r.disable(ke(V({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ke(V({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=_l,this._forEachChild(r=>{r.enable(ke(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ke(V({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_l||this.status===Ja)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vl:_l}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ja,this._hasOwnPendingAsyncValidator=!0;let n=Ak(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Lt,this.statusChanges=new Lt}_calculateStatus(){return this._allControlsDisabled()?vl:this.errors?Wp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ja)?Ja:this._anyControlsHaveStatus(Wp)?Wp:_l}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Jp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=S6(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=R6(this._rawAsyncValidators)}};var kk=new G("CallSetDisabledState",{providedIn:"root",factory:()=>nb}),nb="always";function x6(t,e){return[...e.path,t]}function N6(t,e,n=nb){P6(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),k6(t,e),F6(t,e),O6(t,e),M6(t,e)}function Ik(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function M6(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function P6(t,e){let n=C6(t);e.validator!==null?t.setValidators(_k(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=b6(t);e.asyncValidator!==null?t.setAsyncValidators(_k(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Ik(e._rawValidators,i),Ik(e._rawAsyncValidators,i)}function k6(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Ok(t,e)})}function O6(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Ok(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Ok(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function F6(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function L6(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function V6(t){return Object.getPrototypeOf(t.constructor)===Dk}function U6(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Xa?n=s:V6(s)?r=s:i=s}),i||r||n||null}function Ek(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Ck(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var j6=class extends eb{constructor(e=null,n,r){super(D6(n),A6(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Jp(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Ck(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Ek(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Ek(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Ck(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var B6={provide:wl,useExisting:Lo(()=>Il)},bk=Promise.resolve(),Il=(()=>{let e=class e extends wl{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new j6,this._registered=!1,this.name="",this.update=new Lt,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=U6(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),L6(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){N6(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){bk.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Es(i);bk.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?x6(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(q(XC,9),q(_6,10),q(v6,10),q(tb,10),q(Ci,8),q(kk,8))},e.\u0275dir=an({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Ut.None,"disabled","isDisabled"],model:[Ut.None,"ngModel","model"],options:[Ut.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[dh([B6]),_s,ps]});let t=e;return t})();var $6={provide:tb,useExisting:Lo(()=>El),multi:!0},El=(()=>{let e=class e extends Dk{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=jo(e)))(s||e)}})(),e.\u0275dir=an({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&Oe("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[dh([$6]),_s]});let t=e;return t})();var H6=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=hs({type:e}),e.\u0275inj=ds({});let t=e;return t})();var Xp=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:kk,useValue:r.callSetDisabledState??nb}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=hs({type:e}),e.\u0275inj=ds({imports:[H6]});let t=e;return t})();var Lk=(()=>{let e=class e{constructor(r){this.chequingService=r,this.depositAmount=0,this.withdrawAmount=0,this.chequingbalance$=this.chequingService.getBalance()}ngOnInit(){}deposit(){this.depositAmount>0&&(this.chequingService.deposit(this.depositAmount),this.depositAmount=0)}withdraw(){this.withdrawAmount>0&&(this.chequingService.withdraw(this.withdrawAmount),this.withdrawAmount=0)}};e.\u0275fac=function(i){return new(i||e)(q(zp))},e.\u0275cmp=ze({type:e,selectors:[["app-chequing"]],standalone:!0,features:[Ge],decls:32,vars:8,consts:[[1,"flex","flex-col","min-h-screen","bg-gray-100","mx-auto","pt-20","py-8","bg-white","dark:bg-black","transition-all","duration-500","ease-in-out"],[1,"text-3xl","font-bold","text-gray-700","mt-10","mb-4","rounded-lg","p-4","dark:text-rose-600"],[1,"container","mx-auto","bg-white","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","mb-4","max-w-md","justify-center","items-center","dark:bg-zinc-950","transition-all","duration-500","ease-in-out"],[1,"text-xl","font-semibold","mb-2","flex","justify-between","items-center"],[1,"text-gray-600","dark:text-gray-300"],[1,"ml-auto","dark:text-gray-300"],[1,"container","flex","mx-auto","justify-center","items-center"],[1,"md:flex","justify-between","gap-20","mt-2","mb-5"],[1,"bg-white","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","mb-4","max-w-xs","justify-center","items-center","dark:bg-zinc-950","transition-all","duration-500","ease-in-out"],[1,"text-xl","font-semibold","mb-2","flex","justify-center","items-center"],["type","number","placeholder","Amount",1,"border","p-2","rounded-md","mb-2",3,"ngModelChange","ngModel"],[1,"bg-red-500","text-white","p-2","rounded-md",3,"click"],[1,"bg-green-500","text-white","p-2","rounded-md",3,"click"],[1,"container","bg-white","dark:bg-zinc-950","mx-auto","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","mb-4","max-w-2xl","transition-all","duration-500","ease-in-out"],[3,"type"]],template:function(i,s){i&1&&(we(0,"app-navbar"),L(1,"div",0)(2,"h2",1),j(3,"Chequing Account"),k(),we(4,"br"),L(5,"div",2)(6,"h3",3)(7,"span",4),j(8,"Balance"),k(),L(9,"span",5),j(10),jt(11,"async"),jt(12,"currency"),k()()(),L(13,"div",6)(14,"div",7)(15,"div",8)(16,"h3",9)(17,"span",4),j(18,"Withdraw"),k()(),L(19,"input",10),ws("ngModelChange",function(a){return qo(s.withdrawAmount,a)||(s.withdrawAmount=a),a}),k(),L(20,"button",11),Oe("click",function(){return s.withdraw()}),j(21,"Withdraw"),k()(),L(22,"div",8)(23,"h3",9)(24,"span",4),j(25,"Deposit"),k()(),L(26,"input",10),ws("ngModelChange",function(a){return qo(s.depositAmount,a)||(s.depositAmount=a),a}),k(),L(27,"button",12),Oe("click",function(){return s.deposit()}),j(28,"Deposit"),k()()()(),L(29,"div",13),we(30,"app-transaction-history",14),k()(),we(31,"app-footer")),i&2&&(qe(10),wi(Yt(12,6,Yt(11,4,s.chequingbalance$))),qe(9),vs("ngModel",s.withdrawAmount),qe(7),vs("ngModel",s.depositAmount),qe(4),cn("type","chequing"))},dependencies:[Vn,bi,Ti,Xp,Xa,El,Yp,Il,Ya,Ma,Pa]});let t=e;return t})();var Vk=(()=>{let e=class e{constructor(r,i){this.authService=r,this.router=i,this.hasRefreshed=!1}signUp(r,i,s,o,a,c){if(r.preventDefault(),console.log("Form submitted:",i,s,o,a,c),a!==c){alert("Passwords do not match!");return}this.authService.signUpWithEmail(i,a,s,o).then(()=>{this.router.navigate(["/dashboard"]),this.hasRefreshed||setTimeout(()=>{window.location.reload(),this.hasRefreshed=!0,console.log(this.hasRefreshed)},1)}).catch(l=>{console.error("Error signing up:",l.message),alert("Sign up failed. Please try again.")}).finally(()=>{i="",a=""})}};e.\u0275fac=function(i){return new(i||e)(q(wr),q(wt))},e.\u0275cmp=ze({type:e,selectors:[["app-signup"]],standalone:!0,features:[Ge],decls:33,vars:0,consts:[["fname",""],["lname",""],["email",""],["password",""],["confirmPassword",""],[1,"h-screen","bg-white","dark:bg-black"],[1,"signup-container"],[1,"pb-5","text-3xl","font-semibold","text-rose-700"],[1,"form-lg","text-center",3,"submit"],[1,"m-0","mx-auto","my-auto"],[1,"form-group"],["for","email",1,"dark:text-gray-300"],["type","text","id","fname","name","fname","required","",1,"border-2","border-black","rounded-md","px-7","text-center"],["type","text","id","lname","name","lname","required","",1,"border-2","border-black","rounded-md","px-7","text-center"],["type","email","id","email","name","email","required","",1,"border-2","border-black","rounded-md","px-7","text-center"],["for","password",1,"dark:text-gray-300"],["type","password","id","password","name","password","required","",1,"border-2","border-black","rounded-md","px-7","text-center","ml-2"],["for","confirmPassword",1,"dark:text-gray-300"],["type","password","id","confirmPassword","name","confirmPassword","required","",1,"border-2","border-black","rounded-md","px-7","text-center","ml-2"],["type","submit",1,"btn-signup"]],template:function(i,s){if(i&1){let o=Ho();L(0,"div",5)(1,"div",6)(2,"h2",7),j(3,"Create an Account!"),k(),L(4,"form",8),Oe("submit",function(c){ms(o);let l=Mr(10),d=Mr(15),f=Mr(20),m=Mr(25),y=Mr(30);return gs(s.signUp(c,f.value,l.value,d.value,m.value,y.value))}),L(5,"div",9)(6,"div",10)(7,"label",11),j(8,"First Name: "),k(),we(9,"input",12,0),k(),L(11,"div",10)(12,"label",11),j(13,"Last Name: "),k(),we(14,"input",13,1),k(),L(16,"div",10)(17,"label",11),j(18,"Email: "),k(),we(19,"input",14,2),k(),L(21,"div",10)(22,"label",15),j(23,"Password:"),k(),we(24,"input",16,3),k(),L(26,"div",10)(27,"label",17),j(28,"Confirm Password:"),k(),we(29,"input",18,4),k()(),L(31,"button",19),j(32,"Sign Up"),k()()()()}},styles:[".signup-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh}.form-group[_ngcontent-%COMP%]{margin:0 auto 20px}.btn-signup[_ngcontent-%COMP%]{padding:10px 20px;font-size:18px;background-color:#be123c;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.btn-signup[_ngcontent-%COMP%]:hover{background-color:#881337}"]});let t=e;return t})();var Uk=(()=>{let e=class e{constructor(r){this.savingsService=r,this.depositAmount=0,this.withdrawAmount=0,this.savingsbalance$=this.savingsService.getBalance()}ngOnInit(){}deposit(){this.depositAmount>0&&(this.savingsService.deposit(this.depositAmount),this.depositAmount=0)}withdraw(){this.withdrawAmount>0&&(this.savingsService.withdraw(this.withdrawAmount),this.withdrawAmount=0)}};e.\u0275fac=function(i){return new(i||e)(q(Gp))},e.\u0275cmp=ze({type:e,selectors:[["app-savings"]],standalone:!0,features:[Ge],decls:32,vars:8,consts:[[1,"flex","flex-col","min-h-screen","bg-gray-100","mx-auto","pt-20","py-8","bg-white","dark:bg-black","transition-all","duration-500","ease-in-out"],[1,"text-3xl","font-bold","text-gray-700","mt-10","mb-4","rounded-lg","p-4","dark:text-rose-600"],[1,"container","mx-auto","bg-white","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","mb-4","max-w-md","justify-center","items-center","dark:bg-zinc-950","transition-all","duration-500","ease-in-out"],[1,"text-xl","font-semibold","mb-2","flex","justify-between","items-center"],[1,"text-gray-600","dark:text-gray-300"],[1,"ml-auto","dark:text-gray-300"],[1,"container","flex","mx-auto","justify-center","items-center"],[1,"md:flex","justify-between","gap-20","mt-2","mb-5"],[1,"bg-white","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","mb-4","max-w-xs","justify-center","items-center","dark:bg-zinc-950","transition-all","duration-500","ease-in-out"],[1,"text-xl","font-semibold","mb-2","flex","justify-center","items-center"],["type","number","placeholder","Amount",1,"border","p-2","rounded-md","mb-2",3,"ngModelChange","ngModel"],[1,"bg-red-500","text-white","p-2","rounded-md",3,"click"],[1,"bg-green-500","text-white","p-2","rounded-md",3,"click"],[1,"container","bg-white","dark:bg-zinc-950","mx-auto","rounded-lg","shadow-md","dark:shadow-rose-950","p-4","mb-4","max-w-2xl","transition-all","duration-500","ease-in-out"],[3,"type"]],template:function(i,s){i&1&&(we(0,"app-navbar"),L(1,"div",0)(2,"h2",1),j(3,"Savings Account"),k(),we(4,"br"),L(5,"div",2)(6,"h3",3)(7,"span",4),j(8,"Balance"),k(),L(9,"span",5),j(10),jt(11,"async"),jt(12,"currency"),k()()(),L(13,"div",6)(14,"div",7)(15,"div",8)(16,"h3",9)(17,"span",4),j(18,"Withdraw"),k()(),L(19,"input",10),ws("ngModelChange",function(a){return qo(s.withdrawAmount,a)||(s.withdrawAmount=a),a}),k(),L(20,"button",11),Oe("click",function(){return s.withdraw()}),j(21,"Withdraw"),k()(),L(22,"div",8)(23,"h3",9)(24,"span",4),j(25,"Deposit"),k()(),L(26,"input",10),ws("ngModelChange",function(a){return qo(s.depositAmount,a)||(s.depositAmount=a),a}),k(),L(27,"button",12),Oe("click",function(){return s.deposit()}),j(28,"Deposit"),k()()()(),L(29,"div",13),we(30,"app-transaction-history",14),k()(),we(31,"app-footer")),i&2&&(qe(10),wi(Yt(12,6,Yt(11,4,s.savingsbalance$))),qe(9),vs("ngModel",s.withdrawAmount),qe(7),vs("ngModel",s.depositAmount),qe(4),cn("type","savings"))},dependencies:[Vn,bi,Ti,Xp,Xa,El,Yp,Il,Ya,Ma,Pa]});let t=e;return t})();var jk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ze({type:e,selectors:[["app-cannotaccess"]],standalone:!0,features:[Ge],decls:6,vars:0,consts:[[1,"flex","items-center","justify-center","min-h-screen","bg-red-100","dark:bg-black"],[1,"text-center"],[1,"text-4xl","font-bold","text-red-500"],[1,"text-lg","mt-4","dark:text-white"]],template:function(i,s){i&1&&(L(0,"div",0)(1,"div",1)(2,"h1",2),j(3,"CANNOT ACCESS"),k(),L(4,"p",3),j(5,"You do not have permission to view this page."),k()()())}});let t=e;return t})();var Bk=(()=>{let e=class e{constructor(r){this.router=r,this.previousUrl="",this.currentUrl="",this.currentUrl=this.router.url,r.events.pipe(sn(i=>i instanceof tr)).subscribe(i=>{this.previousUrl=this.currentUrl,this.currentUrl=i.url})}getPreviousUrl(){return this.previousUrl}};e.\u0275fac=function(i){return new(i||e)(X(wt))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var $k=(t,e)=>{let n=U(pn),r=U(wt),i=U(Bk),s=sessionStorage.getItem("user"),o=s?JSON.parse(s):null;return console.log("Current User:",o),o?!0:(r.navigate(["/cannotaccess"]),alert("Sorry. You will have to login first to access here"),setTimeout(()=>{let a=i.getPreviousUrl();console.log(a),console.log("Works Though"),r.navigate([a||"/login"])},2500),!1)};var Hk=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:YA},{path:"login",component:hM},{path:"dashboard",component:yk,canActivate:[$k]},{path:"chequing",component:Lk},{path:"savings",component:Uk},{path:"transactionhistory",component:Ya},{path:"signup",component:Vk},{path:"cannotaccess",component:jk},{path:"**",redirectTo:"cannotaccess"}];var Qk="firebasestorage.googleapis.com",q6="storageBucket",z6=2*60*1e3,G6=10*60*1e3;var Er=class t extends $t{constructor(e,n,r=0){super(rb(e),`Firebase Storage: ${n} (${rb(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rb(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},ei=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(ei||{});function rb(t){return"storage/"+t}function W6(){let t="An unknown error occurred, please check the error payload for server response.";return new Er(ei.UNKNOWN,t)}function K6(){return new Er(ei.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Q6(){return new Er(ei.CANCELED,"User canceled the upload/download.")}function Y6(t){return new Er(ei.INVALID_URL,"Invalid URL '"+t+"'.")}function J6(t){return new Er(ei.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function qk(t){return new Er(ei.INVALID_ARGUMENT,t)}function Yk(){return new Er(ei.APP_DELETED,"The Firebase app was deleted.")}function X6(t){return new Er(ei.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Zr=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw J6(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(z){z.path.charAt(z.path.length-1)==="/"&&(z.path_=z.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(z){z.path_=decodeURIComponent(z.path)}let d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${d}/b/${i}/o${m}`,"i"),E={bucket:1,path:3},x=n===Qk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",O=new RegExp(`^https?://${x}/${i}/${R}`,"i"),B=[{regex:a,indices:c,postModify:s},{regex:y,indices:E,postModify:l},{regex:O,indices:{bucket:1,path:2},postModify:l}];for(let z=0;z<B.length;z++){let Re=B[z],re=Re.regex.exec(e);if(re){let b=re[Re.indices.bucket],_=re[Re.indices.path];_||(_=""),r=new t(b,_),Re.postModify(r);break}}if(r==null)throw Y6(e);return r}},ib=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function Z6(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function d(...R){l||(l=!0,e.apply(null,R))}function f(R){i=setTimeout(()=>{i=null,t(y,c())},R)}function m(){s&&clearTimeout(s)}function y(R,...O){if(l){m();return}if(R){m(),d.call(null,R,...O);return}if(c()||o){m(),d.call(null,R,...O);return}r<64&&(r*=2);let B;a===1?(a=2,B=0):B=(r+Math.random())*1e3,f(B)}let E=!1;function x(R){E||(E=!0,m(),!l&&(i!==null?(R||(a=2),clearTimeout(i),f(0)):R||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,x(!0)},n),x}function e5(t){t(!1)}function t5(t){return t!==void 0}function zk(t,e,n,r){if(r<e)throw qk(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw qk(`Invalid value for '${t}'. Expected ${n} or less.`)}function n5(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var sb=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(sb||{});function r5(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var ob=class{constructor(e,n,r,i,s,o,a,c,l,d,f,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,E)=>{this.resolve_=y,this.reject_=E,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Za(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===sb.NO_ERROR,c=s.getStatus();if(!a||r5(c,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===sb.ABORT;r(!1,new Za(!1,null,d));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new Za(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());t5(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=W6();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?Yk():Q6();o(c)}else{let c=K6();o(c)}};this.canceled_?n(!1,new Za(!1,null,!0)):this.backoffId_=Z6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&e5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Za=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function i5(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function s5(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function o5(t,e){e&&(t["X-Firebase-GMPID"]=e)}function a5(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function c5(t,e,n,r,i,s,o=!0){let a=n5(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return o5(l,e),i5(l,n),s5(l,s),a5(l,r),new ob(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function u5(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function l5(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}var Mse=256*1024;var ab=class t{constructor(e,n){this._service=e,n instanceof Zr?this._location=n:this._location=Zr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Zr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return l5(this._location.path)}get storage(){return this._service}get parent(){let e=u5(this._location.path);if(e===null)return null;let n=new Zr(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw X6(e)}};function Gk(t,e){let n=e?.[q6];return n==null?null:Zr.makeFromBucketSpec(n,t)}function d5(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:sa(i,t.app.options.projectId))}var cb=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Qk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=z6,this._maxUploadRetryTime=G6,this._requests=new Set,i!=null?this._bucket=Zr.makeFromBucketSpec(i,this._host):this._bucket=Gk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Zr.makeFromBucketSpec(this._url,e):this._bucket=Gk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){zk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){zk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return v(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return v(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ab(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new ib(Yk());{let o=c5(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return v(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},Wk="@firebase/storage",Kk="0.12.5";var Jk="storage";function Xk(t=ar(),e){t=We(t);let r=Vr(t,Jk).getImmediate({identifier:e}),i=ia("storage");return i&&Zk(r,...i),r}function Zk(t,e,n,r={}){d5(t,e,n,r)}function h5(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new cb(n,r,i,e,Dn)}function f5(){Tn(new xt(Jk,h5,"PUBLIC").setMultipleInstances(!0)),Me(Wk,Kk,""),Me(Wk,Kk,"esm2017")}f5();var Cl=class{constructor(e){return e}},eO="storage",ub=class{constructor(){return Ur(eO)}};var lb=new G("angularfire2.storage-instances");function p5(t,e){let n=Ni(eO,t,e);return n&&new Cl(n)}function m5(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Cl(r)}}var g5={provide:ub,deps:[[new He,lb]]},y5={provide:Cl,useFactory:p5,deps:[[new He,lb],fn]};function tO(t,...e){return Me("angularfire",jn.full,"gcs"),Gt([y5,g5,{provide:lb,useFactory:m5(t),multi:!0,deps:[be,Rt,ur,Bn,[new He,Hr],[new He,cr],...e]}])}var nO=Xe(Xk,!0);var rO={production:!1,firebaseConfig:{apiKey:"AIzaSyAiPN-xGHJGT36J8V14fLaCV6cqq431Gp4",authDomain:"bankingapp-49ab9.firebaseapp.com",databaseURL:"https://bankingapp-49ab9-default-rtdb.firebaseio.com",projectId:"bankingapp-49ab9",storageBucket:"bankingapp-49ab9.appspot.com",messagingSenderId:"762026356516",appId:"1:762026356516:web:7515d017e975d555748db1"}};var iO={providers:[QA(Hk),bR(()=>TR(rO.firebaseConfig)),wx(()=>Ex()),cM(()=>lM()),hk(()=>fk()),tO(()=>nO())]};pA(ap,iO).catch(t=>console.error(t));
